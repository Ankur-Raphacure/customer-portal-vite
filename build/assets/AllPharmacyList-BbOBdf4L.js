import{r as a,q as Be,u as we,b as _e,a as B,bt as Fe,bu as Te,aU as Le,bv as ke,bw as $,j as t,a9 as De,s as Ee,l as ee,bx as ze,ae as He,a7 as Ge,a8 as Oe,S as Re,by as Ue,bz as Ve,c as We,aF as qe,aG as Je,aH as Ke}from"./index-f4owDEOR.js";const as=w=>{var X,Y,Z;let{sectionName:c}=(X=w==null?void 0:w.match)==null?void 0:X.params;c=c==="all"?"":c;const[z,Qe]=a.useState([]),_=Be(),y=_==null?void 0:_.state,se=y==null?void 0:y.name,[l,te]=a.useState([]),H=[{title:"Pharmacy",link:"/pharmacy"},{title:se||c}],ae=[{name:"Branded",id:"branded",link:"/pharmacy"},{name:"Generic",id:"generic",link:"/pharmacy"},{name:"Wellness",id:"wellness",link:"/pharmacy"}],[Xe,ne]=a.useState([]),[G,Ye]=a.useState(1),[O]=a.useState(10),x=12,[N,ce]=a.useState(1),[P,R]=a.useState(""),[F,T]=a.useState(""),[b,A]=a.useState(0),[L,I]=a.useState(""),[f,v]=a.useState(""),[p,M]=a.useState(""),[d,U]=a.useState(c?[Number(c)]:[]),[C,u]=a.useState([]),[S,V]=a.useState(""),[ie,Ze]=a.useState(1),[$e,es]=a.useState(10),[oe,de]=a.useState(1);we();const o=_e(),[re,W]=a.useState(!1),{cartItems:k}=B(e=>e.checkout),{user:h}=B(e=>e.auth),m=((Y=k==null?void 0:k.carts)==null?void 0:Y.find(e=>(e==null?void 0:e.section_key)==="pharmacy"))||[],{allCategoriesList:le,allMedicinesList:D,MedicinesCount:q,allSubCategoriesList:ue,allSaltCategoryList:E,allBrandsList:he,allCompareMedicineList:j}=B(e=>e.labtest),g=a.useMemo(()=>Array.isArray(j)?j==null?void 0:j.map(e=>e==null?void 0:e.medicines):[],[j]),{selectedFilterType:ss}=B(e=>e.generic),me=e=>{const s=[...l];if(s!=null&&s.includes(e)){const n=s.findIndex(i=>i===e);s.splice(n,1)}else s.push(e);te(s)};a.useEffect(()=>{c==="allProductsBySalt"&&J()},[l,ie,x]);const J=async()=>{const e=oe+8;de(e),W(!0),await o(Fe({status:"active",categoryIds:l,page:1,count:e})),W(!1)};a.useEffect(()=>{ge(G)},[G,z]);const ge=e=>{const s=(e-1)*O,n=s+O;ne(z.slice(s,n))},K=e=>{h!=null&&h.id?ye(e):o(We(!0))},ye=async e=>{const s=[{service_code:e==null?void 0:e.service_code,count:1}],n={carts:[{user_id:h==null?void 0:h.id,useWallet:!0,collection_1_date:null,collection_1_slot:null,medicines:s,attachment_ids:qe("pharmacy"),section_key:"pharmacy"}]};await o(Je(n)),await o(Ke())},xe=()=>{ce(e=>e+1)},fe=async e=>{T(e)},pe=e=>{T(e)},Ce=async e=>{const s=[...d];if(s!=null&&s.includes(e)){const n=s.findIndex(i=>i===e);s.splice(n,1)}else s.push(e);U(s),o($({filters:{categoryIds:s}})),u([]),A(0),I(""),v(""),M(""),u([])},Se=e=>{const s=[...C];if(s!=null&&s.includes(e)){const n=s.findIndex(i=>i===e);s.splice(n,1)}else s.push(e);u(s)},je=e=>{V(S!=e?e:""),u([]),A(0),I(""),v(""),M(""),u([])},Ne=async e=>{R(e),Q()},Pe=e=>{v(f!=e[0]?e[0]:""),M(p!=e[1]?e[1]:"")},be=e=>{A((e==null?void 0:e[0])??0),I(e==null?void 0:e[1])},Q=()=>{T(""),A(0),I(""),v(""),M(""),U([]),u([]),V("")},Ae=async()=>{let e={};P&&(e.searchText=P),F&&(e.sortBy=F),d&&(e.categoryIds=d),C&&(e.brands=C),(b===0||b)&&(e.minPrice=b),L&&(e.maxPrice=L),f&&(e.minDiscount=f),p&&(e.maxDiscount=p),S&&(e.medicineType=S),e.count=x,e.page=N,await o(Ve(e))};return a.useEffect(()=>{c!=="allProductsBySalt"&&Ae()},[N,x,JSON.stringify(d),P,F,L,b,p,f,C,S]),a.useEffect(()=>{const e={categorieId:""};c==="allProductsBySalt"?o(Te(e)):(o(Le({sectionName:"pharmacy"})),o(ke(e)))},[]),a.useEffect(()=>{o($({filters:{categoryIds:d}}))},[d]),t.jsxs(De,{children:[re&&t.jsx(Ee,{}),c==="allProductsBySalt"?t.jsxs("div",{className:"allProductsBySalt-div",children:[t.jsxs("div",{children:[t.jsxs("div",{className:" comparison-carousel-div",children:[t.jsx(ee,{moduleName:"pharmacy",medicines:c,SelectedCategory:y,list:H}),t.jsx("p",{className:" comparison-carousel-title",children:"Compare Generic & Branded"}),t.jsx("div",{className:" comparison-carousel-filter-btn",children:(Z=E==null?void 0:E.category_ids)==null?void 0:Z.map((e,s)=>{if(!(e!=null&&e.name))return null;const n=l.includes(e.id);return t.jsx("button",{onClick:()=>me(e.id),className:n?"active btn":"btn",style:{backgroundColor:l.includes(e.id)?"#252b61":"white",color:l.includes(e.id)?"white":"black"},children:e==null?void 0:e.name},s)})})]}),(g==null?void 0:g.length)>0?t.jsx("div",{children:t.jsx("div",{className:"all-compare-medicines-list",children:g==null?void 0:g.map((e,s)=>{const i=(e==null?void 0:e.length)-1,r=[...e];r.sort((ve,Me)=>ve.discounted_price-Me.discounted_price);const Ie=m==null?void 0:m.medicines;return t.jsx(ze,{generic:r==null?void 0:r[0],addToCart:K,isAddedtoCart:Ie,branded:r==null?void 0:r[i]},s)})})}):t.jsx(t.Fragment,{children:t.jsx("div",{className:"no-comparision-found-sec",children:t.jsx("h5",{children:"No Comparision found"})})})]}),t.jsx("div",{className:"pagination-box-sec-pha mb-3",children:t.jsx("button",{onClick:J,className:"load-more-btn",children:"Load More"})})]}):t.jsxs("div",{className:"all-pharmacy-page-div",children:[t.jsx("div",{className:"filter-module-div",children:t.jsx(He,{allCategoriesList:le,allBrandsList:he,allSubCategoriesList:ue,handleChangeCategoryFilter:Ce,handleonFilterDiscount:Pe,filterPriceRange:be,handleClearAll:Q,categoryFilter:d,brandFilter:C,minDiscount:f,maxDiscount:p,allTypeList:ae,typeFilter:S,handleChangeBrandFilter:Se,handleChangeTypeFilter:je,setSelectedSortOption:pe,origin:"pharmacy",pathName:"/pharmacy"})}),t.jsxs("div",{className:"right-card-module-div",children:[t.jsx(ee,{moduleName:"pharmacy",medicines:c,SelectedCategory:y,list:H}),t.jsxs("div",{className:"parent-search-fild-div",children:[t.jsx("div",{className:"parent-search-left-div",children:t.jsx(Ge,{details:Oe,handleonFilterName:Ne,setSearchText:R,searchText:P})}),t.jsx("div",{className:"selector-filter-sub-module-div",children:t.jsx(Re,{showSearch:!0,placeholder:"Sort By",filterOption:(e,s)=>((s==null?void 0:s.label)??"").toLowerCase().includes(e.toLowerCase()),defaultValue:"discount",onChange:fe,options:[{value:"discount",label:"Discount"},{value:"desc",label:"Price: High to Low"},{value:"asc",label:"Price: Low to High"}]})})]}),t.jsx("div",{className:"page-count-div",children:t.jsxs("p",{children:["Showing 1 to ",x*N," Medicines of"," ",q," Medicines"]})}),t.jsx("div",{className:"card-module-div",children:D==null?void 0:D.map(e=>{var n;const s=(n=m==null?void 0:m.medicines)==null?void 0:n.find(i=>(i==null?void 0:i.service_code)===e.service_code);return t.jsx(Ue,{medicineDetail:e,isAddedtoCart:s,addToCart:K,type:c},e.service_code)})}),t.jsx("div",{className:"pagination-box-sec-pha",children:t.jsx("div",{className:"pagination-box-sec-pha",children:q>x*N&&t.jsx("button",{onClick:xe,className:"load-more-btn",children:"Load More"})})})]})]})]})};export{as as default};
