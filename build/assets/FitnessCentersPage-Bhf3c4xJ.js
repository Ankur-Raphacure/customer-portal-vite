import{r as n,A as ke,u as _e,b as Te,a as b,bb as De,bc as Ee,h as Ge,bd as Oe,be as ee,j as t,P as Ve,w as ze,bf as He,S as Re,y as We,eY as Ye,eZ as Je,Y as Ue,c as Ze,_ as $e,$ as qe,a0 as Ke}from"./index-DDOdRoFT.js";import{S as Qe}from"./SideFilterModule-BZN1WbF0.js";import{B as se}from"./BreadCrumbModule-BS-lnu2d.js";import{P as Xe}from"./ProductCard-ByQ5fzNn.js";import"./index-yoN86szv.js";import"./index-BbRpjKC3.js";const ms=F=>{var q,K,Q,X;let{sectionName:c}=(q=F==null?void 0:F.match)==null?void 0:q.params;c=c==="all"?"":c;const[O,es]=n.useState([]),k=ke(),x=k==null?void 0:k.state,te=x==null?void 0:x.name,[l,ne]=n.useState([]),V=[{title:"Fitness",link:"/fitness"},{title:te||c}],ae=[{name:"Branded",id:"branded",link:"/pharmacy"},{name:"Generic",id:"generic",link:"/pharmacy"},{name:"Wellness",id:"wellness",link:"/pharmacy"},{name:"Fitness",id:"fitness",link:"/fitness"}],[ss,ce]=n.useState([]),[z,ts]=n.useState(1),[H]=n.useState(10),p=12,[A,ie]=n.useState(1),[I,R]=n.useState(""),[_,T]=n.useState(""),[v,B]=n.useState(0),[D,M]=n.useState(""),[y,L]=n.useState(""),[S,w]=n.useState(""),[r,W]=n.useState(c?[Number(c)]:[]),[C,u]=n.useState([]),[j,Y]=n.useState(""),[oe,ns]=n.useState(1),[as,cs]=n.useState(10),[re,de]=n.useState(1);_e();const i=Te(),[le,J]=n.useState(!1),{cartItems:E}=b(e=>e.checkout),{user:h,userCity:g}=b(e=>e.auth),m=((K=E==null?void 0:E.carts)==null?void 0:K.find(e=>(e==null?void 0:e.section_key)==="pharmacy"))||[],{allCategoriesList:ue,allMedicinesList:is,MedicinesCount:U,allSubCategoriesList:he,allSaltCategoryList:G,allBrandsList:ge,allCompareMedicineList:P}=b(e=>e.labtest),f=n.useMemo(()=>Array.isArray(P)?P==null?void 0:P.map(e=>e==null?void 0:e.medicines):[],[P]),{selectedFilterType:os}=b(e=>e.generic),{allGymVendorsList:me,allGymCategoriesList:N}=b(e=>e.generic),fe=(e="bengaluru")=>{i(Ye({type:"gym",city:e==null?void 0:e.toLowerCase()})),i(Je({type:"gym",city:e==null?void 0:e.toLowerCase()}))};n.useEffect(()=>{fe(g==null?void 0:g.name)},[g==null?void 0:g.name]),console.log("hai"),console.log("all gym",me),console.log("all gym categories",N);const xe=e=>{const s=[...l];if(s!=null&&s.includes(e)){const a=s.findIndex(o=>o===e);s.splice(a,1)}else s.push(e);ne(s)};n.useEffect(()=>{c==="allProductsBySalt"&&Z()},[l,oe,p]);const Z=async()=>{const e=re+8;de(e),J(!0),await i(De({status:"active",categoryIds:l,page:1,count:e})),J(!1)};n.useEffect(()=>{pe(z)},[z,O]);const pe=e=>{const s=(e-1)*H,a=s+H;ce(O.slice(s,a))},ye=e=>{h!=null&&h.id?Se(e):i(Ze(!0))},Se=async e=>{const s=[{service_code:e==null?void 0:e.service_code,count:1}],a={carts:[{user_id:h==null?void 0:h.id,useWallet:!0,collection_1_date:null,collection_1_slot:null,medicines:s,attachment_ids:$e("pharmacy"),section_key:"pharmacy"}]};await i(qe(a)),await i(Ke())},Ce=()=>{ie(e=>e+1)},je=async e=>{T(e)},Pe=e=>{T(e)},Ne=async e=>{const s=[...r];if(s!=null&&s.includes(e)){const a=s.findIndex(o=>o===e);s.splice(a,1)}else s.push(e);W(s),i(ee({filters:{categoryIds:s}})),u([]),B(0),M(""),L(""),w(""),u([])},be=e=>{const s=[...C];if(s!=null&&s.includes(e)){const a=s.findIndex(o=>o===e);s.splice(a,1)}else s.push(e);u(s)},Ae=e=>{Y(j!=e?e:""),u([]),B(0),M(""),L(""),w(""),u([])},Ie=async e=>{R(e),$()},ve=e=>{L(y!=e[0]?e[0]:""),w(S!=e[1]?e[1]:"")},Be=e=>{B((e==null?void 0:e[0])??0),M(e==null?void 0:e[1])},$=()=>{T(""),B(0),M(""),L(""),w(""),W([]),u([]),Y("")},Me=async()=>{let e={};I&&(e.searchText=I),_&&(e.sortBy=_),r&&(e.categoryIds=r),C&&(e.brands=C),(v===0||v)&&(e.minPrice=v),D&&(e.maxPrice=D),y&&(e.minDiscount=y),S&&(e.maxDiscount=S),j&&(e.medicineType=j),e.count=p,e.page=A,await i(Ue(e))};return n.useEffect(()=>{c!=="allProductsBySalt"&&Me()},[A,p,JSON.stringify(r),I,_,D,v,S,y,C,j]),n.useEffect(()=>{const e={categorieId:""};c==="allProductsBySalt"?i(Ee(e)):(i(Ge({sectionName:"pharmacy"})),i(Oe(e)))},[]),n.useEffect(()=>{i(ee({filters:{categoryIds:r}}))},[r]),t.jsxs(Ve,{children:[le&&t.jsx(ze,{}),c==="allProductsBySalt"?t.jsxs("div",{className:"allProductsBySalt-div",children:[t.jsxs("div",{children:[t.jsxs("div",{className:" comparison-carousel-div",children:[t.jsx(se,{moduleName:"pharmacy",medicines:c,SelectedCategory:x,list:V}),t.jsx("p",{className:" comparison-carousel-title",children:"Compare Generic & Branded"}),t.jsx("div",{className:" comparison-carousel-filter-btn",children:(Q=G==null?void 0:G.category_ids)==null?void 0:Q.map((e,s)=>{if(!(e!=null&&e.name))return null;const a=l.includes(e.id);return t.jsx("button",{onClick:()=>xe(e.id),className:a?"active btn":"btn",style:{backgroundColor:l.includes(e.id)?"#252b61":"white",color:l.includes(e.id)?"white":"black"},children:e==null?void 0:e.name},s)})})]}),(f==null?void 0:f.length)>0?t.jsx("div",{children:t.jsx("div",{className:"all-compare-medicines-list",children:f==null?void 0:f.map((e,s)=>{const o=(e==null?void 0:e.length)-1,d=[...e];d.sort((we,Fe)=>we.discounted_price-Fe.discounted_price);const Le=m==null?void 0:m.medicines;return t.jsx(He,{generic:d==null?void 0:d[0],addToCart:ye,isAddedtoCart:Le,branded:d==null?void 0:d[o]},s)})})}):t.jsx(t.Fragment,{children:t.jsx("div",{className:"no-comparision-found-sec",children:t.jsx("h5",{children:"No Comparision found"})})})]}),t.jsx("div",{className:"pagination-box-sec-pha mb-3",children:t.jsx("button",{onClick:Z,className:"load-more-btn",children:"Load More"})})]}):t.jsxs("div",{className:"all-pharmacy-page-div",children:[t.jsx("div",{className:"filter-module-div",children:t.jsx(Qe,{allCategoriesList:ue,allBrandsList:ge,allSubCategoriesList:he,handleChangeCategoryFilter:Ne,handleonFilterDiscount:ve,filterPriceRange:Be,handleClearAll:$,categoryFilter:r,brandFilter:C,minDiscount:y,maxDiscount:S,allTypeList:ae,typeFilter:j,handleChangeBrandFilter:be,handleChangeTypeFilter:Ae,setSelectedSortOption:Pe,origin:"pharmacy"})}),t.jsxs("div",{className:"right-card-module-div",children:[t.jsx(se,{moduleName:"gym",medicines:c,SelectedCategory:x,list:V}),t.jsx("div",{className:"parent-search-left-div",children:t.jsx(Re,{details:[" ðŸ’ª Gym"],handleonFilterName:Ie,setSearchText:R,searchText:I})}),t.jsxs("div",{className:"parent-search-fild-div",children:[t.jsx("div",{style:{marginTop:"20px"},children:t.jsx("h2",{children:"All Fitness Centres"})}),t.jsx("div",{className:"selector-filter-sub-module-div",children:t.jsx(We,{showSearch:!0,placeholder:"Sort By",filterOption:(e,s)=>((s==null?void 0:s.label)??"").toLowerCase().includes(e.toLowerCase()),defaultValue:"discount",onChange:je,options:[{value:"discount",label:"Discount"},{value:"desc",label:"Price: High to Low"},{value:"asc",label:"Price: Low to High"}]})})]}),t.jsx("div",{className:"page-count-div",children:t.jsxs("p",{children:["Showing 1 to ",p*A," Medicines of"," ",U," Medicines"]})}),t.jsx("div",{className:"card-module-div",children:Object.keys(N).length>0&&((X=N==null?void 0:N.vendors)==null?void 0:X.map(e=>{var a;(a=m==null?void 0:m.medicines)==null||a.find(o=>(o==null?void 0:o.service_code)===e.service_code);const s={name:e==null?void 0:e.name,place:e==null?void 0:e.city,imgLink:e==null?void 0:e.image};return t.jsx(Xe,{data:s})}))}),t.jsx("div",{className:"pagination-box-sec-pha",children:t.jsx("div",{className:"pagination-box-sec-pha",children:U>p*A&&t.jsx("button",{onClick:Ce,className:"load-more-btn",children:"Load More"})})})]})]})]})};export{ms as default};
