import{d as be,u as je,A as ve,b as we,r as s,a as ye,j as e,B as P,C as Se,D as Ne,E as ke,J as Pe,K as Ce,N as ze,O as Ae,Q as Oe,R as Ue}from"./index-DDOdRoFT.js";import{R as Te}from"./index-DNCQKdlK.js";import{G as Me}from"./index-DFW3kjcr.js";import{A as Ie}from"./index-yoN86szv.js";const $=be.div`
  padding: 20px 56px;

  .upload-sub-prescription-div {
    display: flex;
    gap: 2rem;
    width: 100%;
  }
  .upload-sub-prescription-left-div {
    display: flex;
    gap: 2rem;
    width: 70%;
    padding: 20px 30px;
    border-radius: 25px;
    border: 1px solid #d2cfcf;
  }
  .upload-sub-prescription-right-div {
    background: #f2f2f6;
    border-radius: 25px;
    padding: 25px;
  }
  .upload-sub-prescription-banner {
    width: 100%;
    border-radius: 15px;
    background-color: #d6e4ea;
    padding: 12px 15px;
    box-sizing: border-box;
    font-size: 14px;
    color: #1e1e1e;
    font-family: Outfit, sans-serif;
    margin-top: 54px;
  }
  .upload-sub-prescription-banner-img {
    display: grid;
    margin-top: 54px;
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
  }
  .upload-sub-prescription-banner-text {
    width: 50%;
    font-size: 18px;
    letter-spacing: 1.5px;
    font-family: Outfit, sans-serif;
    color: #1e1e1e;
  }
  .prescription-header {
    display: flex;
    justify-content: space-between;
    p {
      font-size: 28px;
      letter-spacing: 0.02em;
      font-weight: 600;
      font-family: Outfit, sans-serif;
      color: #1e1e1e;
    }
    button {
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 45px;
      background-color: #252b61;
      height: 55px;
      padding: 17px 46px;
      font-size: 18px;
      color: #fff;
      font-family: Outfit, sans-serif;
      border: none;
    }
  }
  .prescription-conf-div {
    display: flex;
    justify-content: center;
    button {
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 45px;
      background-color: #252b61;
      height: 55px;
      padding: 17px 46px;
      font-size: 18px;
      color: #fff;
      font-family: Outfit, sans-serif;
      border: none;
    }
  }
  .upload-prescription-image {
    width: 42%;
    p {
      width: 100%;
      font-size: 18px;
      letter-spacing: 1.5px;
      font-family: Outfit, sans-serif;
      color: #1e1e1e;
    }
  }
  .upload-prescription-image-div {
    img {
      border-radius: 25px;
      height: 416.7px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  }
  .Uploaded-prescription-imgdata {
    width: 100%;
    position: relative;
    border-radius: 15px;
    background-color: #fff;
    padding: 0rem 1rem;
  }
  .savedprescription-main-list-div {
    margin-top: 1rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  .vertical-line {
    width: 1px;
    height: 100%;
    background-color: #ebebeb;
  }
  .upload-container {
    position: relative;
    border-radius: 25px;
    background-color: #fff;
    border: 1px dashed #7291f4;
    box-sizing: border-box;
    width: 100%;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
    align-content: center;
    padding: 63px 20px;
    text-align: center;
    font-size: 18px;
    color: #1e1e1e;
    font-family: Outfit, sans-serif;
    cursor: pointer;
  }
  .poppins-medium {
    font-size: 16px;
    letter-spacing: 1.5px;
    font-family: Outfit, sans-serif;
    color: #1e1e1e;
    text-decoration: underline;
  }
  .poppins-semibold {
    font-size: 16px;
    letter-spacing: 1.5px;
    font-family: Outfit, sans-serif;
    color: #1e1e1e;
  }
  .hidden {
    display: none;
  }
  .image-format {
    font-size: 13px;
    letter-spacing: 1.5px;
    font-family: Outfit, sans-serif;
    color: #888;
  }
  .prescription-address-card-div {
    width: 100%;
    border-radius: 25px;
    background-color: #fff;
    border: 1px solid #dcdcdc;
    padding: 21px 28px;
    cursor: pointer;
  }
  .prescription-address-Conf-div {
    width: 100%;
    border-radius: 25px;
    background-color: #fff;
    border: 1px solid #dcdcdc;

    h4 {
      font-size: 28px;
      letter-spacing: 0.02em;
      font-weight: 600;
      font-family: Outfit, sans-serif;
      color: #1e1e1e;
    }
    h5 {
      font-size: 22px;
      letter-spacing: 0.02em;
      font-weight: 500;
      font-family: Outfit, sans-serif;
      color: #1e1e1e;
      opacity: 0.8;
    }
    p {
      font-size: 18px;
      letter-spacing: 0.02em;
      font-family: Outfit, sans-serif;
      color: #888;
    }
  }
  .c {
    display: flex !important;
    justify-content: space-between;
    align-items: center;
  }
  .progress-container {
    .progress-barwrap {
      display: flex;
      align-items: center;
      height: 2rem;
      .progress-icons {
        width: 1.5rem;
        margin-left: 1rem;
      }

      .progress-bar {
        height: 1rem;
        background: #d9d9d9;
        border-radius: 10px;
        overflow: hidden;
        width: 100%;

        .progress-div {
          transition-width: auto;
          transition-duration: 300ms;
          transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
          background: #00a5ff;
          height: 100%;
        }
      }
    }
  }
  .mobile-prescription-conf-div {
    display: none;
    justify-content: center;
    button {
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 45px;
      background-color: #252b61;
      height: 55px;
      padding: 17px 46px;
      font-size: 18px;
      color: #fff;
      font-family: Outfit, sans-serif;
      border: none;
    }
  }

  .mobile-view-prescription-add-btn {
    display: none;
    button {
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 45px;
      background-color: #252b61;
      height: 55px;
      padding: 17px 46px;
      font-size: 18px;
      color: #fff;
      font-family: Outfit, sans-serif;
      border: none;
      width: 100%;
    }
  }

  @media (max-width: 768px) {
    padding: 10px 20px;
    .vertical-line {
      display: none;
    }
    .mobile-view-prescription-add-btn {
      display: none;
    }
    .mobile-view-prescription-add-btn {
      display: block;
    }
    .upload-sub-prescription-left-div {
      width: 100%;
      padding: 0px 0px;
      flex-direction: column;
      border: none;
    }
    .upload-sub-prescription-banner-text {
      width: 100%;
      p {
        margin-bottom: 0px;
      }
    }
    .upload-prescription-image {
      width: 100%;
    }
    .upload-prescription-image-div img {
      width: 20rem;
      height: 20rem;
    }
    .upload-prescription-image-div {
      display: flex;
      justify-content: center;
    }
    .upload-sub-prescription-div {
      flex-direction: column-reverse;
      gap: 1rem;
    }
    .upload-sub-prescription-right-div {
      width: 100%;
    }
    .mobile-prescription-conf-div {
      margin-top: 2rem;
      justify-content: center;
      display: block;
      button {
        width: 100%;
      }
    }
    .upload-prescription-mobile-div {
      display: flex;
      flex-direction: column;
    }
    .prescription-header {
      button {
        display: none;
      }
    }
  }
`,Ze=Re=>{const W=je(),C=ve(),z=we(),p=C==null?void 0:C.state,[De,q]=s.useState("Upload Prescription"),o=s.useRef(null),[Fe,Q]=s.useState(null),[I,K]=s.useState(!0),[Le,R]=s.useState(""),[Ge,S]=s.useState(!1),[_e,V]=s.useState(!1),[a,D]=s.useState({}),[Y,Be]=s.useState(""),[Ee,X]=s.useState(!1),[He,A]=s.useState(!0),[O,N]=s.useState("0"),[Z,ee]=s.useState(!1),[se,U]=s.useState(!1),[ie,F]=s.useState(!1),[te,re]=s.useState(""),[ae,T]=s.useState(!1),[ne,Je]=s.useState(null),[$e,We]=s.useState(!1),[oe,L]=s.useState(!1),[j,G]=s.useState(null),_=localStorage.getItem("raphaPrescriptions"),x=_!==null?JSON.parse(_):null,[qe,ce]=s.useState(x!=null&&x[p]?x==null?void 0:x[p]:[]),{userAddress:M}=ye(i=>i.profile),v=p;let w=v;v==="labtest"?w="diagnostic":v==="radiology"?w="ctmri":v==="eyecare"?w="eye_care":v==="dentalcare"&&(w="dental_care");const le=i=>{const t=i.target.files[0];if(G(t),t){const r=URL.createObjectURL(t);Q(r)}const u=i.target.files;let h=[];for(let r=0;r<u.length;r++){const n=u[r];if(n&&(n!=null&&n.type.startsWith("image/"))){const f=new FileReader;f.onloadstart=()=>{F(!0)},f.onprogress=c=>{if(c.lengthComputable){const l=c.loaded/c.total*100;N(`${l}`)}},f.onload=()=>{var g;N("0");const c=3e3,l=50,y=c/l;let m=0;const d=()=>{const k=m/y*100;N(`${k}`),m++,m<=y?setTimeout(d,l):(N("100"),ee(!0))};setTimeout(d,l),h.push(n),o.current?o.current.push((g=o.current)==null?void 0:g.files,h):o.current=[...h]},f.readAsDataURL(n)}else o.current=null}},B=()=>{K(!1)},de=()=>{var i;(!o.current||((i=o.current)==null?void 0:i.length)===0)&&(q("Saved Prescription"),X(!0),A(!1),A(!1))};s.useEffect(()=>{O==="0"&&A(!0)},[O]);const pe=async(i,t)=>{var c,l,y;D(t);const u=o.current,h=localStorage.getItem("raphaPrescriptions"),r=h?JSON.parse(h):{},n=r!=null&&r[p]?r[p]:[],f=t==null?void 0:t.id;if(!f){R("Address is required.");return}if(!u||u.length===0){alert("At least one file is required.");return}R("");for(let m=0;m<u.length;m++){const d=u[m];if(d&&d.name){S(!0);const g=d.name,k=Y,xe=w;if(g){const H=g.split("."),he="."+H[H.length-1],b=await z(ze({ext:he,remarks:k,address_id:f,type:xe})),J=(c=b==null?void 0:b.payload)==null?void 0:c.signedUrl,ge=(y=(l=b==null?void 0:b.payload)==null?void 0:l.attachment)==null?void 0:y.id;J&&(await Ae.put(J,d,{headers:{"Content-Type":d.type}}),n.push({filename:g,remarks:k,attachment_id:ge}),r[p]=[...n],localStorage.setItem("raphaPrescriptions",JSON.stringify(r)),ce([...n]),o.current=null,de(),V(!1),await z(Oe("Prescription Uploaded Successfully"))&&L(!0)),S(!1)}else S(!1)}}return!0},ue=()=>{L(!1),W.push(`/${p}`)},fe=i=>{G(null),F(!1)},E=()=>{U(!0),D({})},me=()=>{U(!1),z(Ue()),T(!0);const i=a!=null&&a.id?"Successfully Updated the Address.":"Successfully Added the new Address.";re(i)};return e.jsx($,{children:e.jsxs("div",{className:"",children:[I&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"prescription-header",children:[e.jsx("p",{children:"Upload Prescription"}),j&&e.jsxs("button",{onClick:B,children:["Proceed ",e.jsx(P,{className:"ms-3"})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"upload-sub-prescription-div",children:[e.jsxs("div",{className:"upload-sub-prescription-left-div",children:[e.jsxs("div",{className:"upload-sub-prescription-banner-text",children:[e.jsx("p",{children:"Make sure the prescription you upload contains the following elements"}),e.jsxs("div",{className:"upload-sub-prescription-banner-img",children:[e.jsx("img",{src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/76741-1733377933757.png",alt:""}),e.jsx("img",{src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/76741-1733377963151.png",alt:""}),e.jsx("img",{src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/76741-1733377987022.png",alt:""}),e.jsx("img",{src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/76741-1733378013651.png",alt:""}),e.jsx("img",{src:" https://raphacure-public-images.s3.ap-south-1.amazonaws.com/76741-1733378041608.png",alt:""})]}),e.jsx("div",{className:"upload-sub-prescription-banner",children:e.jsx("p",{children:"Our pharmacist will dispense medications only with a valid prescription that complies with all government regulations."})})]}),e.jsx("div",{className:"vertical-line"}),e.jsxs("div",{className:"upload-prescription-image",children:[e.jsx("p",{children:"Sample Prescription"}),e.jsx("div",{className:"upload-prescription-image-div",children:e.jsx("img",{src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/76741-1733725152725.png",alt:""})})]})]}),e.jsxs("div",{className:"upload-prescription-mobile-div",children:[e.jsxs("div",{className:"upload-sub-prescription-right-div",children:[e.jsxs("label",{htmlFor:"dropzone-file",className:"upload-container",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("img",{src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/76741-1733381078387.png",alt:""}),e.jsxs("p",{className:"mb-2 text-sm text-black opactiy-80",children:[e.jsx("span",{className:"poppins-medium",children:"Click to upload"}),e.jsx("span",{className:"poppins-semibold",children:"or drag and drop"})]}),e.jsx("p",{className:"image-format",children:"JPEG, PNG and PDF formats up to 10 MB"})]}),e.jsx("input",{id:"dropzone-file",accept:"image/*",onChange:le,type:"file",className:"hidden"})]}),e.jsx("div",{className:"savedprescription-main-list-div",children:ie&&e.jsx("div",{className:"savedprescription-list button-shadow",children:e.jsxs("div",{className:"Uploaded-prescription-imgdata relative",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-baseline",children:[e.jsxs("div",{className:"d-flex align-items-baseline",children:[e.jsx(Se,{className:"me-3"}),e.jsx("p",{children:j==null?void 0:j.name})]}),e.jsx("button",{className:"btn",onClick:fe,children:e.jsx(Ie,{})})]}),e.jsx("div",{className:"progress-container",children:e.jsxs("div",{className:"progress-barwrap flex_center flexdirection_col",children:[e.jsx("div",{id:"progressBar",className:"progress-bar",children:e.jsx("div",{className:"progress-div",style:{width:`${O}%`}})}),Z&&e.jsx("div",{className:"flex flex-col items-center mb-10",children:e.jsx(Ne,{className:"progress-icons"})})]})})]})})})]}),j&&e.jsx("div",{className:"mobile-prescription-conf-div",children:e.jsxs("button",{onClick:B,children:["Get a Prescription ",e.jsx(P,{className:"ms-3"})]})})]})]})})]}),!I&&e.jsxs("div",{children:[e.jsxs("div",{className:"prescription-header",children:[e.jsx("p",{children:"Select Address"}),e.jsxs("button",{onClick:E,children:["Add Address ",e.jsx(P,{className:"ms-3"})]})]}),e.jsx("p",{children:"Deliver To"}),e.jsxs("div",{className:"row",children:[M==null?void 0:M.map((i,t)=>e.jsx("div",{className:"col-md-6 mb-4",children:e.jsxs("div",{className:"prescription-address-card-div p-3 border",style:{border:ne===t?"2px solid #7291f4":"none",cursor:"pointer"},onClick:()=>pe(t,i),children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("div",{children:e.jsx("p",{children:i==null?void 0:i.name})}),e.jsxs("div",{children:[e.jsx("button",{className:"btn me-3",children:e.jsx(Te,{})}),e.jsx("button",{className:"btn",children:e.jsx(Me,{})})]})]}),e.jsx("p",{children:i==null?void 0:i.address})]})},t)),e.jsx("div",{className:"mobile-view-prescription-add-btn",children:e.jsxs("button",{onClick:E,children:["Add Address ",e.jsx(P,{className:"ms-3"})]})})]})]}),e.jsx(ke,{show:oe,backdrop:"static",keyboard:!1,centered:!0,children:e.jsx($,{children:e.jsxs("div",{className:"text-center prescription-address-Conf-div p-3 border",children:[e.jsx("h4",{children:"Delivering to"}),e.jsx("h5",{children:a==null?void 0:a.name}),e.jsx("p",{className:"text-muted",children:a==null?void 0:a.address}),e.jsx("div",{className:"my-4",children:e.jsx("img",{src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/76741-1733736126220.png",alt:"Order Confirmation",className:"img-fluid"})}),e.jsx("h4",{children:"We've received the details, our agent will call you by --"}),e.jsx("p",{className:"text-muted",children:"Your order is under review. Please wait for a call from our pharmacist to confirm and pay."}),e.jsx("div",{className:"prescription-conf-div",children:e.jsx("button",{onClick:ue,children:"Back to Home"})})]})})}),e.jsx(Pe,{show:se,onHide:()=>{U(!1)},addUserSuccess:me,selectedAddress:a}),e.jsx(Ce,{show:ae,titleText:te,deleteText:"ok",cancelText:"",onCancel:()=>T(!1),onDelete:()=>T(!1)})]})})};export{Ze as default};
