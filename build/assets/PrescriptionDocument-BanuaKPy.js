import{j as e,b as w,r as C,aA as j,S as D,bN as A,dK as _,t as R}from"./index-CitTC1Lo.js";import{D as H,P,S as T,V as n,T as l,I as k,F as h,a as B}from"./react-pdf.browser-CC_o0fEf.js";h.register({family:"Noto Sans",src:"/fonts/NotoSans-Regular.ttf"});h.register({family:"Noto Sans Bengali",src:"/fonts/NotoSansBengali-Regular.ttf"});h.register({family:"Noto Sans Devanagari",src:"/fonts/NotoSansDevanagari-Regular.ttf"});h.register({family:"Noto Sans Gujarati",src:"/fonts/NotoSansGujarati-Regular.ttf"});h.register({family:"Noto Sans Gurmukhi",src:"/fonts/NotoSansGurmukhi-Regular.ttf"});h.register({family:"Noto Sans Kannada",src:"/fonts/NotoSansKannada-Regular.ttf"});h.register({family:"Noto Sans Malayalam",src:"/fonts/NotoSansMalayalam-Regular.ttf"});h.register({family:"Noto Sans Oriya",src:"/fonts/NotoSansOriya-Regular.ttf"});h.register({family:"Noto Sans Tamil",src:"/fonts/NotoSansTamil-Regular.ttf"});h.register({family:"Noto Sans Telugu",src:"/fonts/NotoSansTelugu-Regular.ttf"});const v={en:"Noto Sans",gu:"Noto Sans Gujarati",hi:"Noto Sans Devanagari",kn:"Noto Sans Kannada",mr:"Noto Sans Devanagari",or:"Noto Sans Oriya",pa:"Noto Sans Gurmukhi",ta:"Noto Sans Tamil",te:"Noto Sans Telugu",ml:"Noto Sans Malayalam",bn:"Noto Sans Bengali"},z=x=>v[x]||"Noto Sans",F=({data:x,language:b="en"})=>{console.log("data : ",x);const u=z(b),s=T.create({page:{padding:30,fontSize:12,fontFamily:u},headerSection:{marginBottom:20,flexDirection:"row",justifyContent:"space-between"},header:{fontSize:16,fontWeight:"bold"},logo:{width:"100px",height:"50px"},doctorUserDetails:{flexDirection:"row",justifyContent:"space-between",marginBottom:20,gap:"1rem"},doctorDetails:{textAlign:"left",padding:10,fontSize:12,flex:1},userDetails:{padding:10,fontSize:12,flex:1,textAlign:"right"},summarySection:{flexDirection:"column",marginBottom:20},summaryItem:{border:"1px solid #ddd",backgroundColor:"#f2f2f2",padding:10,marginBottom:10,width:"100%"},tableContainer:{marginBottom:20},tableHeaderRow:{flexDirection:"row",backgroundColor:"#f2f2f2",fontWeight:"bold"},tableHeaderCell:{padding:5,flex:1,textAlign:"center"},tableRow:{flexDirection:"row",borderBottom:"1px solid #ddd",fontSize:10},tableCell:{padding:5,flex:1,textAlign:"center"},signature:{marginTop:20,fontSize:12},footer:{marginTop:20,paddingTop:10,fontSize:10,textAlign:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",gap:"1rem",borderTop:"1px dotted #000"},footerLeft:{textAlign:"left"},footerRight:{textAlign:"right",maxWidth:"40%"}}),{doctor:c,user:g,id:f,collection_1_date:S,attachments:y}=x,a=(y==null?void 0:y.length)>0?y[0]:{},p=(a==null?void 0:a.prescriptions_medicines)||[],N=(a==null?void 0:a.prescriptions_tests)||[],o=p.filter(t=>{var r;return((r=t==null?void 0:t.medicine)==null?void 0:r.category_key)==="branded"}),d=p.filter(t=>{var r;return((r=t==null?void 0:t.medicine)==null?void 0:r.category_key)==="generic"});return e.jsx(H,{children:e.jsxs(P,{style:s.page,children:[e.jsxs(n,{style:s.headerSection,children:[e.jsx(l,{style:s.header,children:"Prescription"}),e.jsx(k,{style:s.logo,src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/76907-1733836287302.png"})]}),e.jsxs(n,{style:s.doctorUserDetails,children:[e.jsxs(n,{style:s.doctorDetails,children:[e.jsxs(l,{children:["Doctor: ",(c==null?void 0:c.name)||"N/A"]}),e.jsxs(l,{children:["Specialization: ",(c==null?void 0:c.specialization)||"N/A"]}),e.jsxs(l,{children:["Registration Number: ",(c==null?void 0:c.registration_number)||"N/A"]})]}),e.jsxs(n,{style:s.userDetails,children:[e.jsxs(l,{children:["Patient: ",g==null?void 0:g.first_name," ",g==null?void 0:g.last_name]}),e.jsxs(l,{children:["Gender: ",(g==null?void 0:g.gender)||"N/A"]}),e.jsxs(l,{children:["Age: ",(g==null?void 0:g.age)||"N/A"]})]})]}),e.jsxs(n,{style:s.summarySection,children:[e.jsxs(n,{style:s.summaryItem,children:[e.jsxs(l,{children:["Booking No: ",f||"N/A"]}),e.jsxs(l,{children:["Prescription Date: ",S||"N/A"]}),e.jsxs(l,{children:["Next Visit Date:"," ",a!=null&&a.next_visit?new Date(a==null?void 0:a.next_visit).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"]})]}),e.jsxs(n,{style:s.summaryItem,children:[e.jsxs(l,{children:["Symptoms: ",(a==null?void 0:a.symptoms)||"N/A"]}),e.jsxs(l,{children:["Advice: ",(a==null?void 0:a.note)||"N/A"]})]})]}),o.length>0&&e.jsxs(n,{style:s.tableContainer,children:[e.jsx(l,{children:"Branded Medicines"}),e.jsxs(n,{style:s.tableHeaderRow,children:[e.jsx(l,{style:s.tableHeaderCell,children:"Sl No"}),e.jsx(l,{style:s.tableHeaderCell,children:"Name"}),e.jsx(l,{style:s.tableHeaderCell,children:"Frequency"}),e.jsx(l,{style:s.tableHeaderCell,children:"Days"}),e.jsx(l,{style:s.tableHeaderCell,children:"Intake"})]}),o.map((t,r)=>{var i;return e.jsxs(n,{style:s.tableRow,children:[e.jsx(l,{style:s.tableCell,children:r+1}),e.jsx(l,{style:s.tableCell,children:((i=t==null?void 0:t.medicine)==null?void 0:i.service_name)||"N/A"}),e.jsx(l,{style:s.tableCell,children:(t==null?void 0:t.frequency)||"N/A"}),e.jsx(l,{style:s.tableCell,children:(t==null?void 0:t.no_of_days)||"N/A"}),e.jsx(l,{style:s.tableCell,children:(t==null?void 0:t.intake)||"N/A"})]},r)})]}),d.length>0&&e.jsxs(n,{style:s.tableContainer,children:[e.jsx(l,{children:"Generic Medicines"}),e.jsxs(n,{style:s.tableHeaderRow,children:[e.jsx(l,{style:s.tableHeaderCell,children:"Sl No"}),e.jsx(l,{style:s.tableHeaderCell,children:"Name"}),e.jsx(l,{style:s.tableHeaderCell,children:"Frequency"}),e.jsx(l,{style:s.tableHeaderCell,children:"Days"}),e.jsx(l,{style:s.tableHeaderCell,children:"Intake"})]}),d.map((t,r)=>{var i;return e.jsxs(n,{style:s.tableRow,children:[e.jsx(l,{style:s.tableCell,children:r+1}),e.jsx(l,{style:s.tableCell,children:((i=t==null?void 0:t.medicine)==null?void 0:i.service_name)||"N/A"}),e.jsx(l,{style:s.tableCell,children:(t==null?void 0:t.frequency)||"N/A"}),e.jsx(l,{style:s.tableCell,children:(t==null?void 0:t.no_of_days)||"N/A"}),e.jsx(l,{style:s.tableCell,children:(t==null?void 0:t.intake)||"N/A"})]},r)})]}),N.length>0&&e.jsxs(n,{style:s.tableContainer,children:[e.jsx(l,{children:"Tests Recommended"}),e.jsxs(n,{style:s.tableHeaderRow,children:[e.jsx(l,{style:s.tableHeaderCell,children:"Sl No"}),e.jsx(l,{style:s.tableHeaderCell,children:"Name"})]}),N.map((t,r)=>{var i;return e.jsxs(n,{style:s.tableRow,children:[e.jsx(l,{style:s.tableCell,children:r+1}),e.jsx(l,{style:s.tableCell,children:((i=t==null?void 0:t.test)==null?void 0:i.service_name)||"N/A"})]},r)})]}),e.jsxs(l,{style:s.signature,children:["Doctor's Signature:"," ",e.jsxs(l,{style:[s.signature,{textDecoration:"underline"}],children:["___",(c==null?void 0:c.name)||"","___"]})]}),e.jsxs(n,{style:s.footer,children:[e.jsxs(n,{style:s.footerLeft,children:[e.jsx(l,{children:"Email: wellness@raphacure.com"}),e.jsx(l,{children:"Phone: +91 95551 66000"})]}),e.jsx(n,{style:s.footerRight,children:e.jsx(l,{children:"Cure & Care Primary Care Pvt. Ltd. 208, MJ Aldilla, Begur Road, Bengaluru- 560068"})})]})]})})},G=({data:x,showPreviewModal:b,setShowPreviewModal:u})=>{const s=w(),[c,g]=C.useState(null),[f,S]=C.useState("en"),y=[{value:"en",label:"English"},{value:"hi",label:"Hindi"}];C.useEffect(()=>{(async()=>{const o=await p(x,f);g(o)})()},[x,f]);const a=async(o,d)=>{var t;try{const r=await s(_({query:o,targetLang:d}));return(t=r==null?void 0:r.payload)==null?void 0:t.translatedText}catch(r){return console.error(`Error translating text "${o}" to language "${d}":`,r),o}},p=async(o,d)=>{var r;const t={...o};if(console.log("translatedData : ",t),(r=t==null?void 0:t.doctor)!=null&&r.specialization&&(t.doctor.specialization=await a(t.doctor.specialization,d)),t.attachments){for(let i of t.attachments)if(i.symptoms&&(i.symptoms=await a(i.symptoms,d)),i.note&&(i.note=await a(i.note,d)),i.prescriptions_medicines)for(let m of i.prescriptions_medicines)m.intake&&(m.intake=await a(m.intake,d))}return t},N=async o=>{var d;S(o),R.info(`Language changed to ${(d=y.find(t=>t.value===o))==null?void 0:d.label}`)};return e.jsxs(j,{show:b,onHide:()=>u(!1),size:"lg",children:[e.jsx(j.Header,{closeButton:!0,children:e.jsx(j.Title,{children:"Prescription"})}),e.jsx(j.Body,{children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsx(D,{showSearch:!0,placeholder:"Choose Language",value:f,onChange:N,style:{width:"100%"},options:y,optionFilterProp:"label",getPopupContainer:o=>o.parentNode,filterOption:(o,d)=>d.label.toLowerCase().includes(o.toLowerCase())})}),e.jsx(B,{style:{width:"100%",height:"500px"},children:e.jsx(F,{data:c})})]}):e.jsx("p",{children:"Loading Prescription..."})}),e.jsx(j.Footer,{children:e.jsx(A,{onClick:()=>u(!1),children:"Close"})})]})};export{G as P};
