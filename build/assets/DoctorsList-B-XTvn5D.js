import{q as Bs,b as Vs,u as Ys,k as Ks,r as c,a as K,aJ as qs,j as e,aK as Js,l as Qs,ae as Xs,a7 as Zs,aL as ms,aM as se,aN as ee,aO as ae,c as ne,af as oe}from"./index-CitTC1Lo.js";import{D as ce}from"./Doctors.styled-DIdXSFiy.js";import{D as le,a as te}from"./DoctorCardModule-v9aE36MV.js";import{C as de}from"./ContentLoaderSection-BJbbcI5C.js";import{v as re,c as ie}from"./clinic-Cr6QJt7w.js";import"./react-content-loader.es-eXIN9kWh.js";const he="https://raphacure-public-images.s3.ap-south-1.amazonaws.com/105748-1737787650549.png",ge="https://raphacure-public-images.s3.ap-south-1.amazonaws.com/105748-1737787679017.png",Me=v=>{var ds,rs,is,hs,gs,us;Bs().state;let{vendorId:k}=(ds=v==null?void 0:v.match)==null?void 0:ds.params;console.log("vendorId",k);let q=(is=(rs=v==null?void 0:v.match)==null?void 0:rs.params)==null?void 0:is.id;const T=window.location.pathname,P=Vs(),I=Ys(),{id:fe}=Ks(),E=25,[x,J]=c.useState(1),[t,Q]=c.useState(q?[Number(q)]:[]),[S,M]=c.useState([]),[f,F]=c.useState([]),[N,bs]=c.useState(["approved"]),[h,D]=c.useState([]),[_,X]=c.useState([]),[A,C]=c.useState(!1),[j,$]=c.useState(""),[L,R]=c.useState(0),[H,O]=c.useState(""),[ks,Z]=c.useState(!1),[pe,Ms]=c.useState({}),[G,w]=c.useState(!1),[xe,je]=c.useState(!1),{allNearByHospitalList:r,allDoctorsFiltersData:i}=K(s=>s.doctor),{selectedCurrentAddress:u}=K(s=>s.profile),{user:U}=K(s=>s.auth),[d,z]=c.useState([]),[B,Ds]=c.useState(0),[m,ye]=c.useState({}),[ss,es]=c.useState(!0),[Ts,as]=c.useState(!1),[g,Ps]=c.useState(T!=null&&T.includes("nearbyhospitals")?"clinic":"online"),[Is,Es]=c.useState(!1),[Fs,ve]=c.useState(""),_s=c.useRef(null);c.useRef(null);const As=[{title:"Doctor",link:"/doctor"},{title:g==="clinic"?"Nearby Hospital":"Virtual Consultation"}];console.log("allDoctorsFiltersData",i),console.log("filtersDevHeight",Fs),c.useEffect(()=>{k&&es(!0)},[k]),c.useEffect(()=>{console.log("selectedServiceType : ",g)},[g]);const zs=async s=>{Y(),$(s),z([])},Ws=async s=>{var l,a,p,y,b,fs,ps,xs,js,ys,vs,Ss,Ns,Cs,ws;let o={};j&&(o.searchText=j),t&&(o.category_ids=t),S&&(o.languages=S),f&&(o.gender=f),N&&(o.status=N),h.length>0&&(o.type=h),A&&(o.availableIn90=A),L&&(o.minVirtualConsultationCost=L),H&&(o.maxVirtualConsultationCost=H),o.count=E,o.page=x,w(!0);const n=await P(ee({id:s==="clinic"?k:null,body:{filters:{...o,availabilities:!0,type:["virtual"]}}}));w(!1),console.log("res?.payload?.data",(l=n==null?void 0:n.payload)==null?void 0:l.data),(y=(p=(a=n==null?void 0:n.payload)==null?void 0:a.data)==null?void 0:p.vendor)!=null&&y.id&&Ms((fs=(b=n==null?void 0:n.payload)==null?void 0:b.data)==null?void 0:fs.vendor),(ps=n==null?void 0:n.payload)!=null&&ps.success&&Array.isArray((js=(xs=n==null?void 0:n.payload)==null?void 0:xs.data)==null?void 0:js.doctors)&&(z(Ts?[...d,...(vs=(ys=n==null?void 0:n.payload)==null?void 0:ys.data)==null?void 0:vs.doctors]:[...(Ns=(Ss=n==null?void 0:n.payload)==null?void 0:Ss.data)==null?void 0:Ns.doctors]),Ds(parseInt(((ws=(Cs=n==null?void 0:n.payload)==null?void 0:Cs.data)==null?void 0:ws.totalCount)||0)),as(!1))};c.useEffect(()=>{Ws(g)},[t,S,f,N,h,_,A,x,k,L,H]);const ns=()=>{J(s=>s+1),as(!0)};c.useEffect(()=>{console.log("Current page:",x)},[x]),c.useEffect(()=>{(T.includes("nearbyhospitals")||g==="clinic")&&os(),es(!1)},[u,j,x,t]),console.log("selectedCurrentAddress",u);const os=async()=>{w(!0);const s={searchText:j,section_name:"doctor",count:E,page:x,category_ids:t};u!=null&&u.latitude&&(u!=null&&u.longitude)&&(s.latitude=u.latitude,s.longitude=u.longitude,s.distanceWithin=3e5),await P(qs(s)),w(!1)},cs=async s=>{await Y(),await Ps(s),s==="clinic"?(D(["opd"]),os()):D(["virtual"])},W=async(s,o)=>{w(!0),await P(ae({filters:{...s,status:["approved"],filtersNeeded:o,type:g==="online"?["virtual"]:["opd"],availabilities:!0}})),w(!1),setTimeout(()=>{Es(!Is)},100)};c.useEffect(()=>{const s={};j&&(s.searchText=j),W(s,["languages","category_ids","gender","type"])},[j,g]),c.useEffect(()=>{const s={};t&&(s.category_ids=t),W(s,["languages","gender","type"])},[t]),c.useEffect(()=>{const s={};h.length>0&&(s.type=h),t&&(s.category_ids=t),W(s,["languages","gender"])},[h]),c.useEffect(()=>{const s={};h.length>0&&(s.type=h),f&&(s.gender=f),t&&(s.category_ids=t),W(s,["languages"])},[f]);const $s=(s,o)=>{U!=null&&U.id?I.push(`/doctor/doctordetails/${s==null?void 0:s.id}`):P(ne(!0))},V=s=>{console.log("item",s);const o=(t==null?void 0:t.length)>0?`/${t==null?void 0:t.join(",")}`:"";I.push(`/doctor/clinicDetails/${s==null?void 0:s.id}${o}`)},Ls=(s,o,n)=>{const l=(a,p)=>a.includes(p)?a.filter(b=>b!=p):[...a,p];J(1),z([]),s==="Specialization"?(Q(a=>l(a,n==null?void 0:n.id)),F([]),M([]),D([]),C(!1)):s==="Type"?(D(a=>l(a,o)),F([]),M([]),C(!1)):s==="Gender"?(F(a=>l(a,o)),M([]),C(!1)):s==="Languages"?(M(a=>l(a,o)),C(!1)):s==="Status"?bs(a=>l(a,o)):s==="Week Off Days"?X(a=>l(a,o)):s==="Available by 90"&&C(a=>!a)},Rs=({rating:s})=>e.jsx(te,{children:e.jsxs("div",{className:"bannerWrapper",children:[e.jsxs("div",{className:"rectangle",children:[e.jsx(oe,{fill:"#252B61",className:"me-2 "})," ",Math.round(s)]}),e.jsx("div",{className:"triangle"})]})}),Y=s=>{Q([]),M([]),F([]),D([]),X([]),s||$(""),C(!1),R(0),O("")},Hs=s=>{R((s==null?void 0:s[0])??0),O(s==null?void 0:s[1])},Os=s=>{R((s==null?void 0:s[0])??0),O(s==null?void 0:s[1])},Gs=(s,o,n)=>s==="Specialization"?!!(t!=null&&t.find(l=>l==(n==null?void 0:n.id))):s==="Languages"?S==null?void 0:S.find(l=>l==o):s==="Gender"?f==null?void 0:f.find(l=>l==o):s==="Status"?N==null?void 0:N.find(l=>l==o):s==="Type"?h==null?void 0:h.find(l=>l==o):s==="Week Off Days"?_==null?void 0:_.find(l=>l==o):s==="Available by 90"?A:!1,Us=()=>{I.push("/chat")},ls=s=>{I.push(`/doctor/doctordetails/${s==null?void 0:s.id}`)},ts={...m,Type:i==null?void 0:i.type,Gender:i==null?void 0:i.gender,Specialization:i==null?void 0:i.category_ids,Languages:i==null?void 0:i.languages};return console.log("allDoctorFilter",m),console.log("allDoctorsFiltersData",i),console.log("filtersdata1",ts),console.log("doctorsListData",d),console.log("doctorsListData",ss),e.jsxs(ce,{filtersHeight:"1350px",children:[e.jsx(Js,{sectionName:"doctor",show:ks,onHide:()=>{Z(!1)}}),e.jsx("div",{className:"BreadCrumbModule",children:e.jsx(Qs,{list:As})}),e.jsxs("div",{className:"doctor-list-main-div",children:[e.jsx("div",{className:"side-filter-p-div",ref:_s,children:e.jsx(Xs,{origin:"doctor",doctorFilter:ts,doctorFiltersMethod:Ls,handleClearAll:Y,filterPriceRange:Hs,selectedCheckBox:Gs,consultType:h,handleInputChange:Os,specialization:t,pathName:"/doctor",selectedServiceType:g})}),e.jsxs("div",{className:"doctor-list-p-div",children:[e.jsxs("div",{className:"toggle-container",children:[e.jsxs("span",{className:`toggle-label ${g==="online"?"active":""}`,onClick:()=>cs("online"),children:[e.jsx("img",{src:re}),"Online Consultation"]}),e.jsxs("span",{className:`toggle-label ${g==="clinic"?"active":""}`,onClick:()=>cs("clinic"),children:[e.jsx("img",{src:ie}),"Clinic Consult"]})]}),e.jsx("div",{className:"search-by-text",children:e.jsx(Zs,{details:g==="clinic"?ms:se,handleonFilterName:zs,setSearchText:$,searchText:j})}),G&&e.jsx(de,{fromPage:"doctorsList"}),g==="online"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"page-count-div",children:e.jsxs("p",{children:["Showing ",d==null?void 0:d.length," Doctors"," ",B>0?`of ${B} doctors`:""," "]})}),e.jsx("div",{className:"allDocList",children:(d==null?void 0:d.length)>0&&(d==null?void 0:d.map((s,o)=>e.jsx(le,{appointment:{id:s==null?void 0:s.id,name:s==null?void 0:s.name,department:s==null?void 0:s.specialization,experience:s==null?void 0:s.work_experience_years,languages:s==null?void 0:s.languages,education:s==null?void 0:s.highest_education,inClinicFee:s==null?void 0:s.name,videoConsultFee:s==null?void 0:s.minutes_before_virtual,gender:s==null?void 0:s.gender,consultantType:s==null?void 0:s.name,specialization:s==null?void 0:s.specialization,slots:s==null?void 0:s.name,rating:s==null?void 0:s.rating,image:s==null?void 0:s.image,availableIn90:s==null?void 0:s.availableIn90,doctoreType:s==null?void 0:s.type},DoctorBookingReviewProp:$s,DoctorChatProp:Us,DoctorBookConsultProp:ls},o)))}),!G&&(d==null?void 0:d.length)>0&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"d-flex mt-4",children:B<=x*E?e.jsx(e.Fragment,{}):e.jsx("button",{className:"loadMoreBtn",onClick:ns,children:"Load More"})})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"page-count-div",children:e.jsxs("p",{children:["Showing ",(hs=r==null?void 0:r.vendors)==null?void 0:hs.length," Hospitals of"," ",r==null?void 0:r.total]})}),e.jsx(e.Fragment,{children:(gs=r==null?void 0:r.vendors)==null?void 0:gs.map(s=>{var o,n,l;return e.jsx("div",{className:"opd-detail-card",children:e.jsxs("div",{className:"appointment-card",children:[e.jsxs("div",{className:"left-middle left-middle-mobile-view",children:[e.jsxs("div",{onClick:()=>V(s),className:"opd-card-left",children:[e.jsx(Rs,{rating:s==null?void 0:s.rating}),e.jsx("img",{src:s==null?void 0:s.image,alt:s==null?void 0:s.name})]}),e.jsx("div",{className:"opd-card-right",children:e.jsx("div",{onClick:()=>V(s),className:"d-flex justify-content-between align-items-center",children:e.jsxs("div",{children:[e.jsx("p",{className:"doctor-title",children:s==null?void 0:s.name}),(s==null?void 0:s.doc)&&e.jsxs("p",{className:"specelization-text",children:[e.jsx("img",{src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/105748-1737007939872.png",alt:"",className:"me-2"}),s==null?void 0:s.doc]}),e.jsxs("p",{className:"location-text",children:[e.jsx("img",{src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/105748-1737008143639.png",alt:"",className:"me-2"}),(s==null?void 0:s.distance_km)&&e.jsxs(e.Fragment,{children:[Math.round(s==null?void 0:s.distance_km)," Km away,"]}),"Â ",e.jsx("span",{children:s==null?void 0:s.address})]})]})})})]}),e.jsxs("div",{className:"doctors-list-all-sec-all-full",children:[e.jsx("div",{className:"doctors-list-all-sec-all",children:(n=(o=s==null?void 0:s.doctors)==null?void 0:o.slice(0,2))==null?void 0:n.map(a=>{var p;return e.jsxs("div",{onClick:()=>{ls(a)},children:[e.jsx("div",{children:e.jsx("img",{src:a==null?void 0:a.image})}),e.jsxs("div",{children:[e.jsx("p",{className:"d-name-sec",children:a==null?void 0:a.name}),e.jsx("p",{children:(p=a==null?void 0:a.specialization)==null?void 0:p.map((y,b)=>e.jsxs(e.Fragment,{children:[b!==0?" | ":"",y==null?void 0:y.name]}))}),e.jsx("p",{className:"doctor-lang-name",children:a==null?void 0:a.languages}),e.jsxs("p",{children:[a==null?void 0:a.work_experience_years," Years Exp."]}),e.jsx("p",{className:"d-book-now-sec",children:e.jsx("button",{children:"Book Now"})})]})]})})}),((l=s==null?void 0:s.doctors)==null?void 0:l.length)>2&&e.jsx("div",{className:"view-all-docts-sec",children:e.jsx("button",{onClick:()=>V(s),children:"View All Doctors"})})]})]})})})}),!G&&((d==null?void 0:d.length)>5&&ss||((us=r==null?void 0:r.vendors)==null?void 0:us.length)>5)&&e.jsx("div",{className:"d-flex mt-4",children:(r==null?void 0:r.total)<x*E?e.jsx(e.Fragment,{}):e.jsx("button",{className:"loadMoreBtn",onClick:ns,children:"Load More"})})]})]}),e.jsxs("div",{className:"suggution-doctor-list-p-div",children:[e.jsx("div",{className:"my-preference-div",children:e.jsx("button",{className:"btn ",onClick:()=>{Z(!0)},children:"My Preference"})}),e.jsxs("div",{className:"suggution-doctor-list-div",children:[e.jsx("div",{className:"add-cards",children:e.jsxs("div",{className:"add-cards-title",children:[e.jsxs("div",{children:[e.jsx("p",{children:"Your Personalized Period Guide"}),e.jsx("button",{className:"btn",children:"Start Now"})]}),e.jsx("img",{src:he,alt:""})]})}),e.jsx("div",{className:"add-cards1",children:e.jsxs("div",{className:"add-cards-title1",children:[e.jsxs("div",{children:[e.jsx("p",{children:"Your Health, One Tap Away Download the Raphacure App Today!"}),e.jsx("button",{className:"btn",children:"Download"})]}),e.jsx("img",{src:ge,alt:""})]})})]})]})]})]})};export{Me as default};
