import{r as a,A as Me,u as _e,b as we,a as M,bb as Te,bc as Fe,h as Le,bd as ke,be as X,j as t,P as De,w as Ee,bf as ze,S as He,x as Oe,y as Ge,Z as Re,Y as Ve,c as We,_ as Je,$ as Ue,a0 as Ye}from"./index-BHf3qlKB.js";import{S as Ze}from"./SideFilterModule-0zbG3kwK.js";import{B as ee}from"./BreadCrumbModule-Dnxv8Nw8.js";import"./index-D3gR5QY_.js";import"./index-CE3dYLmv.js";const os=_=>{var q,K,Q;let{sectionName:c}=(q=_==null?void 0:_.match)==null?void 0:q.params;c=c==="all"?"":c;const[z,$e]=a.useState([]),w=Me(),x=w==null?void 0:w.state,se=x==null?void 0:x.name,[l,te]=a.useState([]),H=[{title:"Pharmacy",link:"/pharmacy"},{title:se||c}],ae=[{name:"Branded",id:"branded",link:"/pharmacy"},{name:"Generic",id:"generic",link:"/pharmacy"},{name:"Wellness",id:"wellness",link:"/pharmacy"}],[qe,ne]=a.useState([]),[O,Ke]=a.useState(1),[G]=a.useState(10),y=12,[P,ce]=a.useState(1),[N,R]=a.useState(""),[T,F]=a.useState(""),[A,b]=a.useState(0),[L,I]=a.useState(""),[f,v]=a.useState(""),[p,B]=a.useState(""),[r,V]=a.useState(c?[Number(c)]:[]),[S,u]=a.useState([]),[C,W]=a.useState(""),[ie,Qe]=a.useState(1),[Xe,es]=a.useState(10),[oe,re]=a.useState(1);_e();const o=we(),[de,J]=a.useState(!1),{cartItems:k}=M(e=>e.checkout),{user:h}=M(e=>e.auth),m=((K=k==null?void 0:k.carts)==null?void 0:K.find(e=>(e==null?void 0:e.section_key)==="pharmacy"))||[],{allCategoriesList:le,allMedicinesList:D,MedicinesCount:U,allSubCategoriesList:ue,allSaltCategoryList:E,allBrandsList:he,allCompareMedicineList:j}=M(e=>e.labtest),g=a.useMemo(()=>Array.isArray(j)?j==null?void 0:j.map(e=>e==null?void 0:e.medicines):[],[j]),{selectedFilterType:ss}=M(e=>e.generic),me=e=>{const s=[...l];if(s!=null&&s.includes(e)){const n=s.findIndex(i=>i===e);s.splice(n,1)}else s.push(e);te(s)};a.useEffect(()=>{c==="allProductsBySalt"&&Y()},[l,ie,y]);const Y=async()=>{const e=oe+8;re(e),J(!0),await o(Te({status:"active",categoryIds:l,page:1,count:e})),J(!1)};a.useEffect(()=>{ge(O)},[O,z]);const ge=e=>{const s=(e-1)*G,n=s+G;ne(z.slice(s,n))},Z=e=>{h!=null&&h.id?xe(e):o(We(!0))},xe=async e=>{const s=[{service_code:e==null?void 0:e.service_code,count:1}],n={carts:[{user_id:h==null?void 0:h.id,useWallet:!0,collection_1_date:null,collection_1_slot:null,medicines:s,attachment_ids:Je("pharmacy"),section_key:"pharmacy"}]};await o(Ue(n)),await o(Ye())},ye=()=>{ce(e=>e+1)},fe=async e=>{F(e)},pe=e=>{F(e)},Se=async e=>{const s=[...r];if(s!=null&&s.includes(e)){const n=s.findIndex(i=>i===e);s.splice(n,1)}else s.push(e);V(s),o(X({filters:{categoryIds:s}})),u([]),b(0),I(""),v(""),B(""),u([])},Ce=e=>{const s=[...S];if(s!=null&&s.includes(e)){const n=s.findIndex(i=>i===e);s.splice(n,1)}else s.push(e);u(s)},je=e=>{W(C!=e?e:""),u([]),b(0),I(""),v(""),B(""),u([])},Pe=async e=>{R(e),$()},Ne=e=>{v(f!=e[0]?e[0]:""),B(p!=e[1]?e[1]:"")},Ae=e=>{b((e==null?void 0:e[0])??0),I(e==null?void 0:e[1])},$=()=>{F(""),b(0),I(""),v(""),B(""),V([]),u([]),W("")},be=async()=>{let e={};N&&(e.searchText=N),T&&(e.sortBy=T),r&&(e.categoryIds=r),S&&(e.brands=S),(A===0||A)&&(e.minPrice=A),L&&(e.maxPrice=L),f&&(e.minDiscount=f),p&&(e.maxDiscount=p),C&&(e.medicineType=C),e.count=y,e.page=P,await o(Ve(e))};return a.useEffect(()=>{c!=="allProductsBySalt"&&be()},[P,y,JSON.stringify(r),N,T,L,A,p,f,S,C]),a.useEffect(()=>{const e={categorieId:""};c==="allProductsBySalt"?o(Fe(e)):(o(Le({sectionName:"pharmacy"})),o(ke(e)))},[]),a.useEffect(()=>{o(X({filters:{categoryIds:r}}))},[r]),t.jsxs(De,{children:[de&&t.jsx(Ee,{}),c==="allProductsBySalt"?t.jsxs("div",{className:"allProductsBySalt-div",children:[t.jsxs("div",{children:[t.jsxs("div",{className:" comparison-carousel-div",children:[t.jsx(ee,{moduleName:"pharmacy",medicines:c,SelectedCategory:x,list:H}),t.jsx("p",{className:" comparison-carousel-title",children:"Compare Generic & Branded"}),t.jsx("div",{className:" comparison-carousel-filter-btn",children:(Q=E==null?void 0:E.category_ids)==null?void 0:Q.map((e,s)=>{if(!(e!=null&&e.name))return null;const n=l.includes(e.id);return t.jsx("button",{onClick:()=>me(e.id),className:n?"active btn":"btn",style:{backgroundColor:l.includes(e.id)?"#252b61":"white",color:l.includes(e.id)?"white":"black"},children:e==null?void 0:e.name},s)})})]}),(g==null?void 0:g.length)>0?t.jsx("div",{children:t.jsx("div",{className:"all-compare-medicines-list",children:g==null?void 0:g.map((e,s)=>{const i=(e==null?void 0:e.length)-1,d=[...e];d.sort((ve,Be)=>ve.discounted_price-Be.discounted_price);const Ie=m==null?void 0:m.medicines;return t.jsx(ze,{generic:d==null?void 0:d[0],addToCart:Z,isAddedtoCart:Ie,branded:d==null?void 0:d[i]},s)})})}):t.jsx(t.Fragment,{children:t.jsx("div",{className:"no-comparision-found-sec",children:t.jsx("h5",{children:"No Comparision found"})})})]}),t.jsx("div",{className:"pagination-box-sec-pha mb-3",children:t.jsx("button",{onClick:Y,className:"load-more-btn",children:"Load More"})})]}):t.jsxs("div",{className:"all-pharmacy-page-div",children:[t.jsx("div",{className:"filter-module-div",children:t.jsx(Ze,{allCategoriesList:le,allBrandsList:he,allSubCategoriesList:ue,handleChangeCategoryFilter:Se,handleonFilterDiscount:Ne,filterPriceRange:Ae,handleClearAll:$,categoryFilter:r,brandFilter:S,minDiscount:f,maxDiscount:p,allTypeList:ae,typeFilter:C,handleChangeBrandFilter:Ce,handleChangeTypeFilter:je,setSelectedSortOption:pe,origin:"pharmacy"})}),t.jsxs("div",{className:"right-card-module-div",children:[t.jsx(ee,{moduleName:"pharmacy",medicines:c,SelectedCategory:x,list:H}),t.jsxs("div",{className:"parent-search-fild-div",children:[t.jsx("div",{className:"parent-search-left-div",children:t.jsx(He,{details:Oe,handleonFilterName:Pe,setSearchText:R,searchText:N})}),t.jsx("div",{className:"selector-filter-sub-module-div",children:t.jsx(Ge,{showSearch:!0,placeholder:"Sort By",filterOption:(e,s)=>((s==null?void 0:s.label)??"").toLowerCase().includes(e.toLowerCase()),defaultValue:"discount",onChange:fe,options:[{value:"discount",label:"Discount"},{value:"desc",label:"Price: High to Low"},{value:"asc",label:"Price: Low to High"}]})})]}),t.jsx("div",{className:"page-count-div",children:t.jsxs("p",{children:["Showing 1 to ",y*P," Medicines of"," ",U," Medicines"]})}),t.jsx("div",{className:"card-module-div",children:D==null?void 0:D.map(e=>{var n;const s=(n=m==null?void 0:m.medicines)==null?void 0:n.find(i=>(i==null?void 0:i.service_code)===e.service_code);return t.jsx(Re,{medicineDetail:e,isAddedtoCart:s,addToCart:Z,type:c},e.service_code)})}),t.jsx("div",{className:"pagination-box-sec-pha",children:t.jsx("div",{className:"pagination-box-sec-pha",children:U>y*P&&t.jsx("button",{onClick:ye,className:"load-more-btn",children:"Load More"})})})]})]})]})};export{os as default};
