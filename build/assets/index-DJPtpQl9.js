import{d as Ko,r as x,b as Zo,j as o,y as tn,bg as kn,bh as wn,bi as Nn,t as Ro,bj as Sn,E as Co,w as Cn,bk as Ho,a3 as Go,bl as Pn,O as Dn,u as An,a as zo,bm as Fn,a0 as Jo,bn as Tn,bo as En,K as Gs,bp as zn,bq as Mo,br as Mn,bs as Rn,_ as Yo,bt as Un,bu as Vo,bv as Ln,bw as Bn}from"./index-DDOdRoFT.js";import{C as $n,g as qo}from"./CartItemsSection-uBS1BfbK.js";import{P as Wn}from"./Ellipse1-DDKjwPXw.js";import{O as Hn}from"./OrderConformation-DO-y1uaX.js";import{R as Gn}from"./Row-DQAx0QJL.js";const Jn=Ko.div`
  width: 100%;
  padding-top: 24px;
  background: #f6f9fd;
  .cart-full-page {
    width: 90%;
    margin: auto;
  }
  .cart-page-content {
    display: flex;
    gap: 1.5rem;
  }
  .wallet_checbox_box {
    height: 20px;
    width: 20px;
    cursor: pointer;
  }
  .checkout-final-amount-sec-ambulance {
    margin-top: 15px;
  }
  .no-results-sec {
    text-align: center;
    padding-top: 100px;
    min-height: 600px;
  }
  .cart-content-left {
    border-radius: 10px;
    width: 60%;
    // box-shadow: 2px 2px 19px 0px rgba(0, 0, 0, 0.1);
    // background: #fff;
    // padding: 20px;
  }

  .cart-content-right {
    margin-top: 2rem;
    border-radius: 10px;
    background: #fff;
    box-shadow: 2px 2px 19px 0px rgba(0, 0, 0, 0.1);
    width: 40%;
    padding: 20px;
  }
  .checkout-item-box {
  }
  .checkout-item-box-main {
    // border: 1px solid #e2e2e2;
    padding: 16px;
    // border-radius: 4px;
    background: #fff;
    box-shadow: 2px 2px 19px 0px rgba(0, 0, 0, 0.1);
    padding: 20px;
    margin-bottom: 24px;
    > div:not(:last-child) {
      border-bottom: 1px solid #e2e2e2;
      margin-bottom: 15px;
      padding-bottom: 15px;
    }
  }

  .cart-top-back {
    margin-bottom: 24px;
  }
  .cart-address-top {
    display: flex;
    gap: 14px;
    justify-content: space-between;
  }
  .your-cart-sec {
    color: #000;
    font-size: 18px;
    font-style: normal;
    font-weight: 500;
    line-height: normal;
    opacity: 0.6;
  }
  .checkout-items-all {
    margin-bottom: 24px;
  }
  .checkout-item-box-header {
    display: flex;
    justify-content: space-between;
    p {
      margin-bottom: 10px;
    }
    .item-box-left {
      // #8d8d8d;
      color: #000;
      font-size: 16px;
      font-style: normal;
      font-weight: 500;
      line-height: normal;
    }
    .item-box-right span {
      color: #000;
      font-size: 12px;
      font-style: normal;
      font-weight: 400;
      line-height: 20px; /* 166.667% */
      letter-spacing: 0.3px;
      text-decoration-line: underline;
      opacity: 0.5;
      cursor: pointer;
    }
  }
  .remove-sec-cont1 {
    color: #000;
    font-size: 12px;
    font-style: normal;
    font-weight: 400;
    line-height: 20px; /* 166.667% */
    letter-spacing: 0.3px;
    text-decoration-line: underline;
    opacity: 0.5;
    cursor: pointer;
  }
  .vir-name-sec-left {
    color: #000;
    font-size: 16px;
    font-style: normal;
    font-weight: 500;
    line-height: 20px;
    letter-spacing: 0.4px;
    opacity: 0.8;
  }
  .total-price-sec {
    display: flex;
    justify-content: space-between;
    border-radius: 0px 0px 5px 5px;
    border-top: 0.5px solid #8d8d8d;
    background: #fff;
    padding-top: 20px;
    padding-bottom: 20px;
    p {
      color: #000;
      font-size: 18px;
      font-style: normal;
      font-weight: 500;
      line-height: 20px; /* 111.111% */
      letter-spacing: 0.45px;
    }
  }

  .body-top-left,
  .dr-content-sec-content {
    > div:not(:last-child) {
      margin-bottom: 14px;
    }
  }
  .body-top-left-header {
    display: flex;
    justify-content: space-between;
  }

  .checkout-item-box-body {
    p {
      margin-bottom: 1px;
    }
  }
  .dr-content-sec-full {
    display: flex;
    gap: 16px;
    .dr-img img {
      height: 38px;
      width: 38px;
      border-radius: 100%;
    }
    .pat-img img {
      height: 27px;
    }
    .dr-content {
      .dr-name {
        color: #000;
        font-size: 14px;
        font-style: normal;
        font-weight: 500;
        line-height: 20px; /* 142.857% */
        letter-spacing: 0.35px;
        opacity: 0.8;
      }
      .dr-caregory {
        color: #000;
        font-size: 10px;
        font-style: normal;
        font-weight: 500;
        line-height: 20px; /* 200% */
        letter-spacing: 0.25px;
        opacity: 0.5;
        margin-bottom: 0px;
      }
    }
    .pat-name {
      color: #000;
      opacity: 0.8;
      font-size: 14px;
      font-style: normal;
      font-weight: 500;
      line-height: 20px; /* 142.857% */
      letter-spacing: 0.35px;
      padding-top: 5px;
      margin-bottom: 0px;
    }
  }
  .checkout-name-sec {
    color: #000;
    font-size: 14px;
    font-style: normal;
    opacity: 0.8;
    font-weight: 500;
    line-height: 20px; /* 166.667% */
    letter-spacing: 0.3px;
  }
  .checkout-final-amount-sec {
    color: #000;
    font-size: 16px;
    font-style: normal;
    // opacity: 0.8;
    font-weight: 600;
    line-height: 20px; /* 166.667% */
    letter-spacing: 0.3px;
  }
  .checkout-name-sec span:nth-child(1),
  .pat-img,
  .dr-img {
    width: 70px;
    display: inline-block;
  }
  .checkout-pha-items-footer {
    display: flex;
    justify-content: space-between;
    border-top: 1px solid #e2e2e2;
    padding-top: 20px;
    p {
      margin-bottom: 5px;
    }
    .d-paha-name {
      color: #000;
      font-size: 16px;
      font-style: normal;
      font-weight: 500;
      line-height: 20px; /* 125% */
      letter-spacing: 0.4px;
    }
    .d-paha-address {
      color: #000;
      font-size: 13px;
      font-style: normal;
      font-weight: 500;
      line-height: 20px; /* 200% */
      letter-spacing: 0.25px;
      opacity: 0.5;
    }
    span {
      color: #9747ff;
      font-size: 14px;
      font-style: normal;
      font-weight: 600;
      line-height: 20px; /* 166.667% */
      letter-spacing: 0.3px;
      cursor: pointer;
    }
  }
  .checkout-page-design1 {
    .dr-content-sec-content {
      margin-top: -10px;
      display: grid;
      grid-template-columns: 1fr 1fr;
    }
    .checkout-name-sec span:nth-child(1),
    .pat-img,
    .dr-img {
      width: auto;
      display: inline-block;
      margin-right: 12px;
    }
  }
  .sec-right-content-box {
    margin-bottom: 30px;
    h3 {
      color: #000;
      font-size: 16px;
      font-style: normal;
      font-weight: 500;
      line-height: normal;
      margin-bottom: 20px;
    }
  }
  .billing-details-sec {
    border-radius: 2px;
    background: #fff;
    box-shadow: 2px 2px 19px 0px rgba(0, 0, 0, 0.1);
    p {
      display: flex;
      justify-content: space-between;
      color: #000;
      font-size: 16px;
      font-style: normal;
      font-weight: 400;
      line-height: 50px;
      padding-left: 15px;
      padding-right: 20px;
      margin-bottom: 0px;
    }

    p:not(:last-child) {
      border-bottom: 1px solid #e2e2e2;
    }
  }
  .coupon-sec-checkout {
    border-radius: 2px;
    background: #fff;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 2px 2px 19px 0px rgba(0, 0, 0, 0.1);
  }
  .billing-details-sec {
    .final-pmt {
      font-weight: 600;
    }
    .final-dis-pmt {
      color: #34a853;
      font-weight: 600;
    }
    .tot-amt-pmt {
      font-weight: 500;
    }
  }
  .wallet-sec-cont {
    input {
      margin-left: 20px;
    }
  }
  .checkout-pay-buttom.checkout-btn-blue button {
    background-color: rgb(19, 100, 241);
  }
  .checkout-pay-buttom.checkout-btn-green button {
    background-color: #16c47f;
    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  }
  .checkout-pay-buttom {
    margin-bottom: 20px;
    button {
      width: 100%;
      height: 56px;
      border-radius: 2px;
      background: #9747ff;
      border: none;
      color: #fff;
      font-size: 16px;
      font-style: normal;
      font-weight: 600;
      line-height: normal;
      box-shadow: 2px 2px 19px 0px rgba(0, 0, 0, 0.1);
      cursor: pointer;
    }
  }
  @media (max-width: 768px) {
    .cart-page-content {
      flex-direction: column;
      gap: 1rem; /* Adjust the gap for mobile view */
    }

    .cart-content-left,
    .cart-content-right {
      width: 100%;
    }
    .cart-top-back {
      margin-top: 20px;
    }
  }

  .delivery-time {
    border-radius: 10px;
    background: #fff;
    box-shadow: 2px 2px 19px 0px rgba(0, 0, 0, 0.1);
    padding: 20px 30px;
    /* text-align: center; */
  }
  .delivery-time h2 {
    color: #000;
    font-size: 18px;
    font-style: normal;
    font-weight: 500;
    line-height: normal;
  }
  .delivery-time span {
    color: #188e04;
    font-size: 18px;
    font-style: normal;
    font-weight: 600;
    line-height: normal;
  }
  .delivery-time p {
    color: #000;
    font-size: 14px;
    font-style: normal;
    font-weight: 500;
    line-height: normal;
    opacity: 0.6;
    margin-bottom: 0;
  }
  .medRecords {
    background: rgba(37, 43, 97, 0.9);
    color: #fff;
  }
`,Yn=Ko.div`
  margin-top: 2rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  p {
    margin-bottom: 0;
    font-weight: bold;
  }
  .search-bar {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 0.5rem;
  }
  .issues-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .issue-tag {
    display: flex;
    align-items: center;
    padding: 4px 8px;
    border-radius: 7px;
    border: 2px solid #f9e9e9;
    color: #5a4a4a;
    font-size: 0.9em;
  }

  .issue-tag:hover {
    background-color: #f2e4e4;
  }

  .delete-icon {
    margin-left: 8px;
    cursor: pointer;
    background-image: none;
    color: #a05858;
    &:hover {
      color: #d17a7a;
    }
  }

  .searchIssues,
  .viewIssues {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .viewIssues {
    textarea {
      border: 1px solid #40a9ff;
      border-radius: 10px;
    }
  }
`,Js=({handleSelectSymptom:Po,issues:D,setIssues:ao,caption:po})=>{const[co,E]=x.useState(""),[ho,eo]=x.useState(""),[H,L]=x.useState([]),I=Zo(),z=x.useRef(null),[uo,G]=x.useState(!1);x.useEffect(()=>{const f=D.map((j,b)=>`${b+1}. ${j}`).join(`
`);eo(f)},[D]);const lo=async f=>{if(E(f),f.trim())try{const j=await I(Sn(f)),t=((j==null?void 0:j.payload)||[]).map(i=>({value:i,label:i})),oo={value:f,label:f},F=[...new Set([...t.map(i=>i.value),oo.value])].map(i=>({value:i,label:i}));L(F)}catch(j){console.error("Error fetching search suggestions:",j),L([{value:f,label:f}])}else L([])},m=f=>{if(D.includes(f)){Ro.error(`Duplicate Symptom detected: ${f}`),E("");return}Po(f),E("")},go=()=>{if(!("webkitSpeechRecognition"in window)){alert("Sorry, your browser does not support speech recognition.");return}Ro.success("Mic is enabled you can start Talking"),z.current&&z.current.abort();const f=new window.webkitSpeechRecognition;f.lang="en-US",f.interimResults=!1,f.maxAlternatives=1,z.current=f,f.start(),f.onresult=j=>{const b=j.results[0][0].transcript;console.log("speech : ",b),b&&(E(b),lo(b),G(!0))},f.onerror=j=>{Ro.error("Mic is already enabled. You can start talking.")},f.onend=()=>{z.current=null}},xo=f=>{ao(D.filter((j,b)=>b!==f))};return o.jsx(Yn,{children:o.jsxs("div",{className:"multiGglSelectWrapper",children:[o.jsxs("div",{className:"searchIssues",children:[o.jsxs("p",{children:["Enter ",po]}),o.jsxs("div",{className:"search-bar relative",children:[o.jsx(tn,{showSearch:!0,value:co,placeholder:"Search Issue",onSearch:lo,onSelect:m,options:H,style:{width:"100%"},className:"pl-8 symptomSearch",filterOption:!1,dropdownRender:f=>o.jsx("div",{className:"p-1",children:f}),open:uo,onDropdownVisibleChange:f=>G(f),getPopupContainer:f=>f.parentNode}),o.jsx(kn,{className:"cursor-pointer",onClick:go})]}),o.jsx("div",{className:"issues-list",children:D.length>0&&(D==null?void 0:D.map((f,j)=>o.jsxs("div",{className:"issue-tag",children:[f,o.jsx(wn,{className:"icon delete-icon",onClick:()=>xo(j)})]},j)))})]}),D.length>0&&o.jsxs("div",{className:"viewIssues",children:[o.jsx("p",{children:po}),o.jsx(Nn.TextArea,{value:ho,readOnly:!0,rows:3,style:{width:"100%",overflow:"scroll"}})]})]})})},Vn=Ko.div`
  .modal-footer {
    button {
      width: 300px;
    }
  }

  .multiGglSelectWrapper {
    display: flex;
    flex-direction: row;
    gap: 3rem;

    .searchIssues,
    .viewIssues {
      width: 100%;
    }
  }
`,qn=({show:Po,selectedCartItemId:D,onClose:ao,handleSavePastData:po})=>{const[co,E]=x.useState([]),[ho,eo]=x.useState(!1),[H,L]=x.useState([]),[I,z]=x.useState([]);x.useEffect(()=>{E([]),L([]),z([])},[D]);const uo=Zo(),G=j=>{j&&L(b=>[...b,j.trim()])},lo=j=>{j&&z(b=>[...b,j.trim()])},m=async j=>{var b;try{const t={id:`${Date.now()}`,ext:".png"},F=(b=(await uo(Pn(t))).payload)==null?void 0:b.signedUrL;return await Dn.put(F.signedUrL,j,{headers:{"Content-Type":"image/png"}}),F.publicUrl}catch(t){throw console.error("Error uploading image to S3:",t),t}},go=async j=>{const b=j.target.files;if((b==null?void 0:b.length)>0)try{eo(!0);const t=Array.from(b).map(F=>m(F)),oo=await Promise.all(t);E(F=>[...F,...oo])}catch{Ro.error("Error uploading images. Please try again.")}finally{eo(!1)}},xo=()=>{ao()},f=()=>{po({pastIssues:I,issues:H,imageUrls:co,id:D}),ao()};return o.jsx(Co,{show:Po,onHide:ao,size:"lg",centered:!0,children:o.jsxs(Vn,{children:[o.jsx(Co.Header,{closeButton:!0,children:o.jsx(Co.Title,{children:"Additional Illnesses"})}),o.jsxs(Co.Body,{children:[ho&&o.jsx(Cn,{}),o.jsx(Js,{handleSelectSymptom:lo,issues:I,setIssues:z,caption:"Past Medical Issues"}),o.jsx(Js,{handleSelectSymptom:G,issues:H,setIssues:L,caption:"Present Symptoms"}),o.jsx(Gn,{className:"my-3",children:o.jsxs("div",{className:"d-flex flex-col imagesPreview justify-content-between",children:[o.jsxs(Ho.Group,{controlId:"media",children:[o.jsx(Ho.Label,{className:"note-label mt-3",children:"Upload Images"}),o.jsx(Ho.Control,{type:"file",accept:"image/png",onChange:go,multiple:!0})]}),o.jsx("div",{className:"d-flex flex-col flex-wrap gap-2 mt-3 justify-content-center",children:co.map((j,b)=>o.jsxs("div",{style:{position:"relative",width:"150px",height:"150px"},children:[o.jsx("img",{src:j,alt:`Uploaded ${b+1}`,style:{width:"100%",height:"100%",objectFit:"cover"}}),o.jsx(Go,{variant:"danger",size:"sm",style:{position:"absolute",top:"5px",right:"5px",padding:"0px 6px",minWidth:"20px",minHeight:"20px",borderRadius:"50%",zIndex:2},onClick:()=>E(t=>t.filter((oo,F)=>F!==b)),children:"×"})]},b))})]})})]}),o.jsxs(Co.Footer,{className:"d-flex flex-column align-items-center gap-2 ",children:[o.jsx(Go,{variant:"outline-secondary",onClick:xo,children:"Skip"}),o.jsx(Go,{variant:"primary",onClick:f,children:"Save"})]})]})})},oa=()=>{var as,cs,es,ls,rs,ds,ps,hs,us,gs,xs,fs,is;const[Po,D]=x.useState(null),[ao,po]=x.useState(!1),[co,E]=x.useState(!1),[ho,eo]=x.useState(!1),[H,L]=x.useState(""),[I,z]=x.useState(""),[uo,G]=x.useState({}),[lo,m]=x.useState(!1),[go,xo]=x.useState(""),[f,j]=x.useState([]),b=An(),t=Zo();let oo="https://raphacure-public-images.s3.ap-south-1.amazonaws.com/105748-1736338140063.png",F="https://raphacure-public-images.s3.ap-south-1.amazonaws.com/105748-1736338333932.png";const{user:i,isRaphaPlus:Ys,subDomainDetails:Do,subDomainName:Vs}=zo(a=>a.auth),{cartItems:r,bookingInfo:qs,checkoutSelectedAddress:B,checkoutSelectedUser:A}=zo(a=>a.checkout),{userDependents:fo,userAddress:Ao}=zo(a=>a.profile),{myAllSubscriptions:R}=zo(a=>a.dashboard);console.log("cartItems : ",r);const so=(as=Do==null?void 0:Do.agreed_services)==null?void 0:as.hide_price,[v,Ks]=x.useState([]),Uo=((cs=r==null?void 0:r.carts)==null?void 0:cs.find(a=>(a==null?void 0:a.section_key)==="pharmacy"))??[];(es=Uo==null?void 0:Uo.medicines)==null||es.length;const[Qo,Zs]=x.useState(!1),[Qs,Xo]=x.useState(!1),[Xs,Os]=x.useState(""),[no,Oo]=x.useState([]),[Is,ms]=x.useState(!1);x.useEffect(()=>{Oo(r)},[r]),x.useEffect(()=>{var d;const a=(d=r==null?void 0:r.carts)==null?void 0:d.some(c=>(c==null?void 0:c.section_key)==="pharmacy");Zs(a)},[r==null?void 0:r.carts]);const[on,ro]=x.useState(!1),[sn,Fo]=x.useState(!1),[Kn,nn]=x.useState(0),[an,cn]=x.useState(0),[Zn,Io]=x.useState(0),en=`${i==null?void 0:i.first_name} ${i==null?void 0:i.last_name}`;console.log("bookingInfo",qs),console.log("myAllSubscriptions",R),console.log("cartItems",r),x.useEffect(()=>{t(Fn()),pn(),t(Jo()),window&&typeof window.PhonePeCheckout>"u"&&mo("https://mercury-stg.phonepe.com/web/bundle/checkout.js",!0)},[]),x.useEffect(()=>{const a=document.createElement("script");return a.src="https://checkout.razorpay.com/v1/checkout.js",a.async=!0,a.onload=()=>{console.log("Razorpay script loaded successfully")},a.onerror=d=>{console.error("Error loading Razorpay script:",d)},document.body.appendChild(a),()=>{document.body.removeChild(a)}},[]);const $=(a,d)=>{var c=0;return d!=null&&d.amount?(console.log("discountObj discountObj",d),d!=null&&d.is_checked?(console.log("discountObj discountObj",!0),a>=(d==null?void 0:d.amount)?c=a-(d==null?void 0:d.amount):a<(d==null?void 0:d.amount)&&(c=0)):(c=a,console.log("discountObj discountObj",!1))):d!=null&&d.discount_percentage&&(console.log("finalAmount1"),c=a*((100-(d==null?void 0:d.discount_percentage))/100),c=c?parseInt(c==null?void 0:c.toFixed(2)):0),c},ln=a=>{var c;let d=0;return(c=r==null?void 0:r.carts)==null||c.map(l=>{var p,s,n,u,g,y,k,w,N,S,C;if(a===(l==null?void 0:l.categoryName))if((l==null?void 0:l.categoryName)=="pharmacy")d=((p=l==null?void 0:l.price)==null?void 0:p.discounted_price)*(l==null?void 0:l.count)+d;else if((l==null?void 0:l.categoryName)=="doctor"){let h=0;(l==null?void 0:l.consultationType)==="OPD"?h=((s=l==null?void 0:l.doctorDetails)==null?void 0:s.consultation_cost)||0:(l==null?void 0:l.consultationType)==="CHAT"?h=((n=l==null?void 0:l.doctorDetails)==null?void 0:n.chat_consultation_cost)||0:h=((u=l==null?void 0:l.doctorDetails)==null?void 0:u.virtual_consultation_cost)||0,d=h+d}else console.log("vinod ittem",l),d=(((((g=l.patientsDetails)==null?void 0:g.relation)==="Self"?!0:!!((k=(y=l.doctorDetails)==null?void 0:y.price)!=null&&k.discount_for_dependents))?(N=(w=l==null?void 0:l.doctorDetails)==null?void 0:w.price)==null?void 0:N.discounted_price:(C=(S=l==null?void 0:l.doctorDetails)==null?void 0:S.price)==null?void 0:C.actual_cost)||0)+d}),d},rn=a=>{var c;let d=0;return(c=r==null?void 0:r.carts)==null||c.map(l=>{var s,n,u,g,y;if(a===(l==null?void 0:l.categoryName)&&((s=l==null?void 0:l.hospitalDetails)!=null&&s.vendorId)){var p=((u=(n=l==null?void 0:l.doctorDetails)==null?void 0:n.price)==null?void 0:u.discounted_price)||((g=l==null?void 0:l.doctorDetails)==null?void 0:g.virtual_consultation_cost)||((y=l==null?void 0:l.doctorDetails)==null?void 0:y.consultation_cost)||0;d=p+d}}),d},dn=a=>{var c;let d=0;return(c=r==null?void 0:r.carts)==null||c.map(l=>{var s,n,u,g,y;if(a===(l==null?void 0:l.categoryName)&&!((s=l==null?void 0:l.hospitalDetails)!=null&&s.vendorId)){var p=((u=(n=l==null?void 0:l.doctorDetails)==null?void 0:n.price)==null?void 0:u.discounted_price)||((g=l==null?void 0:l.doctorDetails)==null?void 0:g.virtual_consultation_cost)||((y=l==null?void 0:l.doctorDetails)==null?void 0:y.consultation_cost)||0;d=p+d}}),d};x.useEffect(()=>{var a,d;if(console.log("cartItemscartItems vinod 1111",r),((a=r==null?void 0:r.carts)==null?void 0:a.length)>0){let c=0,l=0,p=[];console.log("cartItemscartItems vinod",r),(d=r==null?void 0:r.carts)==null||d.map(n=>{var y,k,w,N,S,C,h,_,T,J,Y,V,q,K,Z,Q,X,io,yo,e,O,_o,jo,bo,vo,to;if((n==null?void 0:n.section_key)==="pharmacy")l=((y=n==null?void 0:n.price)==null?void 0:y.discounted_price)*(n==null?void 0:n.count)+l,c=((k=n==null?void 0:n.price)==null?void 0:k.actual_cost)*(n==null?void 0:n.count)+c,console.log("itemsTotalAmount1",c);else{var u=0;(n==null?void 0:n.section_key)==="doctor"?(n==null?void 0:n.consultationType)==="OPD"?u=((w=n==null?void 0:n.doctorDetails)==null?void 0:w.consultation_cost)||0:(n==null?void 0:n.consultationType)==="CHAT"?u=((N=n==null?void 0:n.doctorDetails)==null?void 0:N.chat_consultation_cost)||0:u=((S=n==null?void 0:n.doctorDetails)==null?void 0:S.virtual_consultation_cost)||0:(n==null?void 0:n.categoryName)==="labtest"?(C=n==null?void 0:n.doctorDetails)!=null&&C.tests&&((h=n==null?void 0:n.doctorDetails)==null?void 0:h.tests.length)>0&&((_=n==null?void 0:n.doctorDetails)==null||_.tests.forEach(U=>{var P;u+=(P=U==null?void 0:U.price)==null?void 0:P.actual_cost})):u=((T=n==null?void 0:n.price)==null?void 0:T.actual_cost)||((Y=(J=n==null?void 0:n.doctorDetails)==null?void 0:J.price)==null?void 0:Y.actual_cost)||0,c=u+c;var g=0;if((n==null?void 0:n.section_key)==="doctor")(n==null?void 0:n.consultationType)==="OPD"?g=((V=n==null?void 0:n.doctorDetails)==null?void 0:V.consultation_cost)||0:(n==null?void 0:n.consultationType)==="CHAT"?g=((q=n==null?void 0:n.doctorDetails)==null?void 0:q.chat_consultation_cost)||0:g=((K=n==null?void 0:n.doctorDetails)==null?void 0:K.virtual_consultation_cost)||0;else if((n==null?void 0:n.categoryName)==="labtest"){let U=!1;(Z=n==null?void 0:n.doctorDetails)!=null&&Z.tests&&((Q=n==null?void 0:n.doctorDetails)==null?void 0:Q.tests.length)>0&&((X=n==null?void 0:n.doctorDetails)==null||X.tests.forEach(P=>{var ko,wo,No,So;U=((ko=n.patientsDetails)==null?void 0:ko.relation)==="Self"?!0:!!((wo=P==null?void 0:P.price)!=null&&wo.discount_for_dependents),g+=U?(No=P==null?void 0:P.price)==null?void 0:No.discounted_price:(So=P==null?void 0:P.price)==null?void 0:So.actual_cost}))}else g=(((io=n.patientsDetails)==null?void 0:io.relation)==="Self"?!0:!!((e=(yo=n.doctorDetails)==null?void 0:yo.price)!=null&&e.discount_for_dependents))?((O=n==null?void 0:n.price)==null?void 0:O.discounted_price)||((jo=(_o=n==null?void 0:n.doctorDetails)==null?void 0:_o.price)==null?void 0:jo.discounted_price):((bo=n==null?void 0:n.price)==null?void 0:bo.actual_cost)||((to=(vo=n==null?void 0:n.doctorDetails)==null?void 0:vo.price)==null?void 0:to.actual_cost)||0;l=g+l,console.log("ittemittem",n),console.log("itemsTotalAmount1",c),console.log("finalAmount1",l)}p.includes(n==null?void 0:n.section_key)||p.push(n==null?void 0:n.section_key)});let s=[];p.map(n=>{var g;const u=(g=r==null?void 0:r.carts)==null?void 0:g.filter(y=>n===y.section_key);s.push({section_key:n,products:u})}),console.log("allSecNames",p),console.log("finalList",s),nn(c),cn(l),Io(l),Ks(s)}},[(ls=r==null?void 0:r.carts)==null?void 0:ls.length,f,r]),console.log("CartFinalList",v),x.useEffect(()=>{var a=an;v==null||v.map(d=>{const c=d==null?void 0:d.categoryName;var l=ln(c),p=rn(c),s=dn(c);console.log("isnisn section",c),console.log("cPrice",l),console.log("opdPrice",p),console.log("virtualPrice",s),l>0&&f.map(n=>{if((n==null?void 0:n.type)==="pharmacy"&&c==="pharmacy"){const u=$(l,n),g=l-u;a=a-g}else if((n==null?void 0:n.type)==="ctmri_tests"&&c==="ctmri"){const u=$(l,n),g=l-u;a=a-g}else if((n==null?void 0:n.type)==="dental_consultation"&&c==="dentalcare"){const u=$(l,n),g=l-u;a=a-g}else if((n==null?void 0:n.type)==="gym_subscription"&&c==="gym"){const u=$(l,n),g=l-u;a=a-g}else if((n==null?void 0:n.type)==="eye_consultation"&&c==="eyecare"){const u=$(l,n),g=l-u;a=a-g}else if((n==null?void 0:n.type)==="diagnostic_tests"&&c==="labtest"){const u=$(l,n),g=l-u;a=a-g}else if((n==null?void 0:n.type)==="ambulance"&&c==="ambulance"){const u=$(l,n),g=l-u;a=a-g}else if((n==null?void 0:n.type)==="opd_consultation"&&c==="doctor"){if(p>0){const u=$(p,n);console.log("dPricedPrice",u);const g=p-u;a=a-g}}else if((n==null?void 0:n.type)==="virtual_consultation"&&c==="doctor"&&s>0){const u=$(s,n),g=parseInt(s)-u;a=a-g}})}),Io(a)},[v,f]),x.useEffect(()=>{var d,c;const a=[];(f==null?void 0:f.length)===0&&((d=r==null?void 0:r.carts)==null?void 0:d.length)>0&&((c=R==null?void 0:R.wallets)==null?void 0:c.length)>0&&((R==null?void 0:R.wallets).map(p=>{var n,u,g,y,k,w,N,S,C;var s={};(p==null?void 0:p.type)=="opd_consultation"?s=(n=r==null?void 0:r.carts)==null?void 0:n.find(h=>{var _;return((_=h==null?void 0:h.hospitalDetails)==null?void 0:_.vendorId)&&(h==null?void 0:h.section_key)==="doctor"}):(p==null?void 0:p.type)=="virtual_consultation"?s=(u=r==null?void 0:r.carts)==null?void 0:u.find(h=>{var _;return!((_=h==null?void 0:h.hospitalDetails)!=null&&_.vendorId)&&(h==null?void 0:h.section_key)==="doctor"}):(p==null?void 0:p.type)=="ctmri_tests"?s=(g=r==null?void 0:r.carts)==null?void 0:g.find(h=>(h==null?void 0:h.section_key)==="ctmri"):(p==null?void 0:p.type)=="dental_consultation"?s=(y=r==null?void 0:r.carts)==null?void 0:y.find(h=>(h==null?void 0:h.section_key)==="dentalcare"):(p==null?void 0:p.type)=="gym_subscription"?s=(k=r==null?void 0:r.carts)==null?void 0:k.find(h=>(h==null?void 0:h.section_key)==="gym"):(p==null?void 0:p.type)=="eye_consultation"?s=(w=r==null?void 0:r.carts)==null?void 0:w.find(h=>(h==null?void 0:h.section_key)==="eyecare"):(p==null?void 0:p.type)=="diagnostic_tests"?s=(N=r==null?void 0:r.carts)==null?void 0:N.find(h=>(h==null?void 0:h.section_key)==="labtest"):(p==null?void 0:p.type)=="ambulance"?s=(S=r==null?void 0:r.carts)==null?void 0:S.find(h=>(h==null?void 0:h.section_key)==="ambulance"):(p==null?void 0:p.type)=="pharmacy"&&(s=(C=r==null?void 0:r.carts)==null?void 0:C.find(h=>(h==null?void 0:h.section_key)==="pharmacy")),s!=null&&s.section_key&&a.push(p)}),j(a))},[R==null?void 0:R.wallets,r==null?void 0:r.length]);const pn=()=>{console.log("userDependents",fo),console.log("userDependcheckoutSelectedUserents",A),(fo==null?void 0:fo.length)>0&&!(A!=null&&A.id)&&t(Tn(fo[0])),(Ao==null?void 0:Ao.length)>0&&!(B!=null&&B.id)&&t(En(Ao[0]))},To=a=>{L(a),m(!0),xo(`Are you sure, Do you want to delete ${$o(a)} Section?`)},hn=async()=>{console.log("deleteConformSection",H),H&&(console.log("cartitems",r),ro(!0),await t(Rn(H)),await t(Jo()),ro(!1))},un=()=>{b.push("/cart")},gn=a=>{var d=!1;return f.map(c=>{var l,p;(c==null?void 0:c.type)=="opd_consultation"&&(a==null?void 0:a.categoryName)==="doctor"&&((l=a==null?void 0:a.hospitalDetails)!=null&&l.vendorId)||(c==null?void 0:c.type)=="virtual_consultation"&&!((p=a==null?void 0:a.hospitalDetails)!=null&&p.vendorId)&&(a==null?void 0:a.categoryName)==="doctor"||(c==null?void 0:c.type)=="ctmri_tests"&&(a==null?void 0:a.categoryName)==="ctmri"||(c==null?void 0:c.type)=="diagnostic_tests"&&(a==null?void 0:a.categoryName)==="labtest"||(c==null?void 0:c.type)=="ambulance"&&(a==null?void 0:a.categoryName)==="ambulance"||(c==null?void 0:c.type)=="dental_consultation"&&(a==null?void 0:a.categoryName)==="dentalcare"||(c==null?void 0:c.type)=="gym_subscription"&&(a==null?void 0:a.categoryName)==="gym"||(c==null?void 0:c.type)=="eye_consultation"&&(a==null?void 0:a.categoryName)==="eyecare"?((c==null?void 0:c.discount_percentage)>0||c!=null&&c.is_checked)&&(d=!0):(c==null?void 0:c.type)=="pharmacy"&&(a==null?void 0:a.categoryName)==="pharmacy"&&((c==null?void 0:c.discount_percentage)>0||c!=null&&c.is_checked)&&(d=!0)}),d},mo=(a,d=!0)=>{let c=document.createElement("script");c.setAttribute("src",a),c.setAttribute("type","text/javascript"),c.setAttribute("async",d),document.body.appendChild(c),c.addEventListener("load",()=>{console.log("File loaded"),window&&window.PhonePeCheckout&&window.PhonePeCheckout.transact&&window.PhonePeCheckout.transact(window.phonePeObj)}),c.addEventListener("error",l=>{console.log("Error on loading file",l)})},xn=a=>{var d,c,l,p,s,n,u,g,y;console.log("phonepe paymentObj : ",a),(l=(c=(d=a==null?void 0:a.order_data)==null?void 0:d.instrumentResponse)==null?void 0:c.redirectInfo)!=null&&l.url?(window.phonePecallback=k=>{if(k==="USER_CANCEL"){Bo();return}else if(k==="CONCLUDED"){console.log("going to dashboard"),localStorage.removeItem("raphaCart"),t(Vo([])),G(a),Fo(!0);return}},window&&window.PhonePeCheckout&&window.PhonePeCheckout.transact?window.PhonePeCheckout.transact({tokenUrl:(n=(s=(p=a==null?void 0:a.order_data)==null?void 0:p.instrumentResponse)==null?void 0:s.redirectInfo)==null?void 0:n.url,callback:window==null?void 0:window.phonePecallback,type:"IFRAME"}):(window.phonePeObj={tokenUrl:(y=(g=(u=a==null?void 0:a.order_data)==null?void 0:u.instrumentResponse)==null?void 0:g.redirectInfo)==null?void 0:y.url,callback:window.phonePecallback,type:"IFRAME"},mo("https://mercury-stg.phonepe.com/web/bundle/checkout.js",!0))):(console.log("going to dashboard"),Bo())},Eo=async(a,d=!1)=>{var u,g,y,k,w,N,S,C,h,_,T,J,Y,V,q,K,Z,Q,X,io,yo;z("");let c=[],l=[];var p=!1;(u=no==null?void 0:no.carts)==null||u.map(e=>{var _o,jo,bo,vo,to,U,P,ko,wo,No,So,ys,_s,js,bs,vs,ts,ks,ws,Ns,Ss,Cs,Ps,Ds,As,Fs,Ts,Es,zs,Ms,Rs,Us,Ls,Bs,$s,Ws;const O=gn(e);if((e==null?void 0:e.categoryName)==="pharmacy")c.push({...e,isCod:(e==null?void 0:e.isCod)||!1,attachmentImages:(e==null?void 0:e.attachmentImages)||[],comments:(e==null?void 0:e.comments)||""}),p=O;else if((e==null?void 0:e.categoryName)==="ambulance"){const M={test_code:e==null?void 0:e.service_code,useWallet:O,address:e==null?void 0:e.fromAddress,to_address:e==null?void 0:e.toAddress,address_id:(_o=e==null?void 0:e.address)==null?void 0:_o.id,user_id:i==null?void 0:i.id,collection_1_date:e==null?void 0:e.collection_1_date};l.push(M)}else if((e==null?void 0:e.categoryName)==="gym"){const M={test_code:(jo=e==null?void 0:e.doctorDetails)==null?void 0:jo.service_code,useWallet:O,user_id:i==null?void 0:i.id,vendor_id:((bo=e==null?void 0:e.hospitalDetails)==null?void 0:bo.vendorId)||((vo=e==null?void 0:e.hospitalDetails)==null?void 0:vo.id),collection_1_date:(to=e==null?void 0:e.slot1)==null?void 0:to.dateStr,collection_1_slot:(P=(U=e==null?void 0:e.slot1)==null?void 0:U.slot)==null?void 0:P.slot,collection_2_date:(ko=e==null?void 0:e.slot2)==null?void 0:ko.dateStr,collection_2_slot:(No=(wo=e==null?void 0:e.slot2)==null?void 0:wo.slot)==null?void 0:No.slot};l.push(M)}else if((e==null?void 0:e.categoryName)==="labtest"){let M=[],Hs;(So=e.doctorDetails)!=null&&So.tests&&((ys=e.doctorDetails)==null?void 0:ys.tests.length)>0&&((_s=e.doctorDetails)==null||_s.tests.forEach(W=>{(W==null?void 0:W.labtestType)==="labpackage"?Hs=W==null?void 0:W.service_code:M.push(W==null?void 0:W.service_code)}));const vn={test_code:void 0,package_code:Hs,test_codes:(M==null?void 0:M.length)>0?M:void 0,useWallet:O,vendor_id:((js=e==null?void 0:e.hospitalDetails)==null?void 0:js.vendorId)||((bs=e==null?void 0:e.hospitalDetails)==null?void 0:bs.id),address_id:(vs=e==null?void 0:e.address)==null?void 0:vs.id,user_id:(ts=e==null?void 0:e.patientsDetails)==null?void 0:ts.id,collection_1_date:(ks=e==null?void 0:e.slot1)==null?void 0:ks.dateStr,collection_1_slot:(Ns=(ws=e==null?void 0:e.slot1)==null?void 0:ws.slot)==null?void 0:Ns.slot,collection_2_date:(Ss=e==null?void 0:e.slot2)==null?void 0:Ss.dateStr,collection_2_slot:(Ps=(Cs=e==null?void 0:e.slot2)==null?void 0:Cs.slot)==null?void 0:Ps.slot,attachment_ids:Yo(e==null?void 0:e.section_key),isCod:(e==null?void 0:e.isCod)||!1,attachmentImages:(e==null?void 0:e.attachmentImages)||[],comments:(e==null?void 0:e.comments)||""};l.push(vn)}else{const M={virtual_type:(e==null?void 0:e.categoryName)==="doctor"?"video":void 0,test_code:(Ds=e==null?void 0:e.doctorDetails)!=null&&Ds.service_code?(As=e==null?void 0:e.doctorDetails)==null?void 0:As.service_code:void 0,package_code:void 0,useWallet:O,doctor_id:(Fs=e==null?void 0:e.doctorDetails)==null?void 0:Fs.id,vendor_id:((Ts=e==null?void 0:e.hospitalDetails)==null?void 0:Ts.vendorId)||((Es=e==null?void 0:e.hospitalDetails)==null?void 0:Es.id),address_id:(zs=e==null?void 0:e.address)==null?void 0:zs.id,user_id:(Ms=e==null?void 0:e.patientsDetails)==null?void 0:Ms.id,collection_1_date:(Rs=e==null?void 0:e.slot1)==null?void 0:Rs.dateStr,collection_1_slot:(Ls=(Us=e==null?void 0:e.slot1)==null?void 0:Us.slot)==null?void 0:Ls.slot,collection_2_date:(Bs=e==null?void 0:e.slot2)==null?void 0:Bs.dateStr,collection_2_slot:(Ws=($s=e==null?void 0:e.slot2)==null?void 0:$s.slot)==null?void 0:Ws.slot,attachment_ids:Yo(e==null?void 0:e.section_key),isCod:e==null?void 0:e.isCod,attachmentImages:e==null?void 0:e.attachmentImages,comments:e==null?void 0:e.comments};l.push(M)}});const s={medicines:c,useWallet:p,address_id:B==null?void 0:B.id,user_id:A==null?void 0:A.id,collection_1_date:null,collection_1_slot:null,collection_2_date:null,collection_2_slot:null,attachment_ids:Yo("pharmacy"),isCod:(c==null?void 0:c.isCod)||!1,attachmentImages:(c==null?void 0:c.attachmentImages)||[],comments:(c==null?void 0:c.comments)||""};(c==null?void 0:c.length)>0&&l.unshift(s),d&&(l=l.map(e=>({...e,isCod:!0}))),console.log("finalJson1",l),ro(!0);const n=await t(Un({bookings:l,merchant:a||""}));await t(Jo()),ro(!1),console.log("finalJson1",l),console.log("resp resp",n),(g=n==null?void 0:n.payload)!=null&&g.success?(localStorage.removeItem("raphaPrescriptions"),console.log("resp?.payload?.data?.bookings?.id",(w=(k=(y=n==null?void 0:n.payload)==null?void 0:y.data)==null?void 0:k.bookings)==null?void 0:w.id),!d&&!((C=(S=(N=n==null?void 0:n.payload)==null?void 0:N.data)==null?void 0:S.payment)!=null&&C.instanceBooking)&&((_=(h=n==null?void 0:n.payload)==null?void 0:h.data)!=null&&_.payment)?(((J=(T=n==null?void 0:n.payload)==null?void 0:T.data)==null?void 0:J.payment).razorpay_order_id?fn((V=(Y=n==null?void 0:n.payload)==null?void 0:Y.data)==null?void 0:V.payment):xn((K=(q=n==null?void 0:n.payload)==null?void 0:q.data)==null?void 0:K.payment),console.log("payload?.data?.payments")):(console.log("going to dashboard"),localStorage.removeItem("raphaCart"),t(Vo([])),G((Q=(Z=n==null?void 0:n.payload)==null?void 0:Z.data)==null?void 0:Q.payment),Fo(!0))):(X=n==null?void 0:n.error)!=null&&X.message&&(z((io=n==null?void 0:n.error)==null?void 0:io.message),console.log("resp?.error?.message",(yo=n==null?void 0:n.error)==null?void 0:yo.message))},fn=async a=>{console.log("openPaymentBox vinod");try{const d={key:Ln,amount:a.amount,currency:a.currency,name:"Raphacure",description:"Booking Transactions",image:"https://placehold.co/128x128.png",order_id:a.razorpay_order_id,handler:function(l){yn(a.id,l)},prefill:{name:en,email:i==null?void 0:i.email,contact:i==null?void 0:i.phone},theme:{color:"#9747ff"},modal:{ondismiss:function(){Bo()}}},c=new window.Razorpay(d);console.log("rzp1rzp1rzp1",c),c.open()}catch(d){console.error("Error: rzp1",d)}},yn=async(a,d)=>{var l,p,s;console.log("id",a),console.log("datadata",d);const c={body:{order:d},id:a};try{ro(!0);const n=await t(Bn(c));ro(!1),console.log("respres presp",n==null?void 0:n.payload.data.response);const u=(p=(l=n==null?void 0:n.payload)==null?void 0:l.data)==null?void 0:p.response;(s=n==null?void 0:n.payload)!=null&&s.success?(localStorage.removeItem("raphaCart"),t(Vo([])),G(u),Fo(!0)):(os("Booking created successfully"),console.log("going to dashboard"))}catch(n){console.log("error",n)}},os=a=>{eo(a),E(!0)},Lo=()=>{i!=null&&i.from_hr&&Vs!=="wyh"?(i==null?void 0:i.loginType)=="doctorDashboard"?window.location.href="https://www.clinic.raphacure.com/Orders":window.location.href="https://www.hrms.raphacure.com/Bookings":b.push("/dashboard/bookings")},Bo=()=>{os("Payment failed. Please retry from patient dashboard")},$o=a=>a==="pharmacy"?"Medicines":a==="labtest"?"Lab Test":a==="eyecare"?"Eye Care":a==="dentalcare"?"Dental Care":a==="ctmri"?"CTMRI":a==="ambulance"?"Ambulance":a==="gym"?"GYM":a==="domiciliarycare"?"Domiciliary Care":a==="doctor"?"Doctor":a,Wo=(r==null?void 0:r.actual_cost)-(r==null?void 0:r.final_cost),ss=x.useMemo(()=>!!(localStorage!=null&&localStorage.getItem("raphaPrescriptions")),[]),_n="pharmacy",ns=x.useMemo(()=>{let a=!1;return Array.isArray(v)&&(v==null||v.forEach(d=>{var c;(c=d==null?void 0:d.products)==null||c.forEach(l=>{var p;(p=l==null?void 0:l.medicines)==null||p.forEach(s=>{(s==null?void 0:s.counter_type)=="Prescription"&&(a=!0)})})})),a},[JSON.stringify(v)]),jn=async a=>{Os(a),Xo(!0)};x.useEffect(()=>{console.log("cartFinalList : ",v),console.log("allCartItems : ",no)},[v,no]);const bn=a=>{const d=no.carts.map(l=>{if(l.id===a.id){const p=s=>(s==null?void 0:s.map((n,u)=>`${u+1}. ${n}`).join(`
`))||"";return{...l,isCod:!1,attachmentImages:a.imageUrls||[],comments:`
Past Issues :-
${p(a.pastIssues)}
Present Issues :-
${p(a.issues)}
    `.trim()}}return l}),c={...no,carts:d};console.log("updatedCartItems : ",c),Oo(c)};return x.useEffect(()=>{const a=v.length===1&&(v[0].section_key==="pharmacy"||v[0].section_key==="labtest")||v.length===2&&v.some(d=>d.section_key==="pharmacy")&&v.some(d=>d.section_key==="labtest");ms(a)},[v]),o.jsx(Jn,{children:o.jsxs("div",{children:[o.jsx(Gs,{show:co,titleText:ho,deleteText:"Ok",cancelText:"",onDelete:()=>{E(!1),Lo()}}),o.jsx(Gs,{show:lo,titleText:go,deleteText:"Confirm",cancelText:"Cancel",onCancel:()=>{m(!1)},onDelete:()=>{m(!1),hn()}}),o.jsx(Hn,{showModal:sn,user:i,handleOrderTracking:Lo,paymentObj:uo,subDomainDetails:Do,handleModalShow:()=>{Fo(!1),Lo()}}),on&&o.jsx(zn,{}),((rs=r==null?void 0:r.carts)==null?void 0:rs.length)===0?o.jsx("div",{className:"no-results-sec",children:o.jsx("p",{children:"No Items found in your cart."})}):o.jsxs("div",{className:"cart-full-page checkout-page-design1",children:[o.jsx("div",{className:"cart-top-back",children:o.jsxs("span",{className:"your-cart-sec",children:["Your Cart (",v==null?void 0:v.length,")"]})}),o.jsxs("div",{className:"cart-page-content",children:[o.jsx("div",{className:"cart-content-left ",children:o.jsx("div",{className:"checkout-items-all",children:v==null?void 0:v.map(a=>{var d,c,l,p;return o.jsxs("div",{className:"checkout-item-box",children:[o.jsxs("div",{className:"checkout-item-box-header",children:[o.jsxs("p",{className:"item-box-left",children:[$o(a==null?void 0:a.section_key)," (",(d=a==null?void 0:a.products)==null?void 0:d.length,")"]}),o.jsx("p",{className:"item-box-right"})]}),o.jsxs("div",{className:"checkout-item-box-main",children:[(a==null?void 0:a.section_key)==="pharmacy"?o.jsx(o.Fragment,{children:o.jsxs("div",{children:[o.jsx($n,{}),o.jsxs("div",{className:"checkout-pha-items-footer",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"d-paha-name",children:["Delivering to",` ${A==null?void 0:A.first_name} ${A==null?void 0:A.last_name}`]}),o.jsx("p",{className:"d-paha-address",children:B==null?void 0:B.address})]}),o.jsx("div",{children:o.jsx("span",{onClick:un,children:"Change"})})]})]})}):(a==null?void 0:a.section_key)==="ambulance"?o.jsx(o.Fragment,{children:(c=a==null?void 0:a.products)==null?void 0:c.map(s=>{var n,u,g,y;return o.jsx("div",{className:"checkout-item-box-body",children:o.jsx("div",{className:"checkout-box-body-top",children:o.jsxs("div",{className:"body-top-left",children:[o.jsxs("div",{className:"body-top-left-header",children:[o.jsx("p",{className:"vir-name-sec-left",children:"Type: Ambulance"}),o.jsx("div",{children:o.jsx("span",{className:"remove-sec-cont1",onClick:()=>{To(s==null?void 0:s.id)},children:"Remove"})})]}),o.jsx("div",{children:o.jsxs("p",{className:"vir-name-sec-left",children:["Service Name:"," ",(s==null?void 0:s.service_name)||((n=s==null?void 0:s.test)==null?void 0:n.service_name)]})}),o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Date"}),o.jsxs("span",{children:[": ",s==null?void 0:s.collection_1_date]})]}),!so&&o.jsx("div",{className:"dr-content-sec-content",children:o.jsxs("div",{className:"checkout-name-sec checkout-final-amount-sec checkout-final-amount-sec-ambulance",children:[o.jsx("span",{children:"Amount"}),o.jsxs("span",{children:[":",o.jsx(Mo,{}),(y=(g=(u=s==null?void 0:s.price)==null?void 0:u.actual_cost)==null?void 0:g.toFixed(2))==null?void 0:y.toLocaleString("en-US")]})]})})]})})})})}):(a==null?void 0:a.section_key)==="doctor"?o.jsx(o.Fragment,{children:(l=a==null?void 0:a.products)==null?void 0:l.map(s=>{var n,u,g,y,k,w,N,S,C,h,_,T;return console.log("itemitem : ",s),o.jsx("div",{className:"checkout-item-box-body",children:o.jsx("div",{className:"checkout-box-body-top",children:o.jsxs("div",{className:"body-top-left",children:[o.jsxs("div",{className:"body-top-left-header",children:[o.jsx("p",{className:"vir-name-sec-left",children:(s==null?void 0:s.type)==="virtual_consultation"?"Virtual Consultation":(s==null?void 0:s.type)==="opd_consultation"?"OPD Consultation":((n=s==null?void 0:s.doctor)==null?void 0:n.name)||((u=s==null?void 0:s.test)==null?void 0:u.service_name)}),o.jsx("div",{children:o.jsx("span",{className:"remove-sec-cont1",onClick:()=>{To(s==null?void 0:s.id)},children:"Remove"})})]}),o.jsxs("div",{className:"dr-content-sec-content",children:[o.jsxs("div",{className:"dr-content-sec-full",children:[o.jsx("div",{className:"dr-img 1",children:o.jsx("img",{alt:"",src:(g=s==null?void 0:s.doctorDetails)!=null&&g.image||((y=s==null?void 0:s.doctor)==null?void 0:y.gender)==="male"?oo:F})}),o.jsxs("div",{className:"dr-content",children:[o.jsx("p",{className:"dr-name",children:((k=s==null?void 0:s.doctor)==null?void 0:k.name)||((w=s==null?void 0:s.doctor)==null?void 0:w.service_name)}),o.jsx("p",{className:"dr-caregory",children:(N=s==null?void 0:s.doctor)==null?void 0:N.specialization})]})]}),o.jsxs("div",{className:"dr-content-sec-full",children:[o.jsx("div",{className:"pat-img",children:o.jsx("img",{alt:"",src:((S=s==null?void 0:s.user)==null?void 0:S.image)||(i==null?void 0:i.image)||qo})}),o.jsx("div",{className:"pat-content",children:o.jsxs("p",{className:"pat-name",children:["For"," ",(C=s==null?void 0:s.user)==null?void 0:C.relation]})})]}),o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Date"}),o.jsxs("span",{children:[": ",s==null?void 0:s.collection_1_date]})]}),(s==null?void 0:s.collection_1_slot)&&o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Time"}),o.jsxs("span",{children:[": ",s==null?void 0:s.collection_1_slot]})]}),(s==null?void 0:s.collection_2_date)&&(s==null?void 0:s.collection_2_slot)&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Date"}),o.jsxs("span",{children:[": ",s==null?void 0:s.collection_2_date]})]}),(s==null?void 0:s.collection_2_slot)&&o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Time"}),o.jsxs("span",{children:[":"," ",s==null?void 0:s.collection_2_slot]})]})]}),!so&&o.jsxs("div",{className:"checkout-name-sec checkout-final-amount-sec",children:[o.jsx("span",{children:"Amount"}),o.jsxs("span",{children:[":",o.jsx(Mo,{}),(T=(_=(h=s==null?void 0:s.price)==null?void 0:h.actual_cost)==null?void 0:_.toFixed(2))==null?void 0:T.toLocaleString("en-US")]})]})]})]})})})})}):(a==null?void 0:a.section_key)==="labtest"?o.jsx(o.Fragment,{children:a==null?void 0:a.products.map(s=>{var n,u,g,y,k,w,N,S,C,h;return o.jsx("div",{className:"checkout-item-box-body",children:o.jsx("div",{className:"checkout-box-body-top",children:o.jsxs("div",{className:"body-top-left",children:[o.jsxs("div",{className:"body-top-left-header",children:[o.jsxs("p",{className:"vir-name-sec-left",children:[(n=s==null?void 0:s.vendor)==null?void 0:n.name,", ",(u=s==null?void 0:s.vendor)==null?void 0:u.city]}),o.jsx("div",{children:o.jsx("span",{className:"remove-sec-cont1",onClick:()=>{To(s==null?void 0:s.id)},children:"Remove"})})]}),o.jsxs("div",{className:"dr-content-sec-content",children:[o.jsxs("div",{className:"dr-content-sec-list",children:[(s==null?void 0:s.type)==="package_booking"&&o.jsxs("div",{className:"dr-content-sec-full",children:[o.jsx("div",{className:"dr-img",children:o.jsx("img",{src:((g=s==null?void 0:s.package)==null?void 0:g.image)??"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/120521-1736494444858.png",alt:(y=s==null?void 0:s.package)==null?void 0:y.service_name})}),o.jsxs("div",{className:"dr-content",children:[o.jsx("p",{className:"dr-name",children:(k=s==null?void 0:s.package)==null?void 0:k.service_name}),o.jsx("p",{className:"dr-caregory",children:(w=s==null?void 0:s.package)==null?void 0:w.service_code})]})]}),s.tests&&s.tests.length>0&&s.tests.map(_=>o.jsxs("div",{className:"dr-content-sec-full",children:[o.jsx("div",{className:"dr-img",children:o.jsx("img",{src:(_==null?void 0:_.image)??"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/120521-1736494444858.png",alt:_==null?void 0:_.service_name})}),o.jsxs("div",{className:"dr-content",children:[o.jsx("p",{className:"dr-name",children:_==null?void 0:_.service_name}),o.jsx("p",{className:"dr-caregory",children:_==null?void 0:_.service_code})]})]}))]}),o.jsxs("div",{className:"dr-content-sec-full",children:[o.jsx("div",{className:"pat-img",children:o.jsx("img",{src:qo})}),o.jsx("div",{className:"pat-content",children:o.jsxs("p",{className:"pat-name",children:["For ",(N=s==null?void 0:s.user)==null?void 0:N.relation]})})]}),o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Date"})," ",o.jsxs("span",{children:[": ",s==null?void 0:s.collection_1_date]})]}),(s==null?void 0:s.collection_1_slot)&&o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Time"})," ",o.jsxs("span",{children:[": ",s==null?void 0:s.collection_1_slot]})]}),(s==null?void 0:s.collection_2_date)&&(s==null?void 0:s.collection_2_slot)&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Date"})," ",o.jsxs("span",{children:[": ",s==null?void 0:s.collection_2_date]})]}),(s==null?void 0:s.collection_2_slot)&&o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Time"})," ",o.jsxs("span",{children:[":"," ",s==null?void 0:s.collection_2_slot]})]})]}),!so&&o.jsxs("div",{className:"checkout-name-sec checkout-final-amount-sec",children:[o.jsx("span",{children:"Amount"})," ",o.jsxs("span",{children:[":",o.jsx(Mo,{}),(h=(C=(S=s==null?void 0:s.price)==null?void 0:S.actual_cost)==null?void 0:C.toFixed(2))==null?void 0:h.toLocaleString("en-US")]})]})]})]})})})})}):o.jsx(o.Fragment,{children:(p=a==null?void 0:a.products)==null?void 0:p.map(s=>{var u,g,y,k,w,N,S,C,h,_,T,J,Y,V,q,K,Z,Q,X;return console.log("itemitemitem products",s),(((u=s.patientsDetails)==null?void 0:u.relation)==="Self"?!0:!!((y=(g=s.doctorDetails)==null?void 0:g.price)!=null&&y.discount_for_dependents))?(w=(k=s==null?void 0:s.doctorDetails)==null?void 0:k.price)==null||w.discounted_price:(S=(N=s==null?void 0:s.doctorDetails)==null?void 0:N.price)!=null&&S.actual_cost||((C=s==null?void 0:s.price)==null||C.actual_cost),o.jsx("div",{className:"checkout-item-box-body",children:o.jsx("div",{className:"checkout-box-body-top",children:o.jsxs("div",{className:"body-top-left",children:[o.jsxs("div",{className:"body-top-left-header",children:[o.jsx("p",{className:"vir-name-sec-left",children:((h=s==null?void 0:s.doctor)==null?void 0:h.name)||((_=s==null?void 0:s.test)==null?void 0:_.service_name)}),o.jsx("div",{children:o.jsx("span",{className:"remove-sec-cont1",onClick:()=>{To(s==null?void 0:s.id)},children:"Remove"})})]}),o.jsxs("div",{className:"dr-content-sec-content",children:[o.jsxs("div",{className:"dr-content-sec-full",children:[o.jsx("div",{className:"dr-img",children:o.jsx("img",{src:((T=s==null?void 0:s.doctor)==null?void 0:T.image)||Wn})}),o.jsxs("div",{className:"dr-content",children:[o.jsx("p",{className:"dr-name",children:((J=s==null?void 0:s.doctor)==null?void 0:J.name)||((Y=s==null?void 0:s.test)==null?void 0:Y.service_name)}),o.jsx("p",{className:"dr-caregory",children:(V=s==null?void 0:s.doctorDetails)==null?void 0:V.specialization})]})]}),o.jsxs("div",{className:"dr-content-sec-full",children:[o.jsx("div",{className:"pat-img",children:o.jsx("img",{src:((q=s==null?void 0:s.user)==null?void 0:q.image)||qo})}),o.jsx("div",{className:"pat-content",children:o.jsxs("p",{className:"pat-name",children:["For"," ",(K=s==null?void 0:s.user)==null?void 0:K.relation]})})]}),o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Date"}),o.jsxs("span",{children:[": ",s==null?void 0:s.collection_1_date]})]}),(s==null?void 0:s.collection_1_slot)&&o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Time"}),o.jsxs("span",{children:[": ",s==null?void 0:s.collection_1_slot]})]}),(s==null?void 0:s.collection_1_date)&&(s==null?void 0:s.collection_2_slot)&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Date"}),o.jsxs("span",{children:[": ",s==null?void 0:s.collection_1_date]})]}),(s==null?void 0:s.collection_2_slot)&&o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Time"}),o.jsxs("span",{children:[":"," ",s==null?void 0:s.collection_2_slot]})]})]}),!so&&o.jsxs("div",{className:"checkout-name-sec checkout-final-amount-sec",children:[o.jsx("span",{children:"Amount "}),o.jsxs("span",{children:[":",o.jsx(Mo,{}),(X=(Q=(Z=s==null?void 0:s.price)==null?void 0:Z.actual_cost)==null?void 0:Q.toFixed(2))==null?void 0:X.toLocaleString("en-US")]})]})]})]})})})})}),((a==null?void 0:a.section_key)==="pharmacy"||(a==null?void 0:a.section_key)==="doctor"||(a==null?void 0:a.section_key)==="labtest")&&o.jsx(Mn,{className:"medRecords",onClick:()=>{a!=null&&a.products&&a.products.length>0?jn(a.products[0].id):console.error("No products available to add past medical history.")},children:"Edit Medical Records"})]})]})})})}),o.jsxs("div",{className:"cart-content-right ",children:[o.jsxs("div",{className:"sec-right-content-box",children:[o.jsx("h3",{children:"Billing Details"}),o.jsxs("div",{className:"billing-details-sec",children:[v==null?void 0:v.map(a=>{var l,p;let d=0;(l=a==null?void 0:a.products)==null||l.map(s=>{var n;d=((n=s==null?void 0:s.price)==null?void 0:n.actual_cost)+d});const c=(p=a==null?void 0:a.products)==null?void 0:p.length;return o.jsxs("p",{children:[o.jsxs("span",{children:[$o(a==null?void 0:a.section_key)," (",c,c===1?" Item":" Items",")"]}),o.jsxs("span",{children:["₹"," ",so?"0.00":d==null?void 0:d.toFixed(2).toLocaleString("en-US")]})]})}),(r==null?void 0:r.instant_booking_fees)>0&&o.jsxs("p",{className:"tot-amt-expressbook",children:[o.jsx("span",{children:"Express Booking Fees"}),o.jsxs("span",{children:["₹",(ds=r==null?void 0:r.instant_booking_fees)==null?void 0:ds.toFixed(2).toLocaleString("en-US")]})]}),o.jsxs("p",{className:"tot-amt-pmt",children:[o.jsx("span",{children:"Total Amount"}),o.jsxs("span",{children:["₹",so?"0.00":(ps=r==null?void 0:r.actual_cost)==null?void 0:ps.toFixed(2).toLocaleString("en-US")]})]}),!so&&o.jsxs("p",{className:"final-dis-pmt",children:[o.jsx("span",{children:"RaphaCure Discount"}),o.jsxs("span",{children:["- ₹",Wo==null?void 0:Wo.toFixed(2).toLocaleString("en-US")]})]}),(r==null?void 0:r.platform_fees)>0&&o.jsxs("p",{className:"tot-amt-pmt",children:[o.jsx("span",{children:"Platform Fees"}),o.jsxs("span",{children:["₹",(hs=r==null?void 0:r.platform_fees)==null?void 0:hs.toFixed(2).toLocaleString("en-US")]})]}),Qo&&o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:"final-dis-pmt",children:[o.jsx("span",{children:"Shipping Charges"}),o.jsx("span",{children:"- ₹0"})]}),o.jsxs("p",{className:"final-pmt",children:[o.jsx("span",{children:"Final Payment Amount"}),o.jsxs("span",{children:["₹",(us=r==null?void 0:r.final_cost)==null?void 0:us.toFixed(2).toLocaleString("en-US")]})]})]})]})]}),((gs=r==null?void 0:r.wallets)==null?void 0:gs.length)>0&&o.jsx(o.Fragment,{children:o.jsxs("div",{className:"sec-right-content-box wallet-sec-cont",children:[o.jsx("h3",{children:"Avaiable Wallets"}),o.jsx("div",{className:"billing-details-sec",children:(xs=r==null?void 0:r.wallets)==null?void 0:xs.map(a=>o.jsxs("p",{children:[o.jsx("span",{children:a==null?void 0:a.name}),o.jsx("span",{children:a!=null&&a.amount?o.jsx(o.Fragment,{children:o.jsxs("span",{children:[" ₹",a==null?void 0:a.amount]})}):o.jsx(o.Fragment,{children:(a==null?void 0:a.discount_percentage)&&o.jsxs(o.Fragment,{children:[" ",a==null?void 0:a.discount_percentage,"%"]})})})]}))})]})}),I&&o.jsx("div",{children:o.jsxs("p",{className:"error_message",children:[" ",I]})}),o.jsx("div",{className:"checkout-pay-buttom-cont",children:(r==null?void 0:r.final_cost)<1?o.jsx(o.Fragment,{children:o.jsx("div",{className:"checkout-pay-buttom checkout-btn-blue",children:o.jsx("button",{onClick:()=>Eo(""),children:"Create Booking"})})}):o.jsxs(o.Fragment,{children:[ns&&!ss&&o.jsx("div",{className:"checkout-pay-buttom checkout-btn-yallow",children:o.jsx("button",{className:"btn",onClick:()=>b.push("/uploadprescription/uploadsubprescription",_n),children:"Upload a Prescription"})}),(ss||!ns)&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"checkout-pay-buttom checkout-btn-blue",children:o.jsxs("button",{onClick:()=>Eo(""),children:["Pay with Razorpay ₹"," ",(fs=r==null?void 0:r.final_cost)==null?void 0:fs.toFixed(2).toLocaleString("en-US")]})}),!Ys&&o.jsx("div",{className:"checkout-pay-buttom",children:o.jsxs("button",{onClick:()=>Eo("phonePe"),children:["Pay with PhonePe ₹"," ",(is=r==null?void 0:r.final_cost)==null?void 0:is.toFixed(2).toLocaleString("en-US")]})}),o.jsx("div",{className:"checkout-pay-buttom checkout-btn-green",children:o.jsx("button",{onClick:()=>Eo("",!0),disabled:!Is,children:"Cash On Delivery"})})]})]})}),Qo&&o.jsxs("div",{className:"delivery-time",children:[o.jsxs("h2",{children:["Get It Delivered by"," ",o.jsx("span",{className:"time-delivery",children:"-pm, Today"})]}),o.jsx("p",{children:"Delivering to (pincode), (place)"})]})]})]})]}),o.jsx(qn,{show:Qs,onClose:()=>Xo(!1),handleSavePastData:a=>{bn(a)},selectedCartItemId:Xs})]})})};export{oa as default};
