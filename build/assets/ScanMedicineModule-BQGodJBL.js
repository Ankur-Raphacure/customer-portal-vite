import{d as lt,T as rt,O as Ne,U as ft,V as ht,b as pt,A as gt,r as Y,W as mt,a as ae,X as vt,Y as yt,j as u,w as wt,Z as bt,t as St,_ as xt,$ as Et,a0 as Ot}from"./index-BHf3qlKB.js";import{c as Mt}from"./_commonjs-dynamic-modules-TDtrdbi3.js";const Lt=lt.div`
  width: 100%;
  .scanner-container {
    width: 100%;
    display: flex;
  }
  .scanner-box {
    width: 40%;
    background-color: #252b61;
    height: 720px;
    padding: 40px 50px;
  }
  .scanner-image-box {
    width: 100%;
    border-radius: 45px;
    background-color: #2c3474;
    height: 295.3px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
  }
  .scanner-image-btn {
    display: flex;
    justify-content: center;
    margin-top: 54px;
    button {
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 29.36px;
      background-color: #a3dac2;
      height: 59px;
      font-size: 16px;
      color: #252b61;
      font-family: Outfit, sans-serif;
      font-size: 16px;
      font-weight: 500;
      width: 20rem !important;
    }
  }

  .scanned-image-text {
    margin-top: 54px;
  }

  .uploaded-scan-img {
    width: 29.7rem;
    height: 18.5rem;
    border-radius: 45px;
  }
  .image-main-text {
    font-size: 24px;
    font-weight: 500;
    font-family: Outfit, sans-serif;
    color: #fff;
    opacity: 0.8;
  }
  .image-sub-text {
    width: 100%;
    font-size: 16px;
    font-family: Outfit, sans-serif;
    color: #9a9898;
    height: auto;
    overflow: scroll;
  }
  .instructions {
    width: 60%;
    padding: 40px 50px;
  }
  .instructions-text {
    font-size: 28px;
    letter-spacing: 0.02em;
    font-weight: 600;
    font-family: Outfit, sans-serif;
    color: #1e1e1e;
    margin-bottom: 40px;
  }
  .instructions-sub-text {
    width: 100%;
    font-size: 18px;
    letter-spacing: 1.5px;
    font-weight: 400;
    color: #888;
    font-family: Outfit, sans-serif;
    span {
      color: #1e1e1e;
      font-weight: 500;
      font-size: 20px;
    }
  }
  .scanErrorMsg {
    width: 100%;
    font-size: 16px;
    font-family: Outfit, sans-serif;
    color: #e06e6e;
    text-align: center;
    margin-top: 5px;
  }
  .suggested-medicines-div {
    padding: 0px 60px;
    width: 60%;
  }
  .medicinesErrorMsg {
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .medicinesGridContainer {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    margin-bottom: 4rem;
  }
  .video-div {
    display: flex;
    /* height: 24rem; */
    /* width: 22rem; */
    justify-content: center;
    align-items: center;
    width: 23rem;
    border-radius: 24px;
  }
  /* .query-input-field input {
    height: 4rem;
  } */
  @media (max-width: 768px) {
    .scanner-box {
      padding: 20px 20px;
    }
    .scanner-container {
      flex-direction: column;
    }
    .scanner-box {
      width: 100%;
      height: 50%;
    }
    .scanner-image-btn button {
      width: 100%;
    }
    .uploaded-scan-img {
      width: 23.2rem;
      height: 18.3rem;
      border-radius: 45px;
    }
    .instructions {
      width: 100%;
      padding: 10px 20px;
    }
    .instructions-text {
      font-size: 24px;
      margin: 20px 0px;
    }
    .medicinesGridContainer {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
    }
    .suggested-medicines-div {
      padding: 0px 10px;
      width: 100%;
    }
  }
`;var se={exports:{}},Re;function jt(){return Re||(Re=1,function(d){var m=function(t){var p=Object.prototype,c=p.hasOwnProperty,s=Object.defineProperty||function(r,e,o){r[e]=o.value},a,v=typeof Symbol=="function"?Symbol:{},E=v.iterator||"@@iterator",T=v.asyncIterator||"@@asyncIterator",N=v.toStringTag||"@@toStringTag";function R(r,e,o){return Object.defineProperty(r,e,{value:o,enumerable:!0,configurable:!0,writable:!0}),r[e]}try{R({},"")}catch{R=function(e,o,w){return e[o]=w}}function j(r,e,o,w){var f=e&&e.prototype instanceof M?e:M,L=Object.create(f.prototype),G=new K(w||[]);return s(L,"_invoke",{value:Z(r,o,G)}),L}t.wrap=j;function y(r,e,o){try{return{type:"normal",arg:r.call(e,o)}}catch(w){return{type:"throw",arg:w}}}var n="suspendedStart",i="suspendedYield",h="executing",g="completed",O={};function M(){}function b(){}function C(){}var U={};R(U,E,function(){return this});var k=Object.getPrototypeOf,z=k&&k(k(ee([])));z&&z!==p&&c.call(z,E)&&(U=z);var q=C.prototype=M.prototype=Object.create(U);b.prototype=C,s(q,"constructor",{value:C,configurable:!0}),s(C,"constructor",{value:b,configurable:!0}),b.displayName=R(C,N,"GeneratorFunction");function B(r){["next","throw","return"].forEach(function(e){R(r,e,function(o){return this._invoke(e,o)})})}t.isGeneratorFunction=function(r){var e=typeof r=="function"&&r.constructor;return e?e===b||(e.displayName||e.name)==="GeneratorFunction":!1},t.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,C):(r.__proto__=C,R(r,N,"GeneratorFunction")),r.prototype=Object.create(q),r},t.awrap=function(r){return{__await:r}};function A(r,e){function o(L,G,I,l){var _=y(r[L],r,G);if(_.type==="throw")l(_.arg);else{var F=_.arg,P=F.value;return P&&typeof P=="object"&&c.call(P,"__await")?e.resolve(P.__await).then(function(Q){o("next",Q,I,l)},function(Q){o("throw",Q,I,l)}):e.resolve(P).then(function(Q){F.value=Q,I(F)},function(Q){return o("throw",Q,I,l)})}}var w;function f(L,G){function I(){return new e(function(l,_){o(L,G,l,_)})}return w=w?w.then(I,I):I()}s(this,"_invoke",{value:f})}B(A.prototype),R(A.prototype,T,function(){return this}),t.AsyncIterator=A,t.async=function(r,e,o,w,f){f===void 0&&(f=Promise);var L=new A(j(r,e,o,w),f);return t.isGeneratorFunction(e)?L:L.next().then(function(G){return G.done?G.value:L.next()})};function Z(r,e,o){var w=n;return function(L,G){if(w===h)throw new Error("Generator is already running");if(w===g){if(L==="throw")throw G;return W()}for(o.method=L,o.arg=G;;){var I=o.delegate;if(I){var l=X(I,o);if(l){if(l===O)continue;return l}}if(o.method==="next")o.sent=o._sent=o.arg;else if(o.method==="throw"){if(w===n)throw w=g,o.arg;o.dispatchException(o.arg)}else o.method==="return"&&o.abrupt("return",o.arg);w=h;var _=y(r,e,o);if(_.type==="normal"){if(w=o.done?g:i,_.arg===O)continue;return{value:_.arg,done:o.done}}else _.type==="throw"&&(w=g,o.method="throw",o.arg=_.arg)}}}function X(r,e){var o=e.method,w=r.iterator[o];if(w===a)return e.delegate=null,o==="throw"&&r.iterator.return&&(e.method="return",e.arg=a,X(r,e),e.method==="throw")||o!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+o+"' method")),O;var f=y(w,r.iterator,e.arg);if(f.type==="throw")return e.method="throw",e.arg=f.arg,e.delegate=null,O;var L=f.arg;if(!L)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,O;if(L.done)e[r.resultName]=L.value,e.next=r.nextLoc,e.method!=="return"&&(e.method="next",e.arg=a);else return L;return e.delegate=null,O}B(q),R(q,N,"Generator"),R(q,E,function(){return this}),R(q,"toString",function(){return"[object Generator]"});function te(r){var e={tryLoc:r[0]};1 in r&&(e.catchLoc=r[1]),2 in r&&(e.finallyLoc=r[2],e.afterLoc=r[3]),this.tryEntries.push(e)}function J(r){var e=r.completion||{};e.type="normal",delete e.arg,r.completion=e}function K(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(te,this),this.reset(!0)}t.keys=function(r){var e=Object(r),o=[];for(var w in e)o.push(w);return o.reverse(),function f(){for(;o.length;){var L=o.pop();if(L in e)return f.value=L,f.done=!1,f}return f.done=!0,f}};function ee(r){if(r){var e=r[E];if(e)return e.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length)){var o=-1,w=function f(){for(;++o<r.length;)if(c.call(r,o))return f.value=r[o],f.done=!1,f;return f.value=a,f.done=!0,f};return w.next=w}}return{next:W}}t.values=ee;function W(){return{value:a,done:!0}}return K.prototype={constructor:K,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(J),!r)for(var e in this)e.charAt(0)==="t"&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=a)},stop:function(){this.done=!0;var r=this.tryEntries[0],e=r.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function o(l,_){return L.type="throw",L.arg=r,e.next=l,_&&(e.method="next",e.arg=a),!!_}for(var w=this.tryEntries.length-1;w>=0;--w){var f=this.tryEntries[w],L=f.completion;if(f.tryLoc==="root")return o("end");if(f.tryLoc<=this.prev){var G=c.call(f,"catchLoc"),I=c.call(f,"finallyLoc");if(G&&I){if(this.prev<f.catchLoc)return o(f.catchLoc,!0);if(this.prev<f.finallyLoc)return o(f.finallyLoc)}else if(G){if(this.prev<f.catchLoc)return o(f.catchLoc,!0)}else if(I){if(this.prev<f.finallyLoc)return o(f.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(r,e){for(var o=this.tryEntries.length-1;o>=0;--o){var w=this.tryEntries[o];if(w.tryLoc<=this.prev&&c.call(w,"finallyLoc")&&this.prev<w.finallyLoc){var f=w;break}}f&&(r==="break"||r==="continue")&&f.tryLoc<=e&&e<=f.finallyLoc&&(f=null);var L=f?f.completion:{};return L.type=r,L.arg=e,f?(this.method="next",this.next=f.finallyLoc,O):this.complete(L)},complete:function(r,e){if(r.type==="throw")throw r.arg;return r.type==="break"||r.type==="continue"?this.next=r.arg:r.type==="return"?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):r.type==="normal"&&e&&(this.next=e),O},finish:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.finallyLoc===r)return this.complete(o.completion,o.afterLoc),J(o),O}},catch:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc===r){var w=o.completion;if(w.type==="throw"){var f=w.arg;J(o)}return f}}throw new Error("illegal catch attempt")},delegateYield:function(r,e,o){return this.delegate={iterator:ee(r),resultName:e,nextLoc:o},this.method==="next"&&(this.arg=a),O}},t}(d.exports);try{regeneratorRuntime=m}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=m:Function("r","regeneratorRuntime = r")(m)}}(se)),se.exports}var ce,Te;function Ce(){return Te||(Te=1,ce=(d,m)=>`${d}-${m}-${Math.random().toString(16).slice(3,8)}`),ce}var ue,Ue;function nt(){if(Ue)return ue;Ue=1;const d=Ce();let m=0;return ue=({id:t,action:p,payload:c={}})=>{let s=t;return typeof s>"u"&&(s=d("Job",m),m+=1),{id:s,action:p,payload:c}},ue}var re={},Ae;function ke(){if(Ae)return re;Ae=1;let d=!1;return re.logging=d,re.setLogging=m=>{d=m},re.log=(...m)=>d?console.log.apply(this,m):null,re}var de,Ie;function _t(){if(Ie)return de;Ie=1;const d=nt(),{log:m}=ke(),t=Ce();let p=0;return de=()=>{const c=t("Scheduler",p),s={},a={};let v=[];p+=1;const E=()=>v.length,T=()=>Object.keys(s).length,N=()=>{if(v.length!==0){const i=Object.keys(s);for(let h=0;h<i.length;h+=1)if(typeof a[i[h]]>"u"){v[0](s[i[h]]);break}}},R=(i,h)=>new Promise((g,O)=>{const M=d({action:i,payload:h});v.push(async b=>{v.shift(),a[b.id]=M;try{g(await b[i].apply(this,[...h,M.id]))}catch(C){O(C)}finally{delete a[b.id],N()}}),m(`[${c}]: Add ${M.id} to JobQueue`),m(`[${c}]: JobQueue length=${v.length}`),N()});return{addWorker:i=>(s[i.id]=i,m(`[${c}]: Add ${i.id}`),m(`[${c}]: Number of workers=${T()}`),N(),i.id),addJob:async(i,...h)=>{if(T()===0)throw Error(`[${c}]: You need to have at least one worker before adding jobs`);return R(i,h)},terminate:async()=>{Object.keys(s).forEach(async i=>{await s[i].terminate()}),v=[]},getQueueLen:E,getNumWorkers:T}},de}var le,Pe;function Ct(){if(Pe)return le;Pe=1;function d(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}return le=d,le}var fe,qe;function kt(){if(qe)return fe;qe=1;const d=Ct();return fe=m=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":d()?t.type="electron":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof Mt=="function"&&(t.type="node"),typeof m>"u"?t:t[m]},fe}var he,Ge;function Nt(){if(Ge)return he;Ge=1;const m=kt()("type")==="browser"?t=>new URL(t,window.location.href).href:t=>t;return he=t=>{const p={...t};return["corePath","workerPath","langPath"].forEach(c=>{t[c]&&(p[c]=m(p[c]))}),p},he}var pe,ze;function Rt(){return ze||(ze=1,pe=d=>{const m=[],t=[],p=[],c=[],s=[];return d.blocks&&d.blocks.forEach(a=>{a.paragraphs.forEach(v=>{v.lines.forEach(E=>{E.words.forEach(T=>{T.symbols.forEach(N=>{s.push({...N,page:d,block:a,paragraph:v,line:E,word:T})}),c.push({...T,page:d,block:a,paragraph:v,line:E})}),p.push({...E,page:d,block:a,paragraph:v})}),t.push({...v,page:d,block:a})}),m.push({...a,page:d})}),{...d,blocks:m,paragraphs:t,lines:p,words:c,symbols:s}}),pe}var ge,We;function it(){return We||(We=1,ge={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),ge}const Tt="5.1.1",Ut={version:Tt};var me,Fe;function At(){return Fe||(Fe=1,me={workerBlobURL:!0,logger:()=>{}}),me}var ve,$e;function It(){if($e)return ve;$e=1;const d=Ut.version;return ve={...At(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${d}/dist/worker.min.js`},ve}var ye,De;function Pt(){return De||(De=1,ye=({workerPath:d,workerBlobURL:m})=>{let t;if(Blob&&URL&&m){const p=new Blob([`importScripts("${d}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(p))}else t=new Worker(d);return t}),ye}var we,Be;function qt(){return Be||(Be=1,we=d=>{d.terminate()}),we}var be,Je;function Gt(){return Je||(Je=1,be=(d,m)=>{d.onmessage=({data:t})=>{m(t)}}),be}var Se,He;function zt(){return He||(He=1,Se=async(d,m)=>{d.postMessage(m)}),Se}var xe,Ye;function Wt(){if(Ye)return xe;Ye=1;const d=t=>new Promise((p,c)=>{const s=new FileReader;s.onload=()=>{p(s.result)},s.onerror=({target:{error:{code:a}}})=>{c(Error(`File could not be read! Code=${a}`))},s.readAsArrayBuffer(t)}),m=async t=>{let p=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?p=atob(t.split(",")[1]).split("").map(c=>c.charCodeAt(0)):p=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(p=await m(t.src)),t.tagName==="VIDEO"&&(p=await m(t.poster)),t.tagName==="CANVAS"&&await new Promise(c=>{t.toBlob(async s=>{p=await d(s),c()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const c=await t.convertToBlob();p=await d(c)}else(t instanceof File||t instanceof Blob)&&(p=await d(t));return new Uint8Array(p)};return xe=m,xe}var Ee,Ke;function Ft(){if(Ke)return Ee;Ke=1;const d=It(),m=Pt(),t=qt(),p=Gt(),c=zt(),s=Wt();return Ee={defaultOptions:d,spawnWorker:m,terminateWorker:t,onMessage:p,send:c,loadImage:s},Ee}var Oe,Qe;function ot(){if(Qe)return Oe;Qe=1;const d=Nt(),m=Rt(),t=nt(),{log:p}=ke(),c=Ce(),s=it(),{defaultOptions:a,spawnWorker:v,terminateWorker:E,onMessage:T,loadImage:N,send:R}=Ft();let j=0;return Oe=async(y="eng",n=s.LSTM_ONLY,i={},h={})=>{const g=c("Worker",j),{logger:O,errorHandler:M,...b}=d({...a,...i}),C={},U={},k=typeof y=="string"?y.split("+"):y;let z=n,q=h;const B=[s.DEFAULT,s.LSTM_ONLY].includes(n)&&!b.legacyCore;let A,Z;const X=new Promise((S,x)=>{Z=S,A=x}),te=S=>{A(S.message)};let J=v(b);J.onerror=te,j+=1;const K=(S,x)=>{C[S]=x},ee=(S,x)=>{U[S]=x},W=({id:S,action:x,payload:$})=>new Promise((H,D)=>{p(`[${g}]: Start ${S}, action=${x}`);const V=`${x}-${S}`;K(V,H),ee(V,D),R(J,{workerId:g,jobId:S,action:x,payload:$})}),r=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),e=S=>W(t({id:S,action:"load",payload:{options:{lstmOnly:B,corePath:b.corePath,logging:b.logging}}})),o=(S,x,$)=>W(t({id:$,action:"FS",payload:{method:"writeFile",args:[S,x]}})),w=(S,x)=>W(t({id:x,action:"FS",payload:{method:"readFile",args:[S,{encoding:"utf8"}]}})),f=(S,x)=>W(t({id:x,action:"FS",payload:{method:"unlink",args:[S]}})),L=(S,x,$)=>W(t({id:$,action:"FS",payload:{method:S,args:x}})),G=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),I=(S,x)=>W(t({id:x,action:"loadLanguage",payload:{langs:S,options:{langPath:b.langPath,dataPath:b.dataPath,cachePath:b.cachePath,cacheMethod:b.cacheMethod,gzip:b.gzip,lstmOnly:[s.DEFAULT,s.LSTM_ONLY].includes(z)&&!b.legacyLang}}})),l=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),_=(S,x,$,H)=>W(t({id:H,action:"initialize",payload:{langs:S,oem:x,config:$}})),F=(S="eng",x,$,H)=>{if(B&&[s.TESSERACT_ONLY,s.TESSERACT_LSTM_COMBINED].includes(x))throw Error("Legacy model requested but code missing.");const D=x||z;z=D;const V=$||q;q=V;const oe=(typeof S=="string"?S.split("+"):S).filter(dt=>!k.includes(dt));return k.push(...oe),oe.length>0?I(oe,H).then(()=>_(S,D,V,H)):_(S,D,V,H)},P=(S={},x)=>W(t({id:x,action:"setParameters",payload:{params:S}})),Q=async(S,x={},$={blocks:!0,text:!0,hocr:!0,tsv:!0},H)=>W(t({id:H,action:"recognize",payload:{image:await N(S),options:x,output:$}})),at=(S="Tesseract OCR Result",x=!1,$)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),W(t({id:$,action:"getPDF",payload:{title:S,textonly:x}}))),st=async(S,x)=>{if(B)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return W(t({id:x,action:"detect",payload:{image:await N(S)}}))},ct=async()=>(J!==null&&(E(J),J=null),Promise.resolve());T(J,({workerId:S,jobId:x,status:$,action:H,data:D})=>{const V=`${H}-${x}`;if($==="resolve"){p(`[${S}]: Complete ${x}`);let ne=D;H==="recognize"?ne=m(D):H==="getPDF"&&(ne=Array.from({...D,length:Object.keys(D).length})),C[V]({jobId:x,data:ne})}else if($==="reject")if(U[V](D),H==="load"&&A(D),M)M(D);else throw Error(D);else $==="progress"&&O({...D,userJobId:x})});const ut={id:g,worker:J,setResolve:K,setReject:ee,load:r,writeText:o,readText:w,removeFile:f,FS:L,loadLanguage:G,initialize:l,reinitialize:F,setParameters:P,recognize:Q,getPDF:at,detect:st,terminate:ct};return e().then(()=>I(y)).then(()=>_(y,n,h)).then(()=>Z(ut)).catch(()=>{}),X},Oe}var Me,Ve;function $t(){if(Ve)return Me;Ve=1;const d=ot();return Me={recognize:async(p,c,s)=>{const a=await d(c,1,s);return a.recognize(p).finally(async()=>{await a.terminate()})},detect:async(p,c)=>{const s=await d("osd",0,c);return s.detect(p).finally(async()=>{await s.terminate()})}},Me}var Le,Ze;function Dt(){return Ze||(Ze=1,Le={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Le}var je,Xe;function Bt(){return Xe||(Xe=1,je={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),je}var _e,et;function Jt(){if(et)return _e;et=1,jt();const d=_t(),m=ot(),t=$t(),p=Dt(),c=it(),s=Bt(),{setLogging:a}=ke();return _e={languages:p,OEM:c,PSM:s,createScheduler:d,createWorker:m,setLogging:a,...t},_e}var Ht=Jt();const Yt=rt(Ht),Kt=()=>{const d=()=>{var c;const t="user";return localStorage!=null&&localStorage.getItem(t)&&JSON.parse((localStorage==null?void 0:localStorage.getItem(t))??"")&&((c=JSON.parse((localStorage==null?void 0:localStorage.getItem(t))??""))!=null&&c.accessToken)?JSON.parse((localStorage==null?void 0:localStorage.getItem(t))??"").accessToken:void 0};return{uploadToS3:async(t,p)=>{var c,s,a,v;try{console.log({file:t,ext:t.name.split(".").pop()});const E={id:`${p}`,ext:`.${t.name.split(".").pop()}`},T=await Ne.patch(`${ft}/api/v1/config/presign`,E,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+d()}}),N=JSON.parse(JSON.stringify(T)),R=(s=(c=N==null?void 0:N.data)==null?void 0:c.signedUrL)==null?void 0:s.signedUrL,j=(v=(a=N==null?void 0:N.data)==null?void 0:a.signedUrL)==null?void 0:v.publicUrl;return await Ne.put(R,t,{headers:{"Content-Type":t.type}}),j}catch(E){throw console.error("Error uploading file to S3:",E),E}}}};var ie={exports:{}},Qt=ie.exports,tt;function Vt(){return tt||(tt=1,function(d,m){(function(p,c){d.exports=c(ht())})(Qt,function(t){return function(p){var c={};function s(a){if(c[a])return c[a].exports;var v=c[a]={i:a,l:!1,exports:{}};return p[a].call(v.exports,v,v.exports,s),v.l=!0,v.exports}return s.m=p,s.c=c,s.d=function(a,v,E){s.o(a,v)||Object.defineProperty(a,v,{enumerable:!0,get:E})},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},s.t=function(a,v){if(v&1&&(a=s(a)),v&8||v&4&&typeof a=="object"&&a&&a.__esModule)return a;var E=Object.create(null);if(s.r(E),Object.defineProperty(E,"default",{enumerable:!0,value:a}),v&2&&typeof a!="string")for(var T in a)s.d(E,T,(function(N){return a[N]}).bind(null,T));return E},s.n=function(a){var v=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(v,"a",v),v},s.o=function(a,v){return Object.prototype.hasOwnProperty.call(a,v)},s.p="",s(s.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(p,c,s){s.r(c);var a=s("react"),v=function(){var j=function(y,n){return j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,h){i.__proto__=h}||function(i,h){for(var g in h)h.hasOwnProperty(g)&&(i[g]=h[g])},j(y,n)};return function(y,n){j(y,n);function i(){this.constructor=y}y.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),E=function(){return E=Object.assign||function(j){for(var y,n=1,i=arguments.length;n<i;n++){y=arguments[n];for(var h in y)Object.prototype.hasOwnProperty.call(y,h)&&(j[h]=y[h])}return j},E.apply(this,arguments)},T=function(j,y){var n={};for(var i in j)Object.prototype.hasOwnProperty.call(j,i)&&y.indexOf(i)<0&&(n[i]=j[i]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,i=Object.getOwnPropertySymbols(j);h<i.length;h++)y.indexOf(i[h])<0&&Object.prototype.propertyIsEnumerable.call(j,i[h])&&(n[i[h]]=j[i[h]]);return n};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(y){var n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return n?new Promise(function(i,h){n.call(navigator,y,i,h)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function N(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var R=function(j){v(y,j);function y(n){var i=j.call(this,n)||this;return i.canvas=null,i.ctx=null,i.requestUserMediaId=0,i.unmounted=!1,i.state={hasUserMedia:!1},i}return y.prototype.componentDidMount=function(){var n=this,i=n.state,h=n.props;if(this.unmounted=!1,!N()){h.onUserMediaError("getUserMedia not supported");return}i.hasUserMedia||this.requestUserMedia(),h.children&&typeof h.children!="function"&&console.warn("children must be a function")},y.prototype.componentDidUpdate=function(n){var i=this.props;if(!N()){i.onUserMediaError("getUserMedia not supported");return}var h=JSON.stringify(n.audioConstraints)!==JSON.stringify(i.audioConstraints),g=JSON.stringify(n.videoConstraints)!==JSON.stringify(i.videoConstraints),O=n.minScreenshotWidth!==i.minScreenshotWidth,M=n.minScreenshotHeight!==i.minScreenshotHeight;(g||O||M)&&(this.canvas=null,this.ctx=null),(h||g)&&(this.stopAndCleanup(),this.requestUserMedia())},y.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},y.stopMediaStream=function(n){n&&(n.getVideoTracks&&n.getAudioTracks?(n.getVideoTracks().map(function(i){n.removeTrack(i),i.stop()}),n.getAudioTracks().map(function(i){n.removeTrack(i),i.stop()})):n.stop())},y.prototype.stopAndCleanup=function(){var n=this.state;n.hasUserMedia&&(y.stopMediaStream(this.stream),n.src&&window.URL.revokeObjectURL(n.src))},y.prototype.getScreenshot=function(n){var i=this,h=i.state,g=i.props;if(!h.hasUserMedia)return null;var O=this.getCanvas(n);return O&&O.toDataURL(g.screenshotFormat,g.screenshotQuality)},y.prototype.getCanvas=function(n){var i=this,h=i.state,g=i.props;if(!this.video||!h.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var O=this.video.videoWidth,M=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var b=O/M;O=g.minScreenshotWidth||this.video.clientWidth,M=O/b,g.minScreenshotHeight&&M<g.minScreenshotHeight&&(M=g.minScreenshotHeight,O=M*b)}this.canvas=document.createElement("canvas"),this.canvas.width=(n==null?void 0:n.width)||O,this.canvas.height=(n==null?void 0:n.height)||M,this.ctx=this.canvas.getContext("2d")}var C=this,U=C.ctx,k=C.canvas;return U&&k&&(k.width=(n==null?void 0:n.width)||k.width,k.height=(n==null?void 0:n.height)||k.height,g.mirrored&&(U.translate(k.width,0),U.scale(-1,1)),U.imageSmoothingEnabled=g.imageSmoothing,U.drawImage(this.video,0,0,(n==null?void 0:n.width)||k.width,(n==null?void 0:n.height)||k.height),g.mirrored&&(U.scale(-1,1),U.translate(-k.width,0))),k},y.prototype.requestUserMedia=function(){var n=this,i=this.props,h=function(M,b){var C={video:typeof b<"u"?b:!0};i.audio&&(C.audio=typeof M<"u"?M:!0),n.requestUserMediaId++;var U=n.requestUserMediaId;navigator.mediaDevices.getUserMedia(C).then(function(k){n.unmounted||U!==n.requestUserMediaId?y.stopMediaStream(k):n.handleUserMedia(null,k)}).catch(function(k){n.handleUserMedia(k)})};if("mediaDevices"in navigator)h(i.audioConstraints,i.videoConstraints);else{var g=function(M){return{optional:[{sourceId:M}]}},O=function(M){var b=M.deviceId;return typeof b=="string"?b:Array.isArray(b)&&b.length>0?b[0]:typeof b=="object"&&b.ideal?b.ideal:null};MediaStreamTrack.getSources(function(M){var b=null,C=null;M.forEach(function(z){z.kind==="audio"?b=z.id:z.kind==="video"&&(C=z.id)});var U=O(i.audioConstraints);U&&(b=U);var k=O(i.videoConstraints);k&&(C=k),h(g(b),g(C))})}},y.prototype.handleUserMedia=function(n,i){var h=this.props;if(n||!i){this.setState({hasUserMedia:!1}),h.onUserMediaError(n);return}this.stream=i;try{this.video&&(this.video.srcObject=i),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(i)})}h.onUserMedia(i)},y.prototype.render=function(){var n=this,i=this,h=i.state,g=i.props,O=g.audio;g.forceScreenshotSourceSize;var M=g.disablePictureInPicture;g.onUserMedia,g.onUserMediaError,g.screenshotFormat,g.screenshotQuality,g.minScreenshotWidth,g.minScreenshotHeight,g.audioConstraints,g.videoConstraints,g.imageSmoothing;var b=g.mirrored,C=g.style,U=C===void 0?{}:C,k=g.children,z=T(g,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),q=b?E(E({},U),{transform:(U.transform||"")+" scaleX(-1)"}):U,B={getScreenshot:this.getScreenshot.bind(this)};return a.createElement(a.Fragment,null,a.createElement("video",E({autoPlay:!0,disablePictureInPicture:M,src:h.src,muted:!O,playsInline:!0,ref:function(A){n.video=A},style:q},z)),k&&k(B))},y.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},y}(a.Component);c.default=R},react:function(p,c){p.exports=t}}).default})}(ie)),ie.exports}var Zt=Vt();const Xt=rt(Zt),rr=()=>{var I;const d=pt(),m=gt(),t=Y.useRef(null),{uploadToS3:p}=Kt(),c=m==null?void 0:m.state,[s,a]=Y.useState(null),[v,E]=Y.useState(null),[T,N]=Y.useState(null),[R,j]=Y.useState(null),[y,n]=Y.useState(!1),[i,h]=Y.useState(""),[g,O]=Y.useState(!1),[M,b]=Y.useState(null),[C,U]=Y.useState(!1),[k,z]=Y.useState(""),[q,B]=mt.useState(null),{user:A}=ae(l=>l.auth),{allMedicinesList:Z}=ae(l=>l.labtest),{cartItems:X}=ae(l=>l.checkout),te=((I=X==null?void 0:X.carts)==null?void 0:I.find(l=>(l==null?void 0:l.section_key)===`${c}`))||[],J=Y.useCallback(async()=>{const l=await p(s,A==null?void 0:A.id);E(l)},[p,A==null?void 0:A.id,s]);Y.useEffect(()=>{q&&q!==""&&J()},[q]),Y.useEffect(()=>{R&&R.trim()!==""&&Promise.all([e(),K(),J()])},[R,A==null?void 0:A.id,c,d]);const K=()=>{const l={user_id:A==null?void 0:A.id,section_name:c,type:"Required_Medicine",image_url:v,image_text:R||k};d(vt(l))},ee=l=>{var F;const _=(F=l.target.files)==null?void 0:F[0];if(a(_),_){const P=new FileReader;P.onload=()=>{N(P.result),j(null)},P.readAsDataURL(_)}},W=()=>{const l=document.getElementById("fileInput");l&&l.click()},r=()=>{T&&(n(!0),Yt.recognize(T,"eng",{logger:l=>console.log(l,"info")}).then(({data:{text:l}})=>{const _=l.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\b\w{1,3}\b/g,"").replace(/\s{2,}/g," ");j(_),n(!1)}).catch(l=>{B("No medicines found. Please Upload Another Image."),n(!1),console.log(l,"error")}))},e=async()=>{var _,F;let l={};R&&(l.searchText=R),O(!0);try{const P=await d(yt(l));((F=(_=P==null?void 0:P.payload)==null?void 0:_.data)==null?void 0:F.length)===0?B("No medicines found. Please Upload Another Image."):B(null)}catch{B("An error occurred while fetching the medicines.")}O(!1)},o=async l=>{St(`${l==null?void 0:l.service_name}`,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),w(l)},w=async l=>{const _=[{service_code:l==null?void 0:l.service_code,count:1}],F={carts:[{user_id:A==null?void 0:A.id,useWallet:!0,collection_1_date:null,collection_1_slot:null,medicines:_,attachment_ids:xt(`${c}`),section_key:`${c}`}]};console.log("body1",F),await d(Et(F)),await d(Ot())},f=()=>{U(!0)},L=()=>{const l=t.current.getScreenshot();N(l)},G=()=>{N(null),j(null),B(null),U(!1)};return u.jsxs(Lt,{children:[u.jsx("div",{children:g&&u.jsx(wt,{})}),u.jsxs("div",{className:"scanner-container",children:[u.jsxs("div",{className:"scanner-box",children:[u.jsxs("div",{className:"scanner-image-box",onClick:W,children:[u.jsxs("div",{className:"scanner-icon-box",children:[!T&&!C&&u.jsx("img",{src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/76741-1734102878839.png",alt:"Scan-Logo"}),T&&u.jsx("img",{src:T,alt:"Captured",className:"uploaded-scan-img"}),C&&!T&&u.jsx(Xt,{audio:!1,ref:t,className:"video-div"})]}),u.jsx("input",{id:"fileInput",type:"file",accept:"image/*",className:"d-none",onChange:ee})]}),u.jsx("p",{className:"scanErrorMsg",children:q}),u.jsx("div",{className:"scanned-image-text",children:u.jsx("div",{children:R&&u.jsx("div",{className:"extracted-text-box",children:u.jsx("p",{className:"image-sub-text",children:R})})})}),u.jsx("div",{className:"scanner-image-btn",children:T?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn me-3",onClick:G,children:"Clear Image"}),u.jsx("button",{className:"btn",onClick:r,disabled:y,children:y?u.jsx(u.Fragment,{children:u.jsx("span",{children:"Scanning..."})}):u.jsxs(u.Fragment,{children:[u.jsx("img",{src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/76741-1734103617272.png",alt:"btn-icon",className:"me-3"}),"Scan Medicine"]})})]}):u.jsxs("div",{className:"d-flex justify-content-between align-items-center w-75",children:[!C&&!M&&u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn me-3 ",onClick:W,children:"Gallery"}),u.jsx("button",{className:"btn",onClick:f,children:"Take Photo"})]}),C&&!M&&u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn me-3",onClick:G,children:"Cancel"}),u.jsx("button",{className:"btn ",onClick:L,children:"Click"})]})]})})]}),R?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"suggested-medicines-div",children:[u.jsx("p",{className:"instructions-text",children:"Suggested Medicines"}),u.jsxs("div",{className:"medicinesGridContainer",children:[Z==null?void 0:Z.map(l=>{var F;const _=(F=te==null?void 0:te.medicines)==null?void 0:F.find(P=>(P==null?void 0:P.service_code)===l.service_code);return u.jsx(bt,{medicineDetail:l,isAddedtoCart:_,addToCart:o},l.service_code)}),u.jsx("div",{className:"medicinesErrorMsg",children:u.jsx("p",{className:"scanErrorMsg",children:q})})]})]}),q&&u.jsxs("div",{className:"mt-5 query-input-field",children:[u.jsx("textarea",{placeholder:"Enter Your Query","aria-label":"Recipient's username","aria-describedby":"basic-addon2",className:"form-control shadow-none"}),u.jsx("div",{className:"scanner-image-btn mt-3",children:u.jsx("button",{className:"btn ",children:"Send Query"})})]})]}):u.jsxs("div",{className:"instructions",children:[u.jsx("p",{className:"instructions-text",children:"How to Use the Medicine Scanner"}),u.jsxs("div",{children:[u.jsxs("p",{className:"instructions-sub-text",children:[u.jsx("span",{children:"Prepare Your Prescription:"})," Ensure that your prescription is flat and well-lit. Remove any obstructions or reflections that might interfere with the scan."]}),u.jsxs("p",{className:"instructions-sub-text",children:[u.jsx("span",{children:"Start the Scanning Process:"}),' Click the "Scan" button, Tap it to initiate the scanning process.']}),u.jsxs("p",{className:"instructions-sub-text",children:[u.jsx("span",{children:"Review and Confirm:"})," After scanning, review the captured image for clarity. If it’s not clear, you may need to retake the scan."]})]}),q&&u.jsxs("div",{className:"mt-5 query-input-field",children:[u.jsx("textarea",{placeholder:"Enter Your Query","aria-label":"Recipient's username","aria-describedby":"basic-addon2",className:"form-control shadow-none",onChange:l=>z(l.target.value)}),u.jsx("div",{className:"scanner-image-btn mt-3",children:u.jsx("button",{className:"btn ",onClick:K,children:"Send Query"})})]})]})]})]})};export{rr as default};
