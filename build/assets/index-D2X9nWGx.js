import{d as qo,r as x,b as Qo,j as o,S as kn,bA as wn,bB as Nn,bC as Sn,t as Ro,bD as Cn,aA as Co,s as Pn,bE as Dn,bF as Ho,B as Go,bG as An,bH as Fn,u as Tn,a as zo,bI as En,aH as Jo,bJ as zn,bK as Mn,ay as Ys,bL as Rn,bM as Mo,bN as Un,bO as Ln,aF as Yo,bP as Bn,bQ as Vo,bR as $n,bS as Wn}from"./index-CitTC1Lo.js";import{C as Hn,g as Ko}from"./CartItemsSection-mZrJxjbg.js";import{P as Gn}from"./Ellipse1-DDKjwPXw.js";import{O as Jn}from"./OrderConformation-BwuikF8W.js";const Yn=qo.div`
  width: 100%;
  padding-top: 24px;
  background: #f6f9fd;
  .cart-full-page {
    width: 90%;
    margin: auto;
  }
  .cart-page-content {
    display: flex;
    gap: 1.5rem;
  }
  .wallet_checbox_box {
    height: 20px;
    width: 20px;
    cursor: pointer;
  }
  .checkout-final-amount-sec-ambulance {
    margin-top: 15px;
  }
  .no-results-sec {
    text-align: center;
    padding-top: 100px;
    min-height: 600px;
    button {
      border-radius: 45px;
      border: none;
      /* width: 100%; */
      font-size: 18px;
      color: #252b61;
      font-family: Outfit, sans-serif;
      background: #252b61;
      color: #fff;
      padding: 5px 20px;
    }
  }
  .cart-content-left {
    border-radius: 10px;
    width: 60%;
    // box-shadow: 2px 2px 19px 0px rgba(0, 0, 0, 0.1);
    // background: #fff;
    // padding: 20px;
  }

  .cart-content-right {
    margin-top: 2rem;
    border-radius: 10px;
    background: #fff;
    box-shadow: 2px 2px 19px 0px rgba(0, 0, 0, 0.1);
    width: 40%;
    padding: 20px;
  }
  .checkout-item-box {
  }
  .checkout-item-box-main {
    // border: 1px solid #e2e2e2;
    padding: 16px;
    // border-radius: 4px;
    background: #fff;
    box-shadow: 2px 2px 19px 0px rgba(0, 0, 0, 0.1);
    padding: 20px;
    margin-bottom: 24px;
    > div:not(:last-child) {
      border-bottom: 1px solid #e2e2e2;
      margin-bottom: 15px;
      padding-bottom: 15px;
    }
  }

  .cart-top-back {
    margin-bottom: 24px;
  }
  .cart-address-top {
    display: flex;
    gap: 14px;
    justify-content: space-between;
  }
  .your-cart-sec {
    color: #000;
    font-size: 18px;
    font-style: normal;
    font-weight: 500;
    line-height: normal;
    opacity: 0.6;
  }
  .checkout-items-all {
    margin-bottom: 24px;
  }
  .checkout-item-box-header {
    display: flex;
    justify-content: space-between;
    p {
      margin-bottom: 10px;
    }
    .item-box-left {
      // #8d8d8d;
      color: #000;
      font-size: 16px;
      font-style: normal;
      font-weight: 500;
      line-height: normal;
    }
    .item-box-right span {
      color: #000;
      font-size: 12px;
      font-style: normal;
      font-weight: 400;
      line-height: 20px; /* 166.667% */
      letter-spacing: 0.3px;
      text-decoration-line: underline;
      opacity: 0.5;
      cursor: pointer;
    }
  }
  .remove-sec-cont1 {
    color: #000;
    font-size: 12px;
    font-style: normal;
    font-weight: 400;
    line-height: 20px; /* 166.667% */
    letter-spacing: 0.3px;
    text-decoration-line: underline;
    opacity: 0.5;
    cursor: pointer;
  }
  .vir-name-sec-left {
    color: #000;
    font-size: 16px;
    font-style: normal;
    font-weight: 500;
    line-height: 20px;
    letter-spacing: 0.4px;
    opacity: 0.8;
  }
  .total-price-sec {
    display: flex;
    justify-content: space-between;
    border-radius: 0px 0px 5px 5px;
    border-top: 0.5px solid #8d8d8d;
    background: #fff;
    padding-top: 20px;
    padding-bottom: 20px;
    p {
      color: #000;
      font-size: 18px;
      font-style: normal;
      font-weight: 500;
      line-height: 20px; /* 111.111% */
      letter-spacing: 0.45px;
    }
  }

  .body-top-left,
  .dr-content-sec-content {
    > div:not(:last-child) {
      margin-bottom: 14px;
    }
  }
  .body-top-left-header {
    display: flex;
    justify-content: space-between;
  }

  .checkout-item-box-body {
    p {
      margin-bottom: 1px;
    }
  }
  .dr-content-sec-full {
    display: flex;
    gap: 16px;
    .dr-img img {
      height: 38px;
      width: 38px;
      border-radius: 100%;
    }
    .pat-img img {
      height: 27px;
    }
    .dr-content {
      .dr-name {
        color: #000;
        font-size: 14px;
        font-style: normal;
        font-weight: 500;
        line-height: 20px; /* 142.857% */
        letter-spacing: 0.35px;
        opacity: 0.8;
      }
      .dr-caregory {
        color: #000;
        font-size: 10px;
        font-style: normal;
        font-weight: 500;
        line-height: 20px; /* 200% */
        letter-spacing: 0.25px;
        opacity: 0.5;
        margin-bottom: 0px;
      }
    }
    .pat-name {
      color: #000;
      opacity: 0.8;
      font-size: 14px;
      font-style: normal;
      font-weight: 500;
      line-height: 20px; /* 142.857% */
      letter-spacing: 0.35px;
      padding-top: 5px;
      margin-bottom: 0px;
    }
  }
  .checkout-name-sec {
    color: #000;
    font-size: 14px;
    font-style: normal;
    opacity: 0.8;
    font-weight: 500;
    line-height: 20px; /* 166.667% */
    letter-spacing: 0.3px;
  }
  .checkout-final-amount-sec {
    color: #000;
    font-size: 16px;
    font-style: normal;
    // opacity: 0.8;
    font-weight: 600;
    line-height: 20px; /* 166.667% */
    letter-spacing: 0.3px;
  }
  .checkout-name-sec span:nth-child(1),
  .pat-img,
  .dr-img {
    width: 70px;
    display: inline-block;
  }
  .checkout-pha-items-footer {
    display: flex;
    justify-content: space-between;
    border-top: 1px solid #e2e2e2;
    padding-top: 20px;
    p {
      margin-bottom: 5px;
    }
    .d-paha-name {
      color: #000;
      font-size: 16px;
      font-style: normal;
      font-weight: 500;
      line-height: 20px; /* 125% */
      letter-spacing: 0.4px;
    }
    .d-paha-address {
      color: #000;
      font-size: 13px;
      font-style: normal;
      font-weight: 500;
      line-height: 20px; /* 200% */
      letter-spacing: 0.25px;
      opacity: 0.5;
    }
    span {
      color: #9747ff;
      font-size: 14px;
      font-style: normal;
      font-weight: 600;
      line-height: 20px; /* 166.667% */
      letter-spacing: 0.3px;
      cursor: pointer;
    }
  }
  .checkout-page-design1 {
    .dr-content-sec-content {
      margin-top: -10px;
      display: grid;
      grid-template-columns: 1fr 1fr;
    }
    .checkout-name-sec span:nth-child(1),
    .pat-img,
    .dr-img {
      width: auto;
      display: inline-block;
      margin-right: 12px;
    }
  }
  .sec-right-content-box {
    margin-bottom: 30px;
    h3 {
      color: #000;
      font-size: 16px;
      font-style: normal;
      font-weight: 500;
      line-height: normal;
      margin-bottom: 20px;
    }
  }
  .billing-details-sec {
    border-radius: 2px;
    background: #fff;
    box-shadow: 2px 2px 19px 0px rgba(0, 0, 0, 0.1);
    p {
      display: flex;
      justify-content: space-between;
      color: #000;
      font-size: 16px;
      font-style: normal;
      font-weight: 400;
      line-height: 50px;
      padding-left: 15px;
      padding-right: 20px;
      margin-bottom: 0px;
    }

    p:not(:last-child) {
      border-bottom: 1px solid #e2e2e2;
    }
  }
  .coupon-sec-checkout {
    border-radius: 2px;
    background: #fff;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 2px 2px 19px 0px rgba(0, 0, 0, 0.1);
  }
  .billing-details-sec {
    .final-pmt {
      font-weight: 600;
    }
    .final-dis-pmt {
      color: #34a853;
      font-weight: 600;
    }
    .tot-amt-pmt {
      font-weight: 500;
    }
  }
  .wallet-sec-cont {
    input {
      margin-left: 20px;
    }
  }
  .checkout-pay-buttom.checkout-btn-blue button {
    background-color: rgb(19, 100, 241);
  }
  .checkout-pay-buttom.checkout-btn-green button {
    background-color: #16c47f;
    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  }
  .checkout-pay-buttom {
    margin-bottom: 20px;
    button {
      width: 100%;
      height: 56px;
      border-radius: 2px;
      background: #9747ff;
      border: none;
      color: #fff;
      font-size: 16px;
      font-style: normal;
      font-weight: 600;
      line-height: normal;
      box-shadow: 2px 2px 19px 0px rgba(0, 0, 0, 0.1);
      cursor: pointer;
    }
  }
  @media (max-width: 768px) {
    .cart-page-content {
      flex-direction: column;
      gap: 1rem; /* Adjust the gap for mobile view */
    }

    .cart-content-left,
    .cart-content-right {
      width: 100%;
    }
    .cart-top-back {
      margin-top: 20px;
    }
  }

  .delivery-time {
    border-radius: 10px;
    background: #fff;
    box-shadow: 2px 2px 19px 0px rgba(0, 0, 0, 0.1);
    padding: 20px 30px;
    /* text-align: center; */
  }
  .delivery-time h2 {
    color: #000;
    font-size: 18px;
    font-style: normal;
    font-weight: 500;
    line-height: normal;
  }
  .delivery-time span {
    color: #188e04;
    font-size: 18px;
    font-style: normal;
    font-weight: 600;
    line-height: normal;
  }
  .delivery-time p {
    color: #000;
    font-size: 14px;
    font-style: normal;
    font-weight: 500;
    line-height: normal;
    opacity: 0.6;
    margin-bottom: 0;
  }
  .medRecords {
    background: rgba(37, 43, 97, 0.9);
    color: #fff;
  }
`,Vn=qo.div`
  margin-top: 2rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  p {
    margin-bottom: 0;
    font-weight: bold;
  }
  .search-bar {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 0.5rem;
  }
  .issues-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .issue-tag {
    display: flex;
    align-items: center;
    padding: 4px 8px;
    border-radius: 7px;
    border: 2px solid #f9e9e9;
    color: #5a4a4a;
    font-size: 0.9em;
  }

  .issue-tag:hover {
    background-color: #f2e4e4;
  }

  .delete-icon {
    margin-left: 8px;
    cursor: pointer;
    background-image: none;
    color: #a05858;
    &:hover {
      color: #d17a7a;
    }
  }

  .searchIssues,
  .viewIssues {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .viewIssues {
    textarea {
      border: 1px solid #40a9ff;
      border-radius: 10px;
    }
  }
`,Vs=({handleSelectSymptom:Po,issues:D,setIssues:ao,caption:po})=>{const[co,E]=x.useState(""),[ho,eo]=x.useState(""),[H,L]=x.useState([]),I=Qo(),z=x.useRef(null),[uo,G]=x.useState(!1);x.useEffect(()=>{const f=D.map((j,b)=>`${b+1}. ${j}`).join(`
`);eo(f)},[D]);const lo=async f=>{if(E(f),f.trim())try{const j=await I(Cn(f)),t=((j==null?void 0:j.payload)||[]).map(i=>({value:i,label:i})),oo={value:f,label:f},F=[...new Set([...t.map(i=>i.value),oo.value])].map(i=>({value:i,label:i}));L(F)}catch(j){console.error("Error fetching search suggestions:",j),L([{value:f,label:f}])}else L([])},m=f=>{if(D.includes(f)){Ro.error(`Duplicate Symptom detected: ${f}`),E("");return}Po(f),E("")},go=()=>{if(!("webkitSpeechRecognition"in window)){alert("Sorry, your browser does not support speech recognition.");return}Ro.success("Mic is enabled you can start Talking"),z.current&&z.current.abort();const f=new window.webkitSpeechRecognition;f.lang="en-US",f.interimResults=!1,f.maxAlternatives=1,z.current=f,f.start(),f.onresult=j=>{const b=j.results[0][0].transcript;console.log("speech : ",b),b&&(E(b),lo(b),G(!0))},f.onerror=j=>{Ro.error("Mic is already enabled. You can start talking.")},f.onend=()=>{z.current=null}},xo=f=>{ao(D.filter((j,b)=>b!==f))};return o.jsx(Vn,{children:o.jsxs("div",{className:"multiGglSelectWrapper",children:[o.jsxs("div",{className:"searchIssues",children:[o.jsxs("p",{children:["Enter ",po]}),o.jsxs("div",{className:"search-bar relative",children:[o.jsx(kn,{showSearch:!0,value:co,placeholder:"Search Issue",onSearch:lo,onSelect:m,options:H,style:{width:"100%"},className:"pl-8 symptomSearch",filterOption:!1,dropdownRender:f=>o.jsx("div",{className:"p-1",children:f}),open:uo,onDropdownVisibleChange:f=>G(f),getPopupContainer:f=>f.parentNode}),o.jsx(wn,{className:"cursor-pointer",onClick:go})]}),o.jsx("div",{className:"issues-list",children:D.length>0&&(D==null?void 0:D.map((f,j)=>o.jsxs("div",{className:"issue-tag",children:[f,o.jsx(Nn,{className:"icon delete-icon",onClick:()=>xo(j)})]},j)))})]}),D.length>0&&o.jsxs("div",{className:"viewIssues",children:[o.jsx("p",{children:po}),o.jsx(Sn.TextArea,{value:ho,readOnly:!0,rows:3,style:{width:"100%",overflow:"scroll"}})]})]})})},Kn=qo.div`
  .modal-footer {
    button {
      width: 300px;
    }
  }

  .multiGglSelectWrapper {
    display: flex;
    flex-direction: row;
    gap: 3rem;

    .searchIssues,
    .viewIssues {
      width: 100%;
    }
  }
`,qn=({show:Po,selectedCartItemId:D,onClose:ao,handleSavePastData:po})=>{const[co,E]=x.useState([]),[ho,eo]=x.useState(!1),[H,L]=x.useState([]),[I,z]=x.useState([]);x.useEffect(()=>{E([]),L([]),z([])},[D]);const uo=Qo(),G=j=>{j&&L(b=>[...b,j.trim()])},lo=j=>{j&&z(b=>[...b,j.trim()])},m=async j=>{var b;try{const t={id:`${Date.now()}`,ext:".png"},F=(b=(await uo(An(t))).payload)==null?void 0:b.signedUrL;return await Fn.put(F.signedUrL,j,{headers:{"Content-Type":"image/png"}}),F.publicUrl}catch(t){throw console.error("Error uploading image to S3:",t),t}},go=async j=>{const b=j.target.files;if((b==null?void 0:b.length)>0)try{eo(!0);const t=Array.from(b).map(F=>m(F)),oo=await Promise.all(t);E(F=>[...F,...oo])}catch{Ro.error("Error uploading images. Please try again.")}finally{eo(!1)}},xo=()=>{ao()},f=()=>{po({pastIssues:I,issues:H,imageUrls:co,id:D}),ao()};return o.jsx(Co,{show:Po,onHide:ao,size:"lg",centered:!0,children:o.jsxs(Kn,{children:[o.jsx(Co.Header,{closeButton:!0,children:o.jsx(Co.Title,{children:"Additional Illnesses"})}),o.jsxs(Co.Body,{children:[ho&&o.jsx(Pn,{}),o.jsx(Vs,{handleSelectSymptom:lo,issues:I,setIssues:z,caption:"Past Medical Issues"}),o.jsx(Vs,{handleSelectSymptom:G,issues:H,setIssues:L,caption:"Present Symptoms"}),o.jsx(Dn,{className:"my-3",children:o.jsxs("div",{className:"d-flex flex-col imagesPreview justify-content-between",children:[o.jsxs(Ho.Group,{controlId:"media",children:[o.jsx(Ho.Label,{className:"note-label mt-3",children:"Upload Images"}),o.jsx(Ho.Control,{type:"file",accept:"image/png",onChange:go,multiple:!0})]}),o.jsx("div",{className:"d-flex flex-col flex-wrap gap-2 mt-3 justify-content-center",children:co.map((j,b)=>o.jsxs("div",{style:{position:"relative",width:"150px",height:"150px"},children:[o.jsx("img",{src:j,alt:`Uploaded ${b+1}`,style:{width:"100%",height:"100%",objectFit:"cover"}}),o.jsx(Go,{variant:"danger",size:"sm",style:{position:"absolute",top:"5px",right:"5px",padding:"0px 6px",minWidth:"20px",minHeight:"20px",borderRadius:"50%",zIndex:2},onClick:()=>E(t=>t.filter((oo,F)=>F!==b)),children:"Ã—"})]},b))})]})})]}),o.jsxs(Co.Footer,{className:"d-flex flex-column align-items-center gap-2 ",children:[o.jsx(Go,{variant:"outline-secondary",onClick:xo,children:"Skip"}),o.jsx(Go,{variant:"primary",onClick:f,children:"Save"})]})]})})},oa=()=>{var cs,es,ls,rs,ds,ps,hs,us,gs,xs,fs,is,ys,_s;const[Po,D]=x.useState(null),[ao,po]=x.useState(!1),[co,E]=x.useState(!1),[ho,eo]=x.useState(!1),[H,L]=x.useState(""),[I,z]=x.useState(""),[uo,G]=x.useState({}),[lo,m]=x.useState(!1),[go,xo]=x.useState(""),[f,j]=x.useState([]),b=Tn(),t=Qo();let oo="https://raphacure-public-images.s3.ap-south-1.amazonaws.com/105748-1736338140063.png",F="https://raphacure-public-images.s3.ap-south-1.amazonaws.com/105748-1736338333932.png";const{user:i,isRaphaPlus:Ks,subDomainDetails:Do,subDomainName:Zo}=zo(n=>n.auth),{cartItems:r,bookingInfo:qs,checkoutSelectedAddress:B,checkoutSelectedUser:A}=zo(n=>n.checkout),{userDependents:fo,userAddress:Ao}=zo(n=>n.profile),{myAllSubscriptions:R}=zo(n=>n.dashboard);console.log("cartItems : ",r);const so=(cs=Do==null?void 0:Do.agreed_services)==null?void 0:cs.hide_price,[v,Qs]=x.useState([]),Uo=((es=r==null?void 0:r.carts)==null?void 0:es.find(n=>(n==null?void 0:n.section_key)==="pharmacy"))??[];(ls=Uo==null?void 0:Uo.medicines)==null||ls.length;const[Xo,Zs]=x.useState(!1),[Xs,Oo]=x.useState(!1),[Os,Is]=x.useState(""),[no,Io]=x.useState([]),[ms,on]=x.useState(!1);x.useEffect(()=>{Io(r)},[r]),x.useEffect(()=>{var d;const n=(d=r==null?void 0:r.carts)==null?void 0:d.some(c=>(c==null?void 0:c.section_key)==="pharmacy");Zs(n)},[r==null?void 0:r.carts]);const[sn,ro]=x.useState(!1),[nn,Fo]=x.useState(!1),[Qn,an]=x.useState(0),[cn,en]=x.useState(0),[Zn,mo]=x.useState(0),ln=`${i==null?void 0:i.first_name} ${i==null?void 0:i.last_name}`;console.log("bookingInfo",qs),console.log("myAllSubscriptions",R),console.log("cartItems",r),x.useEffect(()=>{t(En()),hn(),t(Jo()),window&&typeof window.PhonePeCheckout>"u"&&os("https://mercury-stg.phonepe.com/web/bundle/checkout.js",!0)},[]),x.useEffect(()=>{const n=document.createElement("script");return n.src="https://checkout.razorpay.com/v1/checkout.js",n.async=!0,n.onload=()=>{console.log("Razorpay script loaded successfully")},n.onerror=d=>{console.error("Error loading Razorpay script:",d)},document.body.appendChild(n),()=>{document.body.removeChild(n)}},[]);const $=(n,d)=>{var c=0;return d!=null&&d.amount?(console.log("discountObj discountObj",d),d!=null&&d.is_checked?(console.log("discountObj discountObj",!0),n>=(d==null?void 0:d.amount)?c=n-(d==null?void 0:d.amount):n<(d==null?void 0:d.amount)&&(c=0)):(c=n,console.log("discountObj discountObj",!1))):d!=null&&d.discount_percentage&&(console.log("finalAmount1"),c=n*((100-(d==null?void 0:d.discount_percentage))/100),c=c?parseInt(c==null?void 0:c.toFixed(2)):0),c},rn=n=>{var c;let d=0;return(c=r==null?void 0:r.carts)==null||c.map(l=>{var p,s,a,u,g,y,k,w,N,S,C;if(n===(l==null?void 0:l.categoryName))if((l==null?void 0:l.categoryName)=="pharmacy")d=((p=l==null?void 0:l.price)==null?void 0:p.discounted_price)*(l==null?void 0:l.count)+d;else if((l==null?void 0:l.categoryName)=="doctor"){let h=0;(l==null?void 0:l.consultationType)==="OPD"?h=((s=l==null?void 0:l.doctorDetails)==null?void 0:s.consultation_cost)||0:(l==null?void 0:l.consultationType)==="CHAT"?h=((a=l==null?void 0:l.doctorDetails)==null?void 0:a.chat_consultation_cost)||0:h=((u=l==null?void 0:l.doctorDetails)==null?void 0:u.virtual_consultation_cost)||0,d=h+d}else console.log("vinod ittem",l),d=(((((g=l.patientsDetails)==null?void 0:g.relation)==="Self"?!0:!!((k=(y=l.doctorDetails)==null?void 0:y.price)!=null&&k.discount_for_dependents))?(N=(w=l==null?void 0:l.doctorDetails)==null?void 0:w.price)==null?void 0:N.discounted_price:(C=(S=l==null?void 0:l.doctorDetails)==null?void 0:S.price)==null?void 0:C.actual_cost)||0)+d}),d},dn=n=>{var c;let d=0;return(c=r==null?void 0:r.carts)==null||c.map(l=>{var s,a,u,g,y;if(n===(l==null?void 0:l.categoryName)&&((s=l==null?void 0:l.hospitalDetails)!=null&&s.vendorId)){var p=((u=(a=l==null?void 0:l.doctorDetails)==null?void 0:a.price)==null?void 0:u.discounted_price)||((g=l==null?void 0:l.doctorDetails)==null?void 0:g.virtual_consultation_cost)||((y=l==null?void 0:l.doctorDetails)==null?void 0:y.consultation_cost)||0;d=p+d}}),d},pn=n=>{var c;let d=0;return(c=r==null?void 0:r.carts)==null||c.map(l=>{var s,a,u,g,y;if(n===(l==null?void 0:l.categoryName)&&!((s=l==null?void 0:l.hospitalDetails)!=null&&s.vendorId)){var p=((u=(a=l==null?void 0:l.doctorDetails)==null?void 0:a.price)==null?void 0:u.discounted_price)||((g=l==null?void 0:l.doctorDetails)==null?void 0:g.virtual_consultation_cost)||((y=l==null?void 0:l.doctorDetails)==null?void 0:y.consultation_cost)||0;d=p+d}}),d};x.useEffect(()=>{var n,d;if(console.log("cartItemscartItems vinod 1111",r),((n=r==null?void 0:r.carts)==null?void 0:n.length)>0){let c=0,l=0,p=[];console.log("cartItemscartItems vinod",r),(d=r==null?void 0:r.carts)==null||d.map(a=>{var y,k,w,N,S,C,h,_,T,J,Y,V,K,q,Q,Z,X,io,yo,e,O,_o,bo,jo,vo,to;if((a==null?void 0:a.section_key)==="pharmacy")l=((y=a==null?void 0:a.price)==null?void 0:y.discounted_price)*(a==null?void 0:a.count)+l,c=((k=a==null?void 0:a.price)==null?void 0:k.actual_cost)*(a==null?void 0:a.count)+c,console.log("itemsTotalAmount1",c);else{var u=0;(a==null?void 0:a.section_key)==="doctor"?(a==null?void 0:a.consultationType)==="OPD"?u=((w=a==null?void 0:a.doctorDetails)==null?void 0:w.consultation_cost)||0:(a==null?void 0:a.consultationType)==="CHAT"?u=((N=a==null?void 0:a.doctorDetails)==null?void 0:N.chat_consultation_cost)||0:u=((S=a==null?void 0:a.doctorDetails)==null?void 0:S.virtual_consultation_cost)||0:(a==null?void 0:a.categoryName)==="labtest"?(C=a==null?void 0:a.doctorDetails)!=null&&C.tests&&((h=a==null?void 0:a.doctorDetails)==null?void 0:h.tests.length)>0&&((_=a==null?void 0:a.doctorDetails)==null||_.tests.forEach(U=>{var P;u+=(P=U==null?void 0:U.price)==null?void 0:P.actual_cost})):u=((T=a==null?void 0:a.price)==null?void 0:T.actual_cost)||((Y=(J=a==null?void 0:a.doctorDetails)==null?void 0:J.price)==null?void 0:Y.actual_cost)||0,c=u+c;var g=0;if((a==null?void 0:a.section_key)==="doctor")(a==null?void 0:a.consultationType)==="OPD"?g=((V=a==null?void 0:a.doctorDetails)==null?void 0:V.consultation_cost)||0:(a==null?void 0:a.consultationType)==="CHAT"?g=((K=a==null?void 0:a.doctorDetails)==null?void 0:K.chat_consultation_cost)||0:g=((q=a==null?void 0:a.doctorDetails)==null?void 0:q.virtual_consultation_cost)||0;else if((a==null?void 0:a.categoryName)==="labtest"){let U=!1;(Q=a==null?void 0:a.doctorDetails)!=null&&Q.tests&&((Z=a==null?void 0:a.doctorDetails)==null?void 0:Z.tests.length)>0&&((X=a==null?void 0:a.doctorDetails)==null||X.tests.forEach(P=>{var ko,wo,No,So;U=((ko=a.patientsDetails)==null?void 0:ko.relation)==="Self"?!0:!!((wo=P==null?void 0:P.price)!=null&&wo.discount_for_dependents),g+=U?(No=P==null?void 0:P.price)==null?void 0:No.discounted_price:(So=P==null?void 0:P.price)==null?void 0:So.actual_cost}))}else g=(((io=a.patientsDetails)==null?void 0:io.relation)==="Self"?!0:!!((e=(yo=a.doctorDetails)==null?void 0:yo.price)!=null&&e.discount_for_dependents))?((O=a==null?void 0:a.price)==null?void 0:O.discounted_price)||((bo=(_o=a==null?void 0:a.doctorDetails)==null?void 0:_o.price)==null?void 0:bo.discounted_price):((jo=a==null?void 0:a.price)==null?void 0:jo.actual_cost)||((to=(vo=a==null?void 0:a.doctorDetails)==null?void 0:vo.price)==null?void 0:to.actual_cost)||0;l=g+l,console.log("ittemittem",a),console.log("itemsTotalAmount1",c),console.log("finalAmount1",l)}p.includes(a==null?void 0:a.section_key)||p.push(a==null?void 0:a.section_key)});let s=[];p.map(a=>{var g;const u=(g=r==null?void 0:r.carts)==null?void 0:g.filter(y=>a===y.section_key);s.push({section_key:a,products:u})}),console.log("allSecNames",p),console.log("finalList",s),an(c),en(l),mo(l),Qs(s)}},[(rs=r==null?void 0:r.carts)==null?void 0:rs.length,f,r]),console.log("CartFinalList",v),x.useEffect(()=>{var n=cn;v==null||v.map(d=>{const c=d==null?void 0:d.categoryName;var l=rn(c),p=dn(c),s=pn(c);console.log("isnisn section",c),console.log("cPrice",l),console.log("opdPrice",p),console.log("virtualPrice",s),l>0&&f.map(a=>{if((a==null?void 0:a.type)==="pharmacy"&&c==="pharmacy"){const u=$(l,a),g=l-u;n=n-g}else if((a==null?void 0:a.type)==="ctmri_tests"&&c==="ctmri"){const u=$(l,a),g=l-u;n=n-g}else if((a==null?void 0:a.type)==="dental_consultation"&&c==="dentalcare"){const u=$(l,a),g=l-u;n=n-g}else if((a==null?void 0:a.type)==="gym_subscription"&&c==="gym"){const u=$(l,a),g=l-u;n=n-g}else if((a==null?void 0:a.type)==="eye_consultation"&&c==="eyecare"){const u=$(l,a),g=l-u;n=n-g}else if((a==null?void 0:a.type)==="diagnostic_tests"&&c==="labtest"){const u=$(l,a),g=l-u;n=n-g}else if((a==null?void 0:a.type)==="ambulance"&&c==="ambulance"){const u=$(l,a),g=l-u;n=n-g}else if((a==null?void 0:a.type)==="opd_consultation"&&c==="doctor"){if(p>0){const u=$(p,a);console.log("dPricedPrice",u);const g=p-u;n=n-g}}else if((a==null?void 0:a.type)==="virtual_consultation"&&c==="doctor"&&s>0){const u=$(s,a),g=parseInt(s)-u;n=n-g}})}),mo(n)},[v,f]),x.useEffect(()=>{var d,c;const n=[];(f==null?void 0:f.length)===0&&((d=r==null?void 0:r.carts)==null?void 0:d.length)>0&&((c=R==null?void 0:R.wallets)==null?void 0:c.length)>0&&((R==null?void 0:R.wallets).map(p=>{var a,u,g,y,k,w,N,S,C;var s={};(p==null?void 0:p.type)=="opd_consultation"?s=(a=r==null?void 0:r.carts)==null?void 0:a.find(h=>{var _;return((_=h==null?void 0:h.hospitalDetails)==null?void 0:_.vendorId)&&(h==null?void 0:h.section_key)==="doctor"}):(p==null?void 0:p.type)=="virtual_consultation"?s=(u=r==null?void 0:r.carts)==null?void 0:u.find(h=>{var _;return!((_=h==null?void 0:h.hospitalDetails)!=null&&_.vendorId)&&(h==null?void 0:h.section_key)==="doctor"}):(p==null?void 0:p.type)=="ctmri_tests"?s=(g=r==null?void 0:r.carts)==null?void 0:g.find(h=>(h==null?void 0:h.section_key)==="ctmri"):(p==null?void 0:p.type)=="dental_consultation"?s=(y=r==null?void 0:r.carts)==null?void 0:y.find(h=>(h==null?void 0:h.section_key)==="dentalcare"):(p==null?void 0:p.type)=="gym_subscription"?s=(k=r==null?void 0:r.carts)==null?void 0:k.find(h=>(h==null?void 0:h.section_key)==="gym"):(p==null?void 0:p.type)=="eye_consultation"?s=(w=r==null?void 0:r.carts)==null?void 0:w.find(h=>(h==null?void 0:h.section_key)==="eyecare"):(p==null?void 0:p.type)=="diagnostic_tests"?s=(N=r==null?void 0:r.carts)==null?void 0:N.find(h=>(h==null?void 0:h.section_key)==="labtest"):(p==null?void 0:p.type)=="ambulance"?s=(S=r==null?void 0:r.carts)==null?void 0:S.find(h=>(h==null?void 0:h.section_key)==="ambulance"):(p==null?void 0:p.type)=="pharmacy"&&(s=(C=r==null?void 0:r.carts)==null?void 0:C.find(h=>(h==null?void 0:h.section_key)==="pharmacy")),s!=null&&s.section_key&&n.push(p)}),j(n))},[R==null?void 0:R.wallets,r==null?void 0:r.length]);const hn=()=>{console.log("userDependents",fo),console.log("userDependcheckoutSelectedUserents",A),(fo==null?void 0:fo.length)>0&&!(A!=null&&A.id)&&t(zn(fo[0])),(Ao==null?void 0:Ao.length)>0&&!(B!=null&&B.id)&&t(Mn(Ao[0]))},To=n=>{L(n),m(!0),xo(`Are you sure, Do you want to delete ${$o(n)} Section?`)},un=async()=>{console.log("deleteConformSection",H),H&&(console.log("cartitems",r),ro(!0),await t(Ln(H)),await t(Jo()),ro(!1))},gn=()=>{b.push("/cart")},xn=n=>{var d=!1;return f.map(c=>{var l,p;(c==null?void 0:c.type)=="opd_consultation"&&(n==null?void 0:n.categoryName)==="doctor"&&((l=n==null?void 0:n.hospitalDetails)!=null&&l.vendorId)||(c==null?void 0:c.type)=="virtual_consultation"&&!((p=n==null?void 0:n.hospitalDetails)!=null&&p.vendorId)&&(n==null?void 0:n.categoryName)==="doctor"||(c==null?void 0:c.type)=="ctmri_tests"&&(n==null?void 0:n.categoryName)==="ctmri"||(c==null?void 0:c.type)=="diagnostic_tests"&&(n==null?void 0:n.categoryName)==="labtest"||(c==null?void 0:c.type)=="ambulance"&&(n==null?void 0:n.categoryName)==="ambulance"||(c==null?void 0:c.type)=="dental_consultation"&&(n==null?void 0:n.categoryName)==="dentalcare"||(c==null?void 0:c.type)=="gym_subscription"&&(n==null?void 0:n.categoryName)==="gym"||(c==null?void 0:c.type)=="eye_consultation"&&(n==null?void 0:n.categoryName)==="eyecare"?((c==null?void 0:c.discount_percentage)>0||c!=null&&c.is_checked)&&(d=!0):(c==null?void 0:c.type)=="pharmacy"&&(n==null?void 0:n.categoryName)==="pharmacy"&&((c==null?void 0:c.discount_percentage)>0||c!=null&&c.is_checked)&&(d=!0)}),d},os=(n,d=!0)=>{let c=document.createElement("script");c.setAttribute("src",n),c.setAttribute("type","text/javascript"),c.setAttribute("async",d),document.body.appendChild(c),c.addEventListener("load",()=>{console.log("File loaded"),window&&window.PhonePeCheckout&&window.PhonePeCheckout.transact&&window.PhonePeCheckout.transact(window.phonePeObj)}),c.addEventListener("error",l=>{console.log("Error on loading file",l)})},fn=n=>{var d,c,l,p,s,a,u,g,y,k,w,N;console.log("phonepe paymentObj : ",n),(l=(c=(d=n==null?void 0:n.order_data)==null?void 0:d.instrumentResponse)==null?void 0:c.redirectInfo)!=null&&l.url?(window.phonePecallback=S=>{if(S==="USER_CANCEL"){Bo();return}else if(S==="CONCLUDED"){console.log("going to dashboard"),localStorage.removeItem("raphaCart"),t(Vo([])),G(n),Fo(!0);return}},(a=(s=(p=n==null?void 0:n.order_data)==null?void 0:p.instrumentResponse)==null?void 0:s.redirectInfo)!=null&&a.url&&(window&&window.PhonePeCheckout&&window.PhonePeCheckout.transact?window.PhonePeCheckout.transact({tokenUrl:(y=(g=(u=n==null?void 0:n.order_data)==null?void 0:u.instrumentResponse)==null?void 0:g.redirectInfo)==null?void 0:y.url,callback:window==null?void 0:window.phonePecallback,type:"IFRAME"}):(window.phonePeObj={tokenUrl:(N=(w=(k=n==null?void 0:n.order_data)==null?void 0:k.instrumentResponse)==null?void 0:w.redirectInfo)==null?void 0:N.url,callback:window.phonePecallback,type:"IFRAME"},os("https://mercury-stg.phonepe.com/web/bundle/checkout.js",!0)))):(console.log("going to dashboard"),Bo())},Eo=async(n,d=!1)=>{var u,g,y,k,w,N,S,C,h,_,T,J,Y,V,K,q,Q,Z,X,io,yo;z("");let c=[],l=[];var p=!1;(u=no==null?void 0:no.carts)==null||u.map(e=>{var _o,bo,jo,vo,to,U,P,ko,wo,No,So,bs,js,vs,ts,ks,ws,Ns,Ss,Cs,Ps,Ds,As,Fs,Ts,Es,zs,Ms,Rs,Us,Ls,Bs,$s,Ws,Hs,Gs;const O=xn(e);if((e==null?void 0:e.categoryName)==="pharmacy")c.push({...e,isCod:(e==null?void 0:e.isCod)||!1,attachmentImages:(e==null?void 0:e.attachmentImages)||[],comments:(e==null?void 0:e.comments)||""}),p=O;else if((e==null?void 0:e.categoryName)==="ambulance"){const M={test_code:e==null?void 0:e.service_code,useWallet:O,address:e==null?void 0:e.fromAddress,to_address:e==null?void 0:e.toAddress,address_id:(_o=e==null?void 0:e.address)==null?void 0:_o.id,user_id:i==null?void 0:i.id,collection_1_date:e==null?void 0:e.collection_1_date};l.push(M)}else if((e==null?void 0:e.categoryName)==="gym"){const M={test_code:(bo=e==null?void 0:e.doctorDetails)==null?void 0:bo.service_code,useWallet:O,user_id:i==null?void 0:i.id,vendor_id:((jo=e==null?void 0:e.hospitalDetails)==null?void 0:jo.vendorId)||((vo=e==null?void 0:e.hospitalDetails)==null?void 0:vo.id),collection_1_date:(to=e==null?void 0:e.slot1)==null?void 0:to.dateStr,collection_1_slot:(P=(U=e==null?void 0:e.slot1)==null?void 0:U.slot)==null?void 0:P.slot,collection_2_date:(ko=e==null?void 0:e.slot2)==null?void 0:ko.dateStr,collection_2_slot:(No=(wo=e==null?void 0:e.slot2)==null?void 0:wo.slot)==null?void 0:No.slot};l.push(M)}else if((e==null?void 0:e.categoryName)==="labtest"){let M=[],Js;(So=e.doctorDetails)!=null&&So.tests&&((bs=e.doctorDetails)==null?void 0:bs.tests.length)>0&&((js=e.doctorDetails)==null||js.tests.forEach(W=>{(W==null?void 0:W.labtestType)==="labpackage"?Js=W==null?void 0:W.service_code:M.push(W==null?void 0:W.service_code)}));const tn={test_code:void 0,package_code:Js,test_codes:(M==null?void 0:M.length)>0?M:void 0,useWallet:O,vendor_id:((vs=e==null?void 0:e.hospitalDetails)==null?void 0:vs.vendorId)||((ts=e==null?void 0:e.hospitalDetails)==null?void 0:ts.id),address_id:(ks=e==null?void 0:e.address)==null?void 0:ks.id,user_id:(ws=e==null?void 0:e.patientsDetails)==null?void 0:ws.id,collection_1_date:(Ns=e==null?void 0:e.slot1)==null?void 0:Ns.dateStr,collection_1_slot:(Cs=(Ss=e==null?void 0:e.slot1)==null?void 0:Ss.slot)==null?void 0:Cs.slot,collection_2_date:(Ps=e==null?void 0:e.slot2)==null?void 0:Ps.dateStr,collection_2_slot:(As=(Ds=e==null?void 0:e.slot2)==null?void 0:Ds.slot)==null?void 0:As.slot,attachment_ids:Yo(e==null?void 0:e.section_key),isCod:(e==null?void 0:e.isCod)||!1,attachmentImages:(e==null?void 0:e.attachmentImages)||[],comments:(e==null?void 0:e.comments)||""};l.push(tn)}else{const M={virtual_type:(e==null?void 0:e.categoryName)==="doctor"?"video":void 0,test_code:(Fs=e==null?void 0:e.doctorDetails)!=null&&Fs.service_code?(Ts=e==null?void 0:e.doctorDetails)==null?void 0:Ts.service_code:void 0,package_code:void 0,useWallet:O,doctor_id:(Es=e==null?void 0:e.doctorDetails)==null?void 0:Es.id,vendor_id:((zs=e==null?void 0:e.hospitalDetails)==null?void 0:zs.vendorId)||((Ms=e==null?void 0:e.hospitalDetails)==null?void 0:Ms.id),address_id:(Rs=e==null?void 0:e.address)==null?void 0:Rs.id,user_id:(Us=e==null?void 0:e.patientsDetails)==null?void 0:Us.id,collection_1_date:(Ls=e==null?void 0:e.slot1)==null?void 0:Ls.dateStr,collection_1_slot:($s=(Bs=e==null?void 0:e.slot1)==null?void 0:Bs.slot)==null?void 0:$s.slot,collection_2_date:(Ws=e==null?void 0:e.slot2)==null?void 0:Ws.dateStr,collection_2_slot:(Gs=(Hs=e==null?void 0:e.slot2)==null?void 0:Hs.slot)==null?void 0:Gs.slot,attachment_ids:Yo(e==null?void 0:e.section_key),isCod:e==null?void 0:e.isCod,attachmentImages:e==null?void 0:e.attachmentImages,comments:e==null?void 0:e.comments};l.push(M)}});const s={medicines:c,useWallet:p,address_id:B==null?void 0:B.id,user_id:A==null?void 0:A.id,collection_1_date:null,collection_1_slot:null,collection_2_date:null,collection_2_slot:null,attachment_ids:Yo("pharmacy"),isCod:(c==null?void 0:c.isCod)||!1,attachmentImages:(c==null?void 0:c.attachmentImages)||[],comments:(c==null?void 0:c.comments)||""};(c==null?void 0:c.length)>0&&l.unshift(s),d&&(l=l.map(e=>({...e,isCod:!0}))),console.log("finalJson1",l),ro(!0);const a=await t(Bn({bookings:l,merchant:n||""}));await t(Jo()),ro(!1),console.log("finalJson1",l),console.log("resp resp",a),(g=a==null?void 0:a.payload)!=null&&g.success?(localStorage.removeItem("raphaPrescriptions"),console.log("resp?.payload?.data?.bookings?.id",(w=(k=(y=a==null?void 0:a.payload)==null?void 0:y.data)==null?void 0:k.bookings)==null?void 0:w.id),!d&&!((C=(S=(N=a==null?void 0:a.payload)==null?void 0:N.data)==null?void 0:S.payment)!=null&&C.instanceBooking)&&((_=(h=a==null?void 0:a.payload)==null?void 0:h.data)!=null&&_.payment)?(((J=(T=a==null?void 0:a.payload)==null?void 0:T.data)==null?void 0:J.payment).razorpay_order_id?yn((V=(Y=a==null?void 0:a.payload)==null?void 0:Y.data)==null?void 0:V.payment):fn((q=(K=a==null?void 0:a.payload)==null?void 0:K.data)==null?void 0:q.payment),console.log("payload?.data?.payments")):(console.log("going to dashboard"),localStorage.removeItem("raphaCart"),t(Vo([])),G((Z=(Q=a==null?void 0:a.payload)==null?void 0:Q.data)==null?void 0:Z.payment),Fo(!0))):(X=a==null?void 0:a.error)!=null&&X.message&&(z((io=a==null?void 0:a.error)==null?void 0:io.message),console.log("resp?.error?.message",(yo=a==null?void 0:a.error)==null?void 0:yo.message))},yn=async n=>{console.log("openPaymentBox vinod");try{const d={key:$n,amount:n.amount,currency:n.currency,name:"Raphacure",description:"Booking Transactions",image:"https://placehold.co/128x128.png",order_id:n.razorpay_order_id,handler:function(l){_n(n.id,l)},prefill:{name:ln,email:i==null?void 0:i.email,contact:i==null?void 0:i.phone},theme:{color:"#9747ff"},modal:{ondismiss:function(){Bo()}}},c=new window.Razorpay(d);console.log("rzp1rzp1rzp1",c),c.open()}catch(d){console.error("Error: rzp1",d)}},_n=async(n,d)=>{var l,p,s;console.log("id",n),console.log("datadata",d);const c={body:{order:d},id:n};try{ro(!0);const a=await t(Wn(c));ro(!1),console.log("respres presp",a==null?void 0:a.payload.data.response);const u=(p=(l=a==null?void 0:a.payload)==null?void 0:l.data)==null?void 0:p.response;(s=a==null?void 0:a.payload)!=null&&s.success?(localStorage.removeItem("raphaCart"),t(Vo([])),G(u),Fo(!0)):(ss("Booking created successfully"),console.log("going to dashboard"))}catch(a){console.log("error",a)}},ss=n=>{eo(n),E(!0)};console.log("subDomainName",Zo);const Lo=()=>{i!=null&&i.from_hr&&Zo!=="wyh"?(i==null?void 0:i.loginType)=="doctorDashboard"?window.location.href="https://www.clinic.raphacure.com/Orders":window.location.href="https://www.hrms.raphacure.com/Bookings":b.push("/dashboard/bookings")},Bo=()=>{ss("Payment failed. Please retry from patient dashboard")},$o=n=>n==="pharmacy"?"Medicines":n==="labtest"?"Lab Test":n==="eyecare"?"Eye Care":n==="dentalcare"?"Dental Care":n==="ctmri"?"CTMRI":n==="ambulance"?"Ambulance":n==="gym"?"GYM":n==="domiciliarycare"?"Domiciliary Care":n==="doctor"?"Doctor":n,Wo=(r==null?void 0:r.actual_cost)-(r==null?void 0:r.final_cost),ns=x.useMemo(()=>!!(localStorage!=null&&localStorage.getItem("raphaPrescriptions")),[]),bn="pharmacy",as=x.useMemo(()=>{let n=!1;return Array.isArray(v)&&(v==null||v.forEach(d=>{var c;(c=d==null?void 0:d.products)==null||c.forEach(l=>{var p;(p=l==null?void 0:l.medicines)==null||p.forEach(s=>{(s==null?void 0:s.counter_type)=="Prescription"&&(n=!0)})})})),n},[JSON.stringify(v)]),jn=async n=>{Is(n),Oo(!0)};x.useEffect(()=>{console.log("cartFinalList : ",v),console.log("allCartItems : ",no)},[v,no]);const vn=n=>{const d=no.carts.map(l=>{if(l.id===n.id){const p=s=>(s==null?void 0:s.map((a,u)=>`${u+1}. ${a}`).join(`
`))||"";return{...l,isCod:!1,attachmentImages:n.imageUrls||[],comments:`
Past Issues :-
${p(n.pastIssues)}
Present Issues :-
${p(n.issues)}
    `.trim()}}return l}),c={...no,carts:d};console.log("updatedCartItems : ",c),Io(c)};return x.useEffect(()=>{const n=v.length===1&&(v[0].section_key==="pharmacy"||v[0].section_key==="labtest")||v.length===2&&v.some(d=>d.section_key==="pharmacy")&&v.some(d=>d.section_key==="labtest");on(n)},[v]),o.jsx(Yn,{children:o.jsxs("div",{children:[o.jsx(Ys,{show:co,titleText:ho,deleteText:"Ok",cancelText:"",onDelete:()=>{E(!1),Lo()}}),o.jsx(Ys,{show:lo,titleText:go,deleteText:"Confirm",cancelText:"Cancel",onCancel:()=>{m(!1)},onDelete:()=>{m(!1),un()}}),o.jsx(Jn,{showModal:nn,user:i,handleOrderTracking:Lo,paymentObj:uo,subDomainDetails:Do,handleModalShow:()=>{Fo(!1),Lo()}}),sn&&o.jsx(Rn,{}),((ds=r==null?void 0:r.carts)==null?void 0:ds.length)===0||!((ps=r==null?void 0:r.carts)!=null&&ps.length)?o.jsxs("div",{className:"no-results-sec",children:[o.jsx("p",{children:"No Items found in your cart."}),o.jsx("button",{onClick:()=>{b.push("/")},children:"Go to home page"})]}):o.jsxs("div",{className:"cart-full-page checkout-page-design1",children:[o.jsx("div",{className:"cart-top-back",children:o.jsxs("span",{className:"your-cart-sec",children:["Your Cart (",v==null?void 0:v.length,")"]})}),o.jsxs("div",{className:"cart-page-content",children:[o.jsx("div",{className:"cart-content-left ",children:o.jsx("div",{className:"checkout-items-all",children:v==null?void 0:v.map(n=>{var d,c,l,p;return o.jsxs("div",{className:"checkout-item-box",children:[o.jsxs("div",{className:"checkout-item-box-header",children:[o.jsxs("p",{className:"item-box-left",children:[$o(n==null?void 0:n.section_key)," (",(d=n==null?void 0:n.products)==null?void 0:d.length,")"]}),o.jsx("p",{className:"item-box-right"})]}),o.jsxs("div",{className:"checkout-item-box-main",children:[(n==null?void 0:n.section_key)==="pharmacy"?o.jsx(o.Fragment,{children:o.jsxs("div",{children:[o.jsx(Hn,{}),o.jsxs("div",{className:"checkout-pha-items-footer",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"d-paha-name",children:["Delivering to",` ${A==null?void 0:A.first_name} ${A==null?void 0:A.last_name}`]}),o.jsx("p",{className:"d-paha-address",children:B==null?void 0:B.address})]}),o.jsx("div",{children:o.jsx("span",{onClick:gn,children:"Change"})})]})]})}):(n==null?void 0:n.section_key)==="ambulance"?o.jsx(o.Fragment,{children:(c=n==null?void 0:n.products)==null?void 0:c.map(s=>{var a,u,g,y;return o.jsx("div",{className:"checkout-item-box-body",children:o.jsx("div",{className:"checkout-box-body-top",children:o.jsxs("div",{className:"body-top-left",children:[o.jsxs("div",{className:"body-top-left-header",children:[o.jsx("p",{className:"vir-name-sec-left",children:"Type: Ambulance"}),o.jsx("div",{children:o.jsx("span",{className:"remove-sec-cont1",onClick:()=>{To(s==null?void 0:s.id)},children:"Remove"})})]}),o.jsx("div",{children:o.jsxs("p",{className:"vir-name-sec-left",children:["Service Name:"," ",(s==null?void 0:s.service_name)||((a=s==null?void 0:s.test)==null?void 0:a.service_name)]})}),o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Date"}),o.jsxs("span",{children:[": ",s==null?void 0:s.collection_1_date]})]}),!so&&o.jsx("div",{className:"dr-content-sec-content",children:o.jsxs("div",{className:"checkout-name-sec checkout-final-amount-sec checkout-final-amount-sec-ambulance",children:[o.jsx("span",{children:"Amount"}),o.jsxs("span",{children:[":",o.jsx(Mo,{}),(y=(g=(u=s==null?void 0:s.price)==null?void 0:u.actual_cost)==null?void 0:g.toFixed(2))==null?void 0:y.toLocaleString("en-US")]})]})})]})})})})}):(n==null?void 0:n.section_key)==="doctor"?o.jsx(o.Fragment,{children:(l=n==null?void 0:n.products)==null?void 0:l.map(s=>{var a,u,g,y,k,w,N,S,C,h,_,T;return console.log("itemitem : ",s),o.jsx("div",{className:"checkout-item-box-body",children:o.jsx("div",{className:"checkout-box-body-top",children:o.jsxs("div",{className:"body-top-left",children:[o.jsxs("div",{className:"body-top-left-header",children:[o.jsx("p",{className:"vir-name-sec-left",children:(s==null?void 0:s.type)==="virtual_consultation"?"Virtual Consultation":(s==null?void 0:s.type)==="opd_consultation"?"OPD Consultation":((a=s==null?void 0:s.doctor)==null?void 0:a.name)||((u=s==null?void 0:s.test)==null?void 0:u.service_name)}),o.jsx("div",{children:o.jsx("span",{className:"remove-sec-cont1",onClick:()=>{To(s==null?void 0:s.id)},children:"Remove"})})]}),o.jsxs("div",{className:"dr-content-sec-content",children:[o.jsxs("div",{className:"dr-content-sec-full",children:[o.jsx("div",{className:"dr-img 1",children:o.jsx("img",{alt:"",src:(g=s==null?void 0:s.doctorDetails)!=null&&g.image||((y=s==null?void 0:s.doctor)==null?void 0:y.gender)==="male"?oo:F})}),o.jsxs("div",{className:"dr-content",children:[o.jsx("p",{className:"dr-name",children:((k=s==null?void 0:s.doctor)==null?void 0:k.name)||((w=s==null?void 0:s.doctor)==null?void 0:w.service_name)}),o.jsx("p",{className:"dr-caregory",children:(N=s==null?void 0:s.doctor)==null?void 0:N.specialization})]})]}),o.jsxs("div",{className:"dr-content-sec-full",children:[o.jsx("div",{className:"pat-img",children:o.jsx("img",{alt:"",src:((S=s==null?void 0:s.user)==null?void 0:S.image)||(i==null?void 0:i.image)||Ko})}),o.jsx("div",{className:"pat-content",children:o.jsxs("p",{className:"pat-name",children:["For"," ",(C=s==null?void 0:s.user)==null?void 0:C.relation]})})]}),o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Date"}),o.jsxs("span",{children:[": ",s==null?void 0:s.collection_1_date]})]}),(s==null?void 0:s.collection_1_slot)&&o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Time"}),o.jsxs("span",{children:[": ",s==null?void 0:s.collection_1_slot]})]}),(s==null?void 0:s.collection_2_date)&&(s==null?void 0:s.collection_2_slot)&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Date"}),o.jsxs("span",{children:[": ",s==null?void 0:s.collection_2_date]})]}),(s==null?void 0:s.collection_2_slot)&&o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Time"}),o.jsxs("span",{children:[":"," ",s==null?void 0:s.collection_2_slot]})]})]}),!so&&o.jsxs("div",{className:"checkout-name-sec checkout-final-amount-sec",children:[o.jsx("span",{children:"Amount"}),o.jsxs("span",{children:[":",o.jsx(Mo,{}),(T=(_=(h=s==null?void 0:s.price)==null?void 0:h.actual_cost)==null?void 0:_.toFixed(2))==null?void 0:T.toLocaleString("en-US")]})]})]})]})})})})}):(n==null?void 0:n.section_key)==="labtest"?o.jsx(o.Fragment,{children:n==null?void 0:n.products.map(s=>{var a,u,g,y,k,w,N,S,C,h;return o.jsx("div",{className:"checkout-item-box-body",children:o.jsx("div",{className:"checkout-box-body-top",children:o.jsxs("div",{className:"body-top-left",children:[o.jsxs("div",{className:"body-top-left-header",children:[o.jsxs("p",{className:"vir-name-sec-left",children:[(a=s==null?void 0:s.vendor)==null?void 0:a.name,", ",(u=s==null?void 0:s.vendor)==null?void 0:u.city]}),o.jsx("div",{children:o.jsx("span",{className:"remove-sec-cont1",onClick:()=>{To(s==null?void 0:s.id)},children:"Remove"})})]}),o.jsxs("div",{className:"dr-content-sec-content",children:[o.jsxs("div",{className:"dr-content-sec-list",children:[(s==null?void 0:s.type)==="package_booking"&&o.jsxs("div",{className:"dr-content-sec-full",children:[o.jsx("div",{className:"dr-img",children:o.jsx("img",{src:((g=s==null?void 0:s.package)==null?void 0:g.image)??"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/120521-1736494444858.png",alt:(y=s==null?void 0:s.package)==null?void 0:y.service_name})}),o.jsxs("div",{className:"dr-content",children:[o.jsx("p",{className:"dr-name",children:(k=s==null?void 0:s.package)==null?void 0:k.service_name}),o.jsx("p",{className:"dr-caregory",children:(w=s==null?void 0:s.package)==null?void 0:w.service_code})]})]}),s.tests&&s.tests.length>0&&s.tests.map(_=>o.jsxs("div",{className:"dr-content-sec-full",children:[o.jsx("div",{className:"dr-img",children:o.jsx("img",{src:(_==null?void 0:_.image)??"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/120521-1736494444858.png",alt:_==null?void 0:_.service_name})}),o.jsxs("div",{className:"dr-content",children:[o.jsx("p",{className:"dr-name",children:_==null?void 0:_.service_name}),o.jsx("p",{className:"dr-caregory",children:_==null?void 0:_.service_code})]})]}))]}),o.jsxs("div",{className:"dr-content-sec-full",children:[o.jsx("div",{className:"pat-img",children:o.jsx("img",{src:Ko})}),o.jsx("div",{className:"pat-content",children:o.jsxs("p",{className:"pat-name",children:["For ",(N=s==null?void 0:s.user)==null?void 0:N.relation]})})]}),o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Date"})," ",o.jsxs("span",{children:[": ",s==null?void 0:s.collection_1_date]})]}),(s==null?void 0:s.collection_1_slot)&&o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Time"})," ",o.jsxs("span",{children:[": ",s==null?void 0:s.collection_1_slot]})]}),(s==null?void 0:s.collection_2_date)&&(s==null?void 0:s.collection_2_slot)&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Date"})," ",o.jsxs("span",{children:[": ",s==null?void 0:s.collection_2_date]})]}),(s==null?void 0:s.collection_2_slot)&&o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Time"})," ",o.jsxs("span",{children:[":"," ",s==null?void 0:s.collection_2_slot]})]})]}),!so&&o.jsxs("div",{className:"checkout-name-sec checkout-final-amount-sec",children:[o.jsx("span",{children:"Amount"})," ",o.jsxs("span",{children:[":",o.jsx(Mo,{}),(h=(C=(S=s==null?void 0:s.price)==null?void 0:S.actual_cost)==null?void 0:C.toFixed(2))==null?void 0:h.toLocaleString("en-US")]})]})]})]})})})})}):o.jsx(o.Fragment,{children:(p=n==null?void 0:n.products)==null?void 0:p.map(s=>{var u,g,y,k,w,N,S,C,h,_,T,J,Y,V,K,q,Q,Z,X;return console.log("itemitemitem products",s),(((u=s.patientsDetails)==null?void 0:u.relation)==="Self"?!0:!!((y=(g=s.doctorDetails)==null?void 0:g.price)!=null&&y.discount_for_dependents))?(w=(k=s==null?void 0:s.doctorDetails)==null?void 0:k.price)==null||w.discounted_price:(S=(N=s==null?void 0:s.doctorDetails)==null?void 0:N.price)!=null&&S.actual_cost||((C=s==null?void 0:s.price)==null||C.actual_cost),o.jsx("div",{className:"checkout-item-box-body",children:o.jsx("div",{className:"checkout-box-body-top",children:o.jsxs("div",{className:"body-top-left",children:[o.jsxs("div",{className:"body-top-left-header",children:[o.jsx("p",{className:"vir-name-sec-left",children:((h=s==null?void 0:s.doctor)==null?void 0:h.name)||((_=s==null?void 0:s.test)==null?void 0:_.service_name)}),o.jsx("div",{children:o.jsx("span",{className:"remove-sec-cont1",onClick:()=>{To(s==null?void 0:s.id)},children:"Remove"})})]}),o.jsxs("div",{className:"dr-content-sec-content",children:[o.jsxs("div",{className:"dr-content-sec-full",children:[o.jsx("div",{className:"dr-img",children:o.jsx("img",{src:((T=s==null?void 0:s.doctor)==null?void 0:T.image)||Gn})}),o.jsxs("div",{className:"dr-content",children:[o.jsx("p",{className:"dr-name",children:((J=s==null?void 0:s.doctor)==null?void 0:J.name)||((Y=s==null?void 0:s.test)==null?void 0:Y.service_name)}),o.jsx("p",{className:"dr-caregory",children:(V=s==null?void 0:s.doctorDetails)==null?void 0:V.specialization})]})]}),o.jsxs("div",{className:"dr-content-sec-full",children:[o.jsx("div",{className:"pat-img",children:o.jsx("img",{src:((K=s==null?void 0:s.user)==null?void 0:K.image)||Ko})}),o.jsx("div",{className:"pat-content",children:o.jsxs("p",{className:"pat-name",children:["For"," ",(q=s==null?void 0:s.user)==null?void 0:q.relation]})})]}),o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Date"}),o.jsxs("span",{children:[": ",s==null?void 0:s.collection_1_date]})]}),(s==null?void 0:s.collection_1_slot)&&o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Time"}),o.jsxs("span",{children:[": ",s==null?void 0:s.collection_1_slot]})]}),(s==null?void 0:s.collection_1_date)&&(s==null?void 0:s.collection_2_slot)&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Date"}),o.jsxs("span",{children:[": ",s==null?void 0:s.collection_1_date]})]}),(s==null?void 0:s.collection_2_slot)&&o.jsxs("div",{className:"checkout-name-sec",children:[o.jsx("span",{children:"Time"}),o.jsxs("span",{children:[":"," ",s==null?void 0:s.collection_2_slot]})]})]}),!so&&o.jsxs("div",{className:"checkout-name-sec checkout-final-amount-sec",children:[o.jsx("span",{children:"Amount "}),o.jsxs("span",{children:[":",o.jsx(Mo,{}),(X=(Z=(Q=s==null?void 0:s.price)==null?void 0:Q.actual_cost)==null?void 0:Z.toFixed(2))==null?void 0:X.toLocaleString("en-US")]})]})]})]})})})})}),((n==null?void 0:n.section_key)==="pharmacy"||(n==null?void 0:n.section_key)==="doctor"||(n==null?void 0:n.section_key)==="labtest")&&o.jsx(Un,{className:"medRecords",onClick:()=>{n!=null&&n.products&&n.products.length>0?jn(n.products[0].id):console.error("No products available to add past medical history.")},children:"Enter Medical Records"})]})]})})})}),o.jsxs("div",{className:"cart-content-right ",children:[o.jsxs("div",{className:"sec-right-content-box",children:[o.jsx("h3",{children:"Billing Details"}),o.jsxs("div",{className:"billing-details-sec",children:[v==null?void 0:v.map(n=>{var l,p;let d=0;(l=n==null?void 0:n.products)==null||l.map(s=>{var a;d=((a=s==null?void 0:s.price)==null?void 0:a.actual_cost)+d});const c=(p=n==null?void 0:n.products)==null?void 0:p.length;return o.jsxs("p",{children:[o.jsxs("span",{children:[$o(n==null?void 0:n.section_key)," (",c,c===1?" Item":" Items",")"]}),o.jsxs("span",{children:["â‚¹"," ",so?"0.00":d==null?void 0:d.toFixed(2).toLocaleString("en-US")]})]})}),(r==null?void 0:r.instant_booking_fees)>0&&o.jsxs("p",{className:"tot-amt-expressbook",children:[o.jsx("span",{children:"Express Booking Fees"}),o.jsxs("span",{children:["â‚¹",(hs=r==null?void 0:r.instant_booking_fees)==null?void 0:hs.toFixed(2).toLocaleString("en-US")]})]}),o.jsxs("p",{className:"tot-amt-pmt",children:[o.jsx("span",{children:"Total Amount"}),o.jsxs("span",{children:["â‚¹",so?"0.00":(us=r==null?void 0:r.actual_cost)==null?void 0:us.toFixed(2).toLocaleString("en-US")]})]}),!so&&o.jsxs("p",{className:"final-dis-pmt",children:[o.jsx("span",{children:"RaphaCure Discount"}),o.jsxs("span",{children:["- â‚¹",Wo==null?void 0:Wo.toFixed(2).toLocaleString("en-US")]})]}),(r==null?void 0:r.platform_fees)>0&&o.jsxs("p",{className:"tot-amt-pmt",children:[o.jsx("span",{children:"Platform Fees"}),o.jsxs("span",{children:["â‚¹",(gs=r==null?void 0:r.platform_fees)==null?void 0:gs.toFixed(2).toLocaleString("en-US")]})]}),Xo&&o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:"final-dis-pmt",children:[o.jsx("span",{children:"Shipping Charges"}),o.jsx("span",{children:"- â‚¹0"})]}),o.jsxs("p",{className:"final-pmt",children:[o.jsx("span",{children:"Final Payment Amount"}),o.jsxs("span",{children:["â‚¹",(xs=r==null?void 0:r.final_cost)==null?void 0:xs.toFixed(2).toLocaleString("en-US")]})]})]})]})]}),((fs=r==null?void 0:r.wallets)==null?void 0:fs.length)>0&&o.jsx(o.Fragment,{children:o.jsxs("div",{className:"sec-right-content-box wallet-sec-cont",children:[o.jsx("h3",{children:"Avaiable Wallets"}),o.jsx("div",{className:"billing-details-sec",children:(is=r==null?void 0:r.wallets)==null?void 0:is.map(n=>o.jsxs("p",{children:[o.jsx("span",{children:n==null?void 0:n.name}),o.jsx("span",{children:n!=null&&n.amount?o.jsx(o.Fragment,{children:o.jsxs("span",{children:[" â‚¹",n==null?void 0:n.amount]})}):o.jsx(o.Fragment,{children:(n==null?void 0:n.discount_percentage)&&o.jsxs(o.Fragment,{children:[" ",n==null?void 0:n.discount_percentage,"%"]})})})]}))})]})}),I&&o.jsx("div",{children:o.jsxs("p",{className:"error_message",children:[" ",I]})}),o.jsx("div",{className:"checkout-pay-buttom-cont",children:(r==null?void 0:r.final_cost)<1?o.jsx(o.Fragment,{children:o.jsx("div",{className:"checkout-pay-buttom checkout-btn-blue",children:o.jsx("button",{onClick:()=>Eo(""),children:"Create Booking"})})}):o.jsxs(o.Fragment,{children:[as&&!ns&&o.jsx("div",{className:"checkout-pay-buttom checkout-btn-yallow",children:o.jsx("button",{className:"btn",onClick:()=>b.push("/uploadprescription/uploadsubprescription",bn),children:"Upload a Prescription"})}),(ns||!as)&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"checkout-pay-buttom checkout-btn-blue",children:o.jsxs("button",{onClick:()=>Eo(""),children:["Pay with Razorpay â‚¹"," ",(ys=r==null?void 0:r.final_cost)==null?void 0:ys.toFixed(2).toLocaleString("en-US")]})}),!Ks&&o.jsx("div",{className:"checkout-pay-buttom",children:o.jsxs("button",{onClick:()=>Eo("phonePe"),children:["Pay with PhonePe â‚¹"," ",(_s=r==null?void 0:r.final_cost)==null?void 0:_s.toFixed(2).toLocaleString("en-US")]})}),o.jsx("div",{className:"checkout-pay-buttom checkout-btn-green",children:o.jsx("button",{onClick:()=>Eo("",!0),disabled:!ms,children:"Cash On Delivery"})})]})]})}),Xo&&o.jsxs("div",{className:"delivery-time",children:[o.jsxs("h2",{children:["Get It Delivered by"," ",o.jsx("span",{className:"time-delivery",children:"-pm, Today"})]}),o.jsx("p",{children:"Delivering to (pincode), (place)"})]})]})]})]}),o.jsx(qn,{show:Xs,onClose:()=>Oo(!1),handleSavePastData:n=>{vn(n)},selectedCartItemId:Os})]})})};export{oa as default};
